import{a as k,r as s,j as e}from"./index-B_YWOrie.js";const I=({shop:f})=>{const[j]=k();f||j.get("shop");const[a,l]=s.useState("shopify"),[d,o]=s.useState(!1),[r,h]=s.useState(null),[N,p]=s.useState(!0),[u,g]=s.useState(!1),[x,m]=s.useState(""),[t,c]=s.useState({shopDomain:"",clientId:"",clientSecret:""});s.useEffect(()=>{y()},[]);const y=async()=>{try{p(!0);const i=await(await window.fetch("/api/integrations/status",{credentials:"include"})).json();i.connected&&i.shop?(o(!0),h(i.shop)):o(!1)}catch(n){console.error("Error checking connection status:",n)}finally{p(!1)}},b=async n=>{n.preventDefault(),m(""),g(!0);try{if(!t.shopDomain.endsWith(".myshopify.com"))throw new Error("Shop domain must end with .myshopify.com");const v=await(await window.fetch("/api/shopify/connect",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({shopUrl:t.shopDomain,accessToken:t.clientSecret})})).json();if(v.success)o(!0),h({shopDomain:t.shopDomain}),c({shopDomain:"",clientId:"",clientSecret:""});else throw new Error(v.error||"Failed to connect")}catch(i){m(i.message||"Failed to connect store")}finally{g(!1)}},S=async()=>{if(confirm("Are you sure you want to disconnect this store?"))try{if((await(await window.fetch("/api/integrations/disconnect",{method:"POST",credentials:"include"})).json()).success)o(!1),h(null);else throw new Error("Failed to disconnect")}catch(n){m(n.message||"Failed to disconnect")}};if(N)return e.jsx("div",{className:"integrations-container",children:e.jsx("div",{className:"loading-message",children:"Loading integration status..."})});const D=()=>e.jsxs("div",{className:"integration-card",children:[e.jsxs("div",{className:"integration-header",children:[e.jsxs("div",{className:"integration-title",children:[e.jsx("div",{className:"integration-logo",children:e.jsx("img",{src:"/images/shopify-logo-svg-vector.svg",alt:"Shopify",style:{width:"24px",height:"24px"}})}),e.jsx("span",{children:"Shopify"})]}),e.jsx("div",{className:`status-badge ${d?"status-connected":"status-not-connected"}`,children:d?"Connected":"Not Connected"})]}),e.jsx("p",{className:"integration-description",children:"Connect your Shopify store to enable automated order management, customer calls, and RTO tracking. Once connected, you'll be able to upload CSV files, manage call scripts, and track order statuses."}),d&&r?e.jsxs("div",{className:"connected-info",children:[e.jsx("div",{className:"connected-info-title",children:"âœ… Connected"}),e.jsxs("div",{className:"connected-info-detail",children:["Shop: ",r.shopDomain]}),r.connectedAt&&e.jsxs("div",{className:"connected-info-detail",children:["Connected: ",new Date(r.connectedAt).toLocaleDateString()]}),e.jsx("button",{className:"btn btn-secondary disconnect-btn",onClick:S,children:"Disconnect"})]}):e.jsxs("div",{className:"connection-form",children:[x&&e.jsx("div",{className:"error-message",children:x}),e.jsxs("form",{onSubmit:b,children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",htmlFor:"shopDomain",children:"Shop Domain"}),e.jsx("input",{type:"text",id:"shopDomain",name:"shopDomain",className:"form-input",placeholder:"example.myshopify.com",value:t.shopDomain,onChange:n=>c({...t,shopDomain:n.target.value}),required:!0}),e.jsx("div",{className:"form-hint",children:"Use your myshopify.com domain"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",htmlFor:"clientId",children:"Client ID"}),e.jsx("input",{type:"text",id:"clientId",name:"clientId",className:"form-input",placeholder:"App client ID",value:t.clientId,onChange:n=>c({...t,clientId:n.target.value}),required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",htmlFor:"clientSecret",children:"Access Token"}),e.jsx("input",{type:"password",id:"clientSecret",name:"clientSecret",className:"form-input",placeholder:"Shopify access token",value:t.clientSecret,onChange:n=>c({...t,clientSecret:n.target.value}),required:!0}),e.jsx("div",{className:"form-hint",children:"Your Shopify private app access token"})]}),e.jsx("button",{type:"submit",className:"btn btn-primary",disabled:u,children:u?"Connecting...":"Connect Store"})]})]})]}),w=()=>e.jsxs("div",{className:"integration-card",children:[e.jsxs("div",{className:"integration-header",children:[e.jsxs("div",{className:"integration-title",children:[e.jsx("div",{className:"integration-logo",children:"ðŸ“¦"}),e.jsx("span",{children:"NDR (Non-Delivery Report)"})]}),e.jsx("div",{className:"status-badge status-not-connected",children:"Not Connected"})]}),e.jsx("p",{className:"integration-description",children:"Connect your NDR (Non-Delivery Report) service to automatically track failed delivery attempts and manage return-to-origin (RTO) orders. This integration helps you identify delivery issues early and take proactive action to recover orders."}),e.jsxs("div",{className:"connection-form",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",htmlFor:"ndrProvider",children:"NDR Provider"}),e.jsxs("select",{id:"ndrProvider",className:"form-input",children:[e.jsx("option",{value:"",children:"Select NDR Provider"}),e.jsx("option",{value:"shiprocket",children:"Shiprocket"}),e.jsx("option",{value:"delhivery",children:"Delhivery"}),e.jsx("option",{value:"pickrr",children:"Pickrr"}),e.jsx("option",{value:"other",children:"Other"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",htmlFor:"ndrApiKey",children:"API Key"}),e.jsx("input",{type:"password",id:"ndrApiKey",name:"ndrApiKey",className:"form-input",placeholder:"Enter your NDR provider API key"}),e.jsx("div",{className:"form-hint",children:"Your NDR provider API key for authentication"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",htmlFor:"ndrApiSecret",children:"API Secret"}),e.jsx("input",{type:"password",id:"ndrApiSecret",name:"ndrApiSecret",className:"form-input",placeholder:"Enter your NDR provider API secret"}),e.jsx("div",{className:"form-hint",children:"Your NDR provider API secret (if required)"})]}),e.jsx("button",{type:"button",className:"btn btn-primary",disabled:!0,children:"Connect NDR Service"}),e.jsx("div",{className:"form-hint",style:{marginTop:"12px",color:"#6b7280",fontSize:"13px"},children:"NDR integration is coming soon. This feature will allow automatic tracking of failed delivery attempts and RTO orders."})]})]}),C=()=>e.jsxs("div",{className:"integration-card",children:[e.jsx("div",{className:"integration-header",children:e.jsxs("div",{className:"integration-title",children:[e.jsx("div",{className:"integration-logo",children:"ðŸ”Œ"}),e.jsx("span",{children:"Other Integrations"})]})}),e.jsx("p",{className:"integration-description",children:"Additional integrations are coming soon. We're constantly working on adding new integrations to help you streamline your workflow."}),e.jsxs("div",{style:{padding:"24px",textAlign:"center",color:"#6b7280"},children:[e.jsx("p",{children:"More integrations will be available here in the future."}),e.jsx("p",{style:{marginTop:"12px",fontSize:"14px"},children:"Have a specific integration in mind? Contact our support team to request it."})]})]});return e.jsxs("div",{className:"integrations-container",children:[e.jsx("div",{className:"page-header",children:e.jsx("p",{className:"page-subtitle",children:"Connect your services to get started"})}),e.jsxs("div",{className:"integrations-navbar",children:[e.jsx("button",{className:`integration-nav-item ${a==="shopify"?"active":""}`,onClick:()=>l("shopify"),children:"Shopify"}),e.jsx("button",{className:`integration-nav-item ${a==="ndr"?"active":""}`,onClick:()=>l("ndr"),children:"NDR"}),e.jsx("button",{className:`integration-nav-item ${a==="others"?"active":""}`,onClick:()=>l("others"),children:"Others"})]}),e.jsxs("div",{className:"integration-content",children:[a==="shopify"&&D(),a==="ndr"&&w(),a==="others"&&C()]})]})};export{I as default};
