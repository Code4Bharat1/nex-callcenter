import{a as Vs,b as Xs,r as a,j as t}from"./index-B_YWOrie.js";import{O as dt}from"./index-LMWlVbK9.js";import{api as is}from"./api-CYk9FEKy.js";import{L as qs}from"./Loading-BvPCrw-b.js";import{p as Gs}from"./transcriptParser-B0Eamk1c.js";/* empty css                   *//* empty css                 *//* empty css                  *//* empty css                */const Qs=Q=>{if(!Q)return"N/A";const O=new Date(Q),o=new Date,m=new Date(o.getFullYear(),o.getMonth(),o.getDate()),_=new Date(m);_.setDate(_.getDate()-1);const b=new Date(O.getFullYear(),O.getMonth(),O.getDate()),Y=O.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0});return b.getTime()===m.getTime()?`today at ${Y}`:b.getTime()===_.getTime()?`yesterday at ${Y}`:Math.floor((m-b)/(1e3*60*60*24))<7?`${O.toLocaleDateString("en-US",{weekday:"short"})} at ${Y}`:O.toLocaleDateString("en-US",{month:"short",day:"numeric",year:O.getFullYear()!==o.getFullYear()?"numeric":void 0})+` at ${Y}`},G=()=>{const Q=new Date,O=5.5*60*60*1e3,o=new Date(Q.getTime()+O),m=o.getUTCFullYear(),_=String(o.getUTCMonth()+1).padStart(2,"0"),b=String(o.getUTCDate()).padStart(2,"0");return`${m}-${_}-${b}`},Hr=({shop:Q})=>{const[O]=Vs();Xs();const o=Q||O.get("shop"),[m,_]=a.useState(G()),[b,Y]=a.useState(G()),[Z,ze]=a.useState(""),[ve,Zs]=a.useState("all"),[Fe,er]=a.useState("all"),[ee,ct]=a.useState("all"),[pt,tr]=a.useState("CREATED_AT"),[ut,sr]=a.useState("desc"),[ke,ds]=a.useState("CREATED_AT"),[Te,gt]=a.useState("desc"),[rr,ar]=a.useState("all"),[nr,or]=a.useState("all"),[de,xt]=a.useState("all"),[lr,ir]=a.useState(""),[dr,cr]=a.useState(""),[ce,ft]=a.useState(""),[ht,mt]=a.useState("custom"),[pe,yt]=a.useState("all"),[cs,ue]=a.useState(!1),[v,bt]=a.useState(null),[ge,St]=a.useState([]),[ps,Ct]=a.useState(!1),[K,Oe]=a.useState([]),[pr,We]=a.useState({}),[J,ur]=a.useState(null),[M,xe]=a.useState(new Set),[V,fe]=a.useState(!1),[us,he]=a.useState(!1),[me,wt]=a.useState([]),[$,ye]=a.useState(""),[X,be]=a.useState(""),[te,jt]=a.useState(!1),[gr,Le]=a.useState(!1),[R,gs]=a.useState({totalCount:0,totalPages:0,currentPage:1,hasNext:!1,hasPrev:!1,limit:100}),[T,xs]=a.useState("order"),[F,vt]=a.useState("asc"),[Se,Ce]=a.useState(null),[De,Ne]=a.useState(null),[Ft,fs]=a.useState({top:0,left:0}),[hs,$e]=a.useState(!1),[ms,ys]=a.useState(0),[bs,Ss]=a.useState("100%"),kt=a.useRef(null),Tt=a.useRef(null),[z,Ue]=a.useState([]),[w,_e]=a.useState({hasNextPage:!1,endCursor:null,startCursor:null,hasPreviousPage:!1,totalCount:0}),[Ee,Cs]=a.useState([]),[Ae,ws]=a.useState(1),[He,js]=a.useState(25),[A,vs]=a.useState(()=>{try{const e=localStorage.getItem(`allOrdersColumnWidths_${o||"default"}`);if(e)return JSON.parse(e)}catch(e){console.error("Error loading column widths:",e)}return{checkbox:40,order:120,customer:150,flags:100,date:140,total:100,paymentStatus:130,fulfillmentStatus:140,items:80,deliveryMethod:150,tags:150,callingStatus:120}}),[H,Ye]=a.useState(null),[Dt,Nt]=a.useState(0),[Et,At]=a.useState(0),[C,se]=a.useState(new Set),[It,q]=a.useState(!1),[re,Bt]=a.useState(new Map),[Fs,Ie]=a.useState(!1),[ae,Ke]=a.useState(""),[Mt,Je]=a.useState(""),[Ve,Rt]=a.useState(!1),[I,xr]=a.useState("all-orders"),[Pt,zt]=a.useState(!1),[Ot,Wt]=a.useState(!1),Lt=a.useRef(null),$t=a.useRef(null),[Xe,fr]=a.useState("shopify"),[Ut,ks]=a.useState(!1),_t=a.useRef(null),Ht=a.useRef(null),Yt=a.useRef(null),[hr,mr]=a.useState("days"),[Kt,Ts]=a.useState(!1),Jt=a.useRef(null),[yr,qe]=a.useState(null),[br,Vt]=a.useState(!1),Ge={pendingOrders:0,ndrCount:0,codOrdersToday:0,queuedCallsToday:0,todaysOutcomes:{total:0,outcomes:{}},todaysSuccessCriteria:0,ndrConnected:!1},[Be,Qe]=a.useState(Ge),[Sr,Xt]=a.useState(!1),[Cr,Ze]=a.useState([]),[wr,qt]=a.useState(!1),[Ds,et]=a.useState(!0),[tt,Gt]=a.useState(!1),[U,Qt]=a.useState(!1),[Zt,st]=a.useState(null),[es,ts]=a.useState(!1),[jr,vr]=a.useState({}),Me=e=>Number(e||0);Me(Be.pendingOrders),Me(Be.ndrCount),Me(Be.codOrdersToday),Me(Be.queuedCallsToday);const ne=e=>{if(!e)return null;const s=e instanceof Date?e:new Date(e);return Number.isNaN(s.getTime())?null:s.toLocaleDateString("en-US",{month:"short",day:"numeric"})};(()=>{if(m&&b){if(m===b)return ne(m);const e=ne(m),s=ne(b);return e&&s?`${e} - ${s}`:e||s}return ne(m||b||new Date)})();const[Ns,Re]=a.useState([]),[Fr,ss]=a.useState(!1),[rt,Es]=a.useState(!1),[As,Is]=a.useState({enabled:!1,scriptId:null,allowedTimeStart:"09:00",allowedTimeEnd:"18:00",timezone:"Asia/Kolkata",allowedDays:"0,1,2,3,4,5,6",maxRetries:3,retryIntervalMinutes:60,channels:1,callConditions:[],notCallConditions:[]}),[kr,rs]=a.useState(!1),[Tr,as]=a.useState(!1),[Dr,Nr]=a.useState(!1),[f,P]=a.useState({enabled:!1,scriptId:null,callConditions:[],notCallConditions:[]}),[Er,Ar]=a.useState(!1),[Ir,Br]=a.useState(!1),at=async()=>{if(o){Vt(!0);try{const s=await(await fetch(`/api/dashboard-stats-tab?shop=${encodeURIComponent(o)}`,{credentials:"include"})).json();s.success&&s.data?(qe(s.data),console.log("[Dashboard2] Dashboard stats loaded:",s.data)):(console.error("[Dashboard2] Failed to load dashboard stats:",s.error),qe(null))}catch(e){console.error("[Dashboard2] Error loading dashboard stats:",e),qe(null)}finally{Vt(!1)}}},nt=async()=>{if(o){Xt(!0);try{const e=new URLSearchParams({shop:o});m&&e.append("fromDate",m),b&&e.append("toDate",b);const r=await(await fetch(`/api/dashboard-card-metrics?${e.toString()}`,{credentials:"include"})).json();console.log("[Dashboard2] Dashboard card metrics response:",r),r.success&&r.data?(console.log("[Dashboard2] Setting card metrics:",r.data),Qe(r.data)):(console.warn("[Dashboard2] Failed to load card metrics, using defaults. Response:",r),Qe(Ge))}catch(e){console.error("[Dashboard2] Error loading dashboard card metrics:",e),Qe(Ge)}finally{Xt(!1)}}},ns=async()=>{if(o){qt(!0);try{const s=await(await fetch(`/api/clips?shop=${encodeURIComponent(o)}&limit=10`,{credentials:"include"})).json();s.success&&Array.isArray(s.clips)?(Ze(s.clips),console.log("[Dashboard2] Clippings loaded:",s.clips.length)):(console.error("[Dashboard2] Failed to load clippings:",s.error),Ze([]))}catch(e){console.error("[Dashboard2] Error loading clippings:",e),Ze([])}finally{qt(!1)}}},ot=async()=>{if(o)try{const e=new URLSearchParams({shop:o});m&&e.append("fromDate",m),b&&e.append("toDate",b);const r=await(await fetch(`/api/new-rto-bucket-orders?${e.toString()}`,{credentials:"include"})).json();r.success?(We(r.stats||{}),console.log("[Dashboard2] RTO stats loaded:",r.stats)):(console.error("[Dashboard2] Failed to load RTO stats:",r.error),We({}))}catch(e){console.error("[Dashboard2] Error loading RTO stats:",e),We({})}},we=async(e=1)=>{if(o){Gt(!0);try{const s=new URLSearchParams({shop:o,page:e.toString(),limit:"100"});m&&s.append("fromDate",m),b&&s.append("toDate",b),J&&s.append("reason",J),Xe==="ndr"&&s.append("isNdr","true");const n=await(await fetch(`/api/new-rto-bucket-orders?${s.toString()}`,{credentials:"include"})).json();n.success?(Oe(n.orders||[]),gs(n.pagination||{totalCount:n.totalCount||0,totalPages:Math.ceil((n.totalCount||0)/100),currentPage:e,hasNext:!1,hasPrev:!1,limit:100}),console.log("[Dashboard2] New RTO bucket orders loaded:",{count:n.orders?.length||0,totalCount:n.totalCount,filteredBy:J||"none",page:n.pagination?.currentPage||e})):(console.error("[Dashboard2] Failed to load new RTO bucket orders:",n.error),Oe([]))}catch(s){console.error("[Dashboard2] Error loading new RTO bucket orders:",s),Oe([])}finally{Gt(!1)}}},Bs=async()=>{if(o){ss(!0);try{const e=await is.getScripts(o);e&&Array.isArray(e.scripts)?Re(e.scripts):Array.isArray(e)?Re(e):Re([])}catch(e){console.error("[Dashboard2] Error loading agents:",e),Re([])}finally{ss(!1)}}},Ms=async()=>{if(o){rs(!0);try{const s=await(await fetch(`/api/shopify-auto-call-settings?shop=${encodeURIComponent(o)}`,{credentials:"include"})).json();s.success&&s.settings&&Is({enabled:s.settings.enabled||!1,scriptId:s.settings.scriptId||null,allowedTimeStart:s.settings.allowedTimeStart||"09:00",allowedTimeEnd:s.settings.allowedTimeEnd||"18:00",timezone:s.settings.timezone||"Asia/Kolkata",allowedDays:s.settings.allowedDays||"0,1,2,3,4,5,6",maxRetries:s.settings.maxRetries||3,retryIntervalMinutes:s.settings.retryIntervalMinutes||60,channels:s.settings.channels||1,callConditions:s.settings.callConditions||[],notCallConditions:s.settings.notCallConditions||[]})}catch(e){console.error("Error loading auto call settings:",e)}finally{rs(!1)}}},Rs=async()=>{if(o){as(!0);try{const s=await(await fetch(`/api/update-shop-auto-call-settings?shop=${encodeURIComponent(o)}`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(As)})).json();s.success?alert("Auto call settings saved successfully"):alert("Failed to save settings: "+(s.error||"Unknown error"))}catch(e){console.error("Error saving auto call settings:",e),alert("Error saving settings: "+e.message)}finally{as(!1)}}},Ps=async e=>{Ct(!0),ue(!0);try{const s=e.name||e.orderNumber,r=e.id;let n,i;if(s)try{if(n=await fetch(`/api/order-details?orderNumber=${encodeURIComponent(s.replace(/^#/,""))}&shop=${encodeURIComponent(o)}`,{credentials:"include"}),n.ok&&(i=await n.json(),i.success)){bt(i.order),St(i.calls||[]);return}}catch(c){console.log("[AllOrders] OrderNumber lookup failed, trying orderId:",c)}let d=r;if(r){const c=String(r);if(c.includes("/")){const l=c.match(/\/(\d+)$/);l&&(d=l[1])}else d=c}if(d){if(n=await fetch(`/api/order-details?orderId=${encodeURIComponent(d)}&shop=${encodeURIComponent(o)}`,{credentials:"include"}),!n.ok)throw new Error(`HTTP ${n.status}: ${n.statusText}`);if(i=await n.json(),i.success)bt(i.order),St(i.calls||[]);else throw new Error(i.error||"Failed to load order details")}else throw new Error("No order ID or order number available")}catch(s){console.error("[AllOrders] Error loading order details:",s),alert("Error loading order details: "+(s.message||"Unknown error")),ue(!1)}finally{Ct(!1)}},os=e=>{if(!e)return"N/A";try{return new Date(e).toLocaleString("en-IN",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0,timeZone:"Asia/Kolkata"})}catch{return"N/A"}},oe=async(e=null,s="next")=>{if(o){Qt(!0);try{const r=new URLSearchParams({shop:o,first:He.toString()});e&&r.append("after",e),m&&r.append("fromDate",m),b&&r.append("toDate",b),Z&&r.append("search",Z),ve!=="all"&&r.append("callStatus",ve),Fe!=="all"&&r.append("orderStatus",Fe),ee!=="all"&&r.append("fulfillmentStatus",ee),pe!=="all"&&r.append("hasBeenCalled",pe==="called"?"true":"false"),ce&&r.append("tags",ce),de!=="all"&&r.append("paymentType",de),ke&&r.append("sortKey",ke),Te&&r.append("reverse",Te==="desc"?"true":"false");const i=await(await fetch(`/api/shopify-orders?${r.toString()}`,{credentials:"include"})).json();if(i.success){const d=i.orders||[];Ue(d);const c=new Map;d.forEach(y=>{c.set(y.id,!1)}),Bt(c);const l=d.map(y=>y.name||"").filter(Boolean),j=d.map(y=>y.id||"").filter(Boolean);if(console.log("[AllOrders] Fetching call status for orders:",{orderNumbers:l.slice(0,5),orderIds:j.slice(0,5),total:l.length}),l.length>0||j.length>0){console.log("[AllOrders] ðŸš€ About to call /api/orders-call-status with:",{orderNumbersCount:l.length,orderIdsCount:j.length,sampleOrderNumbers:l.slice(0,3),sampleOrderIds:j.slice(0,3)});const y=o?`?shop=${encodeURIComponent(o)}`:"";fetch(`/api/orders-call-status${y}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({orderNumbers:l,orderIds:j,shop:o}),credentials:"include"}).then(u=>(console.log("[AllOrders] âœ… API Response received. Status:",u.status,u.statusText),u.ok?u.json():u.text().then(h=>{throw console.error("[AllOrders] âŒ API Error response:",h),new Error(`API error: ${u.status} ${h}`)}))).catch(u=>{throw console.error("[AllOrders] âŒ Fetch error (network/parsing):",u),u}).then(u=>{if(console.log("[AllOrders] ðŸ“¦ API Response received:",{success:u.success,error:u.error,callStatusKeys:u.callStatus?Object.keys(u.callStatus).slice(0,20):[],callStatusSample:u.callStatus?Object.entries(u.callStatus).slice(0,10).reduce((h,[E,S])=>({...h,[E]:S}),{}):{}}),u.callStatus){const h=Object.keys(u.callStatus).filter(E=>E.includes("27046")||E.includes("NK/27046")||E.includes("7323861877027"));console.log("[AllOrders] ðŸ” NK/27046 keys in API response:",h),console.log("[AllOrders] ðŸ” NK/27046 values in API response:",h.reduce((E,S)=>({...E,[S]:u.callStatus[S]}),{}))}if(u.success&&u.callStatus){d.forEach(S=>{const k=S.name||"",L=S.id||"",B=[];if(L&&(B.push(L),L.includes("/"))){const x=L.match(/\/(\d+)$/);x&&B.push(x[1])}if(k){B.push(k);const x=k.replace(/^#/,"");x!==k&&B.push(x),B.push(`#${x}`);const ie=k.match(/(\d+)$/);ie&&(B.push(ie[1]),B.push(`#${ie[1]}`))}let le=!1,p=null;for(const x of B)if(u.callStatus[x]!==void 0){le=u.callStatus[x],p=x;break}c.set(S.id,le),(k==="NK/27046"||k.includes("27046"))&&console.log("[AllOrders] ðŸ” NK/27046 DEBUG:",{orderName:k,orderId:L,keysToCheck:B,matchedBy:p,hasCalls:le,allKeys:Object.keys(u.callStatus),relevantKeys:Object.keys(u.callStatus).filter(x=>B.includes(x)||x.includes("27046")||x.includes(L)),relevantValues:Object.entries(u.callStatus).filter(([x,ie])=>B.includes(x)||x.includes("27046")||x.includes(L)).reduce((x,[ie,Js])=>({...x,[ie]:Js}),{})}),le?console.log(`[AllOrders] âœ… Order "${k}" (${L}) HAS CALLS - Matched by: ${p}`):console.log(`[AllOrders] âŒ Order "${k}" (${L}) - NO CALLS. Checked keys:`,B)});const h=new Map(c);Bt(h);const E=Array.from(h.entries()).filter(([S,k])=>S.includes("7323861877027")||S.includes("27046"));console.log("[AllOrders] Call status updated. Total entries:",h.size),console.log("[AllOrders] NK/27046 related entries:",E),console.log("[AllOrders] All Map entries (first 20):",Array.from(h.entries()).slice(0,20).map(([S,k])=>`${S.substring(0,50)}:${k}`))}else console.warn("[AllOrders] Call status response missing or invalid:",u)}).catch(u=>{console.error("[AllOrders] Error fetching bulk call status:",u)})}let D=[...Ee],g=Ae;s==="next"&&e?(D.push(e),g=Ae+1):s==="prev"?(D.pop(),g=Math.max(1,Ae-1)):s==="reset"&&(D=[],g=1),Cs(D),ws(g),_e({hasNextPage:i.pageInfo?.hasNextPage||!1,endCursor:i.pageInfo?.endCursor||null,startCursor:i.pageInfo?.startCursor||null,hasPreviousPage:D.length>0,totalCount:i.totalCount||z.length||0})}else console.error("[Dashboard2] Failed to load Shopify orders:",i.error),Ue([]),_e({hasNextPage:!1,endCursor:null,startCursor:null,hasPreviousPage:!1,totalCount:0})}catch(r){console.error("[Dashboard2] Error loading Shopify orders:",r),Ue([]),_e({hasNextPage:!1,endCursor:null,startCursor:null,hasPreviousPage:!1})}finally{Qt(!1)}}};a.useEffect(()=>{const e=s=>{Lt.current&&!Lt.current.contains(s.target)&&zt(!1),$t.current&&!$t.current.contains(s.target)&&Wt(!1),Jt.current&&!Jt.current.contains(s.target)&&Ts(!1),Ht.current&&!Ht.current.contains(s.target)&&zt(!1),Yt.current&&!Yt.current.contains(s.target)&&Wt(!1)};return(Pt||Ot||Kt)&&document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[Pt,Ot,Kt]),a.useEffect(()=>{if(!o){st("No shop parameter found"),et(!1);return}(async()=>{try{et(!0),st(null);try{const s=await is.getShopBalance(o);s.success&&s.data&&ts(s.data.isTestShop===!0)}catch(s){console.error("Error checking shop:",s),ts(!1)}I==="stats"&&await Promise.all([at(),nt(),ot(),ns()]),Promise.all([we(),oe(null,"reset"),Ws(),Bs()]).catch(s=>console.error("Error loading data:",s))}catch(s){console.error("Error loading dashboard data:",s),st(s.message||"Failed to load dashboard data")}finally{et(!1)}})()},[o]),a.useEffect(()=>{o&&I==="stats"&&(at(),nt(),ot(),ns())},[I,o]),a.useEffect(()=>{o&&I==="all-orders"&&Ms()},[I,o]),a.useEffect(()=>{o&&I==="all-orders"&&oe(null,"reset")},[m,b,o,Xe,Z,ve,Fe,ee,pe,ce,de,He,pt,ut]),a.useEffect(()=>{o&&I==="stats"&&(at(),nt(),ot(),we())},[m,b,o,Xe,Z,ve,Fe,ee,pt,ut]),a.useEffect(()=>{if(!H)return;const e=r=>{const n=r.clientX-Dt,i=Math.max(50,Et+n);vs(d=>{const c={...d,[H]:i};try{localStorage.setItem(`allOrdersColumnWidths_${o||"default"}`,JSON.stringify(c))}catch(l){console.error("Error saving column widths:",l)}return c})},s=()=>{Ye(null)};return document.addEventListener("mousemove",e),document.addEventListener("mouseup",s),()=>{document.removeEventListener("mousemove",e),document.removeEventListener("mouseup",s)}},[H,Dt,Et,o]);const W=(e,s,r=!1,n=null)=>{const i=r&&ke===n;return t.jsxs("th",{style:{textTransform:"none",fontWeight:500,fontSize:"11px",cursor:r?"pointer":"default",userSelect:"none",position:"relative",width:A[e]||100,minWidth:50,padding:"8px 10px",borderRight:"1px solid #F3F4F6"},onClick:r?()=>{ke===n?gt(Te==="asc"?"desc":"asc"):(ds(n),gt("asc")),oe(null,"reset")}:void 0,onMouseEnter:r?d=>d.currentTarget.style.background="#F9FAFB":void 0,onMouseLeave:r?d=>d.currentTarget.style.background="transparent":void 0,children:[t.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:t.jsxs("span",{children:[s," ",i&&(Te==="asc"?"â†‘":"â†“")]})}),t.jsx("div",{style:{position:"absolute",right:0,top:0,bottom:0,width:"4px",cursor:"col-resize",backgroundColor:H===e?"#5167D3":"transparent",zIndex:10},onMouseDown:d=>{d.preventDefault(),d.stopPropagation(),Ye(e),Nt(d.clientX),At(A[e]||100)},onMouseEnter:d=>{H!==e&&(d.currentTarget.style.backgroundColor="#D1D5DB")},onMouseLeave:d=>{H!==e&&(d.currentTarget.style.backgroundColor="transparent")}})]},e)};a.useEffect(()=>{const e=s=>{_t.current&&!_t.current.contains(s.target)&&ks(!1)};return Ut&&document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[Ut]),a.useEffect(()=>{o&&we()},[J,o]);const zs=e=>{xe(s=>{const r=new Set(s);return r.has(e)?r.delete(e):r.add(e),r})},Pe=()=>{if(V){const e=new Set(K.map(s=>s.orderId||s.id));xe(s=>{const r=new Set(s);return e.forEach(n=>r.delete(n)),r}),fe(!1)}else{const e=K.map(s=>s.orderId||s.id);xe(s=>{const r=new Set(s);return e.forEach(n=>r.add(n)),r}),fe(!0)}};a.useEffect(()=>{if(K.length===0){fe(!1);return}const e=new Set(K.map(r=>r.orderId||r.id)),s=Array.from(e).every(r=>M.has(r));fe(s&&e.size>0)},[K,M]);const Os=()=>{if(It){const e=new Set(z.map(s=>s.orderId||s.id));se(s=>{const r=new Set(s);return e.forEach(n=>r.delete(n)),r}),q(!1)}else{const e=z.map(s=>s.orderId||s.id);se(s=>{const r=new Set(s);return e.forEach(n=>r.add(n)),r}),q(!0)}};a.useEffect(()=>{if(z.length===0){q(!1);return}const e=new Set(z.map(r=>r.orderId||r.id)),s=Array.from(e).every(r=>C.has(r));q(s&&e.size>0)},[z,C]);const ls=async()=>{const e=[...Array.from(M),...Array.from(C)];if(e.length===0){alert("Please select at least one order");return}if(!ae||ae.trim()===""){alert("Please enter a clip name");return}if(!o){alert("Shop information is missing");return}Rt(!0);try{const r=await(await fetch("/api/clips",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({name:ae.trim(),description:Mt.trim()||null,orderIds:e,shop:o})})).json();r.success?(alert(`âœ… Clip "${ae.trim()}" created successfully with ${e.length} orders!`),console.log("[Dashboard2] Clip created:",r.clip),Ke(""),Je(""),Ie(!1),xe(new Set),se(new Set),fe(!1),q(!1)):(alert("âŒ Failed to create clip: "+(r.error||"Unknown error")),console.error("[Dashboard2] Failed to create clip:",r.error))}catch(s){console.error("[Dashboard2] Error creating clip:",s),alert("âŒ Error creating clip: "+s.message)}finally{Rt(!1)}},Ws=async()=>{try{const s=await(await fetch("/api/user-tags",{credentials:"include"})).json();s.success&&s.tags&&wt(s.tags)}catch(e){console.error("Error loading user tags:",e)}},Ls=()=>{if(M.size===0&&C.size===0){alert("Please select at least one order");return}he(!0)},lt=async e=>{if(!e||!e.trim()){alert("Please enter or select a tag");return}if(!o){alert("Shop information is missing");return}try{jt(!0);const s=[...Array.from(M),...Array.from(C)];if(s.length===0){alert("Please select at least one order");return}const i=[...K,...z].filter(l=>s.includes(l.orderId||l.id)).map(l=>{const j=l.orderId;return j&&j.startsWith("gid://shopify/Order/")?j:`gid://shopify/Order/${j}`}),c=await(await fetch("/api/tag-orders",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({orderIds:i,tag:e.trim(),shop:o}),credentials:"include"})).json();if(c.success){const l=c.results.filter(D=>D.success).length,j=c.results.filter(D=>!D.success).length;if(alert(`âœ… Tagging completed!

ðŸ“Š Results:
â€¢ Successfully tagged: ${l}
â€¢ Failed: ${j}`),!me.includes(e.trim()))try{await fetch("/api/user-tags",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({tag:e.trim()}),credentials:"include"}),wt([...me,e.trim()])}catch(D){console.error("Error saving tag:",D)}he(!1),ye(""),be(""),xe(new Set),se(new Set)}else alert(`âŒ Tagging failed: ${c.error||"Unknown error"}`)}catch(s){console.error("Error tagging orders:",s),alert("Error tagging orders")}finally{jt(!1)}},$s=e=>{if(!e)return"";try{const s=new Date(e),r=new Date,n=new Date(r.getFullYear(),r.getMonth(),r.getDate()),i=new Date(n);i.setDate(i.getDate()-1);const d=new Date(s.getFullYear(),s.getMonth(),s.getDate()),c=s.getHours(),l=s.getMinutes(),j=c>=12?"pm":"am",D=c%12||12,g=l.toString().padStart(2,"0"),y=`${D}:${g}${j}`;if(d.getTime()===n.getTime())return`today at ${y}`;if(d.getTime()===i.getTime())return`yesterday at ${y}`;const h=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][s.getMonth()],E=s.getDate(),S=s.getFullYear().toString().slice(-2);return`${E} ${h} ${S}`}catch{return e.toString().slice(0,19).replace("T"," ")}},Us=e=>({bad_address:"Bad Address",impulsive:"Impulsive Orders",high_intent:"High Intent",sussy:"Sussy",spam:"Spam",unknown:"Unknown"})[e]||e||"Unknown",je=({status:e,type:s="default"})=>{const r={paid:{label:"Paid",color:"#059669",bg:"#ECFDF5",border:"#A7F3D0"},prepaid:{label:"Prepaid",color:"#059669",bg:"#ECFDF5",border:"#A7F3D0"},pending:{label:"Pending",color:"#F59E0B",bg:"#FEF3C7",border:"#FDE68A"},pending_payment:{label:"Pending Payment",color:"#F59E0B",bg:"#FEF3C7",border:"#FDE68A"},cod:{label:"COD",color:"#F59E0B",bg:"#FEF3C7",border:"#FDE68A"},refunded:{label:"Refunded",color:"#7C3AED",bg:"#F3E8FF",border:"#DDD6FE"},fulfilled:{label:"Fulfilled",color:"#059669",bg:"#ECFDF5",border:"#A7F3D0"},unfulfilled:{label:"Unfulfilled",color:"#6B7280",bg:"#F3F4F6",border:"#E5E7EB"},partial:{label:"Partial",color:"#F59E0B",bg:"#FEF3C7",border:"#FDE68A"},called:{label:"Called",color:"#059669",bg:"#ECFDF5",border:"#A7F3D0"},"didn't_called":{label:"Didn't Called",color:"#DC2626",bg:"#FEE2E2",border:"#FECACA"},"didn't called":{label:"Didn't Called",color:"#DC2626",bg:"#FEE2E2",border:"#FECACA"},not_called:{label:"Not Called",color:"#6B7280",bg:"#F3F4F6",border:"#E5E7EB"},queued:{label:"Queued",color:"#2563EB",bg:"#EFF6FF",border:"#BFDBFE"},in_progress:{label:"In Progress",color:"#F59E0B",bg:"#FEF3C7",border:"#FDE68A"},completed:{label:"Completed",color:"#059669",bg:"#ECFDF5",border:"#A7F3D0"},failed:{label:"Failed",color:"#DC2626",bg:"#FEE2E2",border:"#FECACA"}},n=(e||"").toLowerCase().replace(/\s+/g,"_"),i=r[n]||{label:e||"N/A",color:"#6B7280",bg:"#F3F4F6",border:"#E5E7EB"};return t.jsx("span",{style:{display:"inline-flex",alignItems:"center",padding:"4px 10px",borderRadius:"6px",fontSize:"12px",fontWeight:500,color:i.color,backgroundColor:i.bg,border:`1px solid ${i.border}`,whiteSpace:"nowrap",fontFamily:"Inter, system-ui, -apple-system, sans-serif",transition:"all 0.15s ease"},children:i.label})},_s=e=>{const s=(e||"").toLowerCase().includes("prepaid")||(e||"").toLowerCase().includes("paid");return t.jsx(je,{status:s?"prepaid":"cod",type:"payment"})},Hs=e=>{const s=(e||"unfulfilled").toLowerCase();return t.jsx(je,{status:s,type:"fulfillment"})},Ys=(e,s=null)=>{const n={bad_address:{name:"Bad Address",bgColor:"#D5EBFF",textColor:"#003A5A",iconPath:"/images/badaddress.svg",meaning:"meaning that the addresses kharab hai",reasons:[{icon:"/images/eye.svg",text:"<10 line address"},{icon:"/images/Scan_alt.svg",text:"Unusual Words"},{icon:"/images/Flag_alt.svg",text:"Missing Fields"}]},impulsive:{name:"Impulsive Orders",bgColor:"#D5EBFF",textColor:"#003A5A",iconPath:"/images/impulsive.svg",meaning:"meaning that the orders are impulsive",reasons:[{icon:"/images/eye.svg",text:"<10 line address"},{icon:"/images/Scan_alt.svg",text:"Unusual Words"},{icon:"/images/Flag_alt.svg",text:"Missing Fields"}]},high_intent:{name:"High Intent",bgColor:"#D1FAE5",textColor:"#003A5A",iconPath:"/images/intent.svg",meaning:"meaning that the customer has high intent",reasons:[{icon:"/images/eye.svg",text:"<10 line address"},{icon:"/images/Scan_alt.svg",text:"Unusual Words"},{icon:"/images/Flag_alt.svg",text:"Missing Fields"}]},sussy:{name:"Sussy",bgColor:"#D5EBFF",textColor:"#003A5A",iconPath:"/images/sussy.svg",meaning:"meaning that the orders are suspicious",reasons:[{icon:"/images/eye.svg",text:"<10 line address"},{icon:"/images/Scan_alt.svg",text:"Unusual Words"},{icon:"/images/Flag_alt.svg",text:"Missing Fields"}]},spam:{name:"Spam",bgColor:"#FEE2E2",textColor:"#003A5A",iconPath:"/images/spam.svg",meaning:"meaning that the orders are spam",reasons:[{icon:"/images/eye.svg",text:"<10 line address"},{icon:"/images/Scan_alt.svg",text:"Unusual Words"},{icon:"/images/Flag_alt.svg",text:"Missing Fields"}]}}[e]||{name:"Unknown",bgColor:"#F9FAFB",textColor:"#1f2937",iconPath:"/images/badaddress.svg"},i=c=>{if(!e||!s)return;const l=c.currentTarget.getBoundingClientRect();Ne({reason:e,orderId:s}),fs({top:l.bottom+8,left:l.left})},d=()=>{Ne(null)};return t.jsxs("span",{style:{display:"inline-flex",alignItems:"center",gap:"4px",background:n.bgColor,border:"none",borderRadius:"8px",paddingTop:"3px",paddingBottom:"3px",paddingLeft:"6px",paddingRight:"6px",fontSize:"11px",fontFamily:"Manrope, sans-serif",position:"relative",cursor:"pointer"},onMouseEnter:i,onMouseLeave:d,children:[t.jsx("img",{src:n.iconPath,alt:n.name,style:{width:"12px",height:"12px",flexShrink:0,display:"block"}}),t.jsx("span",{style:{color:n.textColor,fontWeight:600,fontSize:"12px"},children:n.name})]})},Ks=e=>({bad_address:{name:"Bad Address",meaning:"meaning that the addresses kharab hai",reasons:[{icon:"/images/eye.svg",text:"<10 line address"},{icon:"/images/Scan_alt.svg",text:"Unusual Words"},{icon:"/images/Flag_alt.svg",text:"Missing Fields"}]},impulsive:{name:"Impulsive Orders",meaning:"meaning that the orders are impulsive",reasons:[{icon:"/images/eye.svg",text:"<10 line address"},{icon:"/images/Scan_alt.svg",text:"Unusual Words"},{icon:"/images/Flag_alt.svg",text:"Missing Fields"}]},high_intent:{name:"High Intent",meaning:"meaning that the customer has high intent",reasons:[{icon:"/images/eye.svg",text:"<10 line address"},{icon:"/images/Scan_alt.svg",text:"Unusual Words"},{icon:"/images/Flag_alt.svg",text:"Missing Fields"}]},sussy:{name:"Sussy",meaning:"meaning that the orders are suspicious",reasons:[{icon:"/images/eye.svg",text:"<10 line address"},{icon:"/images/Scan_alt.svg",text:"Unusual Words"},{icon:"/images/Flag_alt.svg",text:"Missing Fields"}]},spam:{name:"Spam",meaning:"meaning that the orders are spam",reasons:[{icon:"/images/eye.svg",text:"<10 line address"},{icon:"/images/Scan_alt.svg",text:"Unusual Words"},{icon:"/images/Flag_alt.svg",text:"Missing Fields"}]}})[e]||{name:"Unknown",meaning:"",reasons:[]};a.useEffect(()=>{const e=s=>{Se&&!s.target.closest(".action-menu-dropdown")&&!s.target.closest("button.btn-icon")&&Ce(null)};return Se&&document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[Se]);const N=e=>{T===e?vt(F==="asc"?"desc":"asc"):(xs(e),vt("asc"))},it=[...J?K.filter(e=>e.newRtoBucketReason===J):K].sort((e,s)=>{let r,n;switch(T){case"order":r=(e.orderNumber||e.orderId||e.id||"").toString(),n=(s.orderNumber||s.orderId||s.id||"").toString();break;case"date":r=new Date(e.createdAt||0).getTime(),n=new Date(s.createdAt||0).getTime();break;case"customer":r=(e.customerName||"").toString().toLowerCase(),n=(s.customerName||"").toString().toLowerCase();break;case"phone":r=(e.customerPhone||"").toString(),n=(s.customerPhone||"").toString();break;case"address":r=(e.customerAddress||"").toString().toLowerCase(),n=(s.customerAddress||"").toString().toLowerCase();break;case"payment":r=(e.paymentMethod||e.paymentStatus||"COD").toString().toLowerCase(),n=(s.paymentMethod||s.paymentStatus||"COD").toString().toLowerCase();break;case"fulfillment":r=(e.fulfillmentStatus||"unfulfilled").toString().toLowerCase(),n=(s.fulfillmentStatus||"unfulfilled").toString().toLowerCase();break;case"reason":r=(e.newRtoBucketReason||"").toString().toLowerCase(),n=(s.newRtoBucketReason||"").toString().toLowerCase();break;default:return 0}return r<n?F==="asc"?-1:1:r>n?F==="asc"?1:-1:0});return a.useEffect(()=>{if(I==="rto-bucket"){Le(!0);const e=setTimeout(()=>{Le(!1)},1500);return()=>clearTimeout(e)}else Le(!1)},[I]),a.useEffect(()=>{if(I!=="rto-bucket"){$e(!1);return}const e=kt.current,s=Tt.current;if(!e||!s){$e(!1);return}const r=160,n=()=>{if(s){const l=s.getBoundingClientRect(),j=parseInt(getComputedStyle(document.documentElement).getPropertyValue("--sidebar-width"))||250;ys(l.left-j),Ss(`${l.width}px`)}},i=()=>{if(!e||!s)return;const l=e.getBoundingClientRect(),D=s.getBoundingClientRect().top>r,g=l.top>r,y=l.top<=r,u=!D&&y&&!g;$e(h=>u&&!h?(n(),!0):!u&&h?!1:(u&&h&&n(),h))},d=new IntersectionObserver(l=>{i()},{root:null,rootMargin:`-${r}px 0px 0px 0px`,threshold:[0,.1,.5,1]});d.observe(e),d.observe(s);const c=()=>{n(),i()};return window.addEventListener("scroll",i,{passive:!0}),window.addEventListener("resize",c,{passive:!0}),n(),i(),()=>{d.disconnect(),window.removeEventListener("scroll",i),window.removeEventListener("resize",c)}},[I,it]),o?Ds?t.jsx("div",{className:"dashboard-container",children:t.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:"calc(100vh - 200px)",gap:"20px",padding:"40px 20px"},children:[t.jsx(dt,{src:"https://lottie.host/d76bbc89-666d-46a0-898b-cc343e4fc5b8/pxRPeuoOie.lottie",loop:!0,autoplay:!0,style:{width:"300px",height:"300px"}}),t.jsx("div",{style:{fontSize:"18px",fontWeight:500,color:"#6B7280",fontFamily:"Manrope, sans-serif"},children:"Building Dashboard ..."})]})}):t.jsxs("div",{className:`dashboard-container ${es?"dashboard-container--blurred":""} ${I==="rto-bucket"?"dashboard-container--rto-bucket":""} ${I==="all-orders"?"dashboard-container--all-orders":""}`,children:[Zt&&t.jsx("div",{className:"error-message",children:t.jsxs("p",{children:["Error: ",Zt]})}),t.jsx("div",{className:"dashboard-tabs-container dashboard-tabs-container--sticky"}),!1,I==="rto-bucket"&&t.jsxs("div",{className:"dashboard-tab-content dashboard-tab-content--rto-bucket",children:[I==="rto-bucket"&&hs&&t.jsx("div",{className:"sticky-table-header-wrapper",style:{left:`calc(var(--sidebar-width) + ${ms}px)`,width:bs},children:t.jsx("table",{className:"orders-table sticky-table-header",style:{width:"100%",tableLayout:"auto"},children:t.jsx("thead",{children:V||M.size>0?t.jsx("tr",{children:t.jsx("th",{colSpan:"10",style:{padding:"8px 10px",background:"#F9FAFB",borderBottom:"1px solid #E5E7EB"},children:t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"16px"},children:[t.jsx("input",{type:"checkbox",checked:V,onChange:Pe,style:{width:"16px",height:"16px",cursor:"pointer"}}),t.jsxs("span",{style:{fontSize:"14px",fontWeight:500,color:"#1f2937",fontFamily:"Manrope, sans-serif"},children:[M.size," selected"]}),t.jsx("button",{onClick:Ls,style:{padding:"2px 12px",background:"#ffffff",color:"#1f2937",border:"1px solid #5167D3",borderRadius:"6px",fontSize:"13px",fontWeight:500,fontFamily:"Manrope, sans-serif",cursor:"pointer",boxShadow:"0 2px 0 #291C64",transition:"all 0.2s ease",display:"flex",alignItems:"center",gap:"6px"},onMouseEnter:e=>{e.currentTarget.style.background="#f0f4ff",e.currentTarget.style.borderColor="#291C64",e.currentTarget.style.boxShadow="0 2px 0 #291C64, inset 0 0 8px rgba(41, 28, 100, 0.2)"},onMouseLeave:e=>{e.currentTarget.style.background="#ffffff",e.currentTarget.style.borderColor="#5167D3",e.currentTarget.style.boxShadow="0 2px 0 #291C64"},children:"Tag orders"}),t.jsx("button",{onClick:ls,style:{padding:"2px 12px",background:"#ffffff",color:"#1f2937",border:"1px solid #5167D3",borderRadius:"6px",fontSize:"13px",fontWeight:500,fontFamily:"Manrope, sans-serif",cursor:"pointer",boxShadow:"0 2px 0 #291C64",transition:"all 0.2s ease",display:"flex",alignItems:"center",gap:"6px"},onMouseEnter:e=>{e.currentTarget.style.background="#f0f4ff",e.currentTarget.style.borderColor="#291C64",e.currentTarget.style.boxShadow="0 2px 0 #291C64, inset 0 0 8px rgba(41, 28, 100, 0.2)"},onMouseLeave:e=>{e.currentTarget.style.background="#ffffff",e.currentTarget.style.borderColor="#5167D3",e.currentTarget.style.boxShadow="0 2px 0 #291C64"},children:"Create Clip"}),t.jsx("button",{onClick:()=>{alert("Export functionality coming soon")},style:{padding:"2px 12px",background:"#ffffff",color:"#1f2937",border:"1px solid #5167D3",borderRadius:"6px",fontSize:"13px",fontWeight:500,fontFamily:"Manrope, sans-serif",cursor:"pointer",boxShadow:"0 2px 0 #291C64",transition:"all 0.2s ease",display:"flex",alignItems:"center",gap:"6px"},onMouseEnter:e=>{e.currentTarget.style.background="#f0f4ff",e.currentTarget.style.borderColor="#291C64",e.currentTarget.style.boxShadow="0 2px 0 #291C64, inset 0 0 8px rgba(41, 28, 100, 0.2)"},onMouseLeave:e=>{e.currentTarget.style.background="#ffffff",e.currentTarget.style.borderColor="#5167D3",e.currentTarget.style.boxShadow="0 2px 0 #291C64"},children:"Export"}),t.jsx("button",{onClick:()=>{alert("More options coming soon")},style:{padding:"2px 12px",background:"#ffffff",color:"#1f2937",border:"1px solid #5167D3",borderRadius:"6px",fontSize:"13px",fontWeight:500,fontFamily:"Manrope, sans-serif",cursor:"pointer",boxShadow:"0 2px 0 #291C64",transition:"all 0.2s ease",display:"flex",alignItems:"center",gap:"6px"},onMouseEnter:e=>{e.currentTarget.style.background="#f0f4ff",e.currentTarget.style.borderColor="#291C64",e.currentTarget.style.boxShadow="0 2px 0 #291C64, inset 0 0 8px rgba(41, 28, 100, 0.2)"},onMouseLeave:e=>{e.currentTarget.style.background="#ffffff",e.currentTarget.style.borderColor="#5167D3",e.currentTarget.style.boxShadow="0 2px 0 #291C64"},children:"â‹¯"})]})})}):t.jsxs("tr",{children:[t.jsx("th",{style:{width:"40px"},children:t.jsx("input",{type:"checkbox",checked:V,onChange:Pe})}),t.jsx("th",{className:"sortable-header",onClick:()=>N("order"),style:{cursor:"pointer",userSelect:"none",width:"100px"},children:t.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"4px"},children:["Order",t.jsx("span",{className:"sort-arrows",children:T==="order"?F==="asc"?"â†‘":"â†“":t.jsx("span",{className:"sort-arrow-hover",children:"â†•"})})]})}),t.jsx("th",{className:"sortable-header",onClick:()=>N("date"),style:{cursor:"pointer",userSelect:"none",width:"140px"},children:t.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"4px"},children:["Date",t.jsx("span",{className:"sort-arrows",children:T==="date"?F==="asc"?"â†‘":"â†“":t.jsx("span",{className:"sort-arrow-hover",children:"â†•"})})]})}),t.jsx("th",{className:"sortable-header",onClick:()=>N("customer"),style:{cursor:"pointer",userSelect:"none",width:"150px"},children:t.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"4px"},children:["Customer",t.jsx("span",{className:"sort-arrows",children:T==="customer"?F==="asc"?"â†‘":"â†“":t.jsx("span",{className:"sort-arrow-hover",children:"â†•"})})]})}),t.jsx("th",{className:"sortable-header",onClick:()=>N("phone"),style:{cursor:"pointer",userSelect:"none",width:"120px"},children:t.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"4px"},children:["Phone",t.jsx("span",{className:"sort-arrows",children:T==="phone"?F==="asc"?"â†‘":"â†“":t.jsx("span",{className:"sort-arrow-hover",children:"â†•"})})]})}),t.jsx("th",{className:"sortable-header",onClick:()=>N("address"),style:{cursor:"pointer",userSelect:"none",width:"200px"},children:t.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"4px"},children:["Address",t.jsx("span",{className:"sort-arrows",children:T==="address"?F==="asc"?"â†‘":"â†“":t.jsx("span",{className:"sort-arrow-hover",children:"â†•"})})]})}),t.jsx("th",{className:"sortable-header",onClick:()=>N("payment"),style:{cursor:"pointer",userSelect:"none",width:"110px"},children:t.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"4px"},children:["Payment",t.jsx("span",{className:"sort-arrows",children:T==="payment"?F==="asc"?"â†‘":"â†“":t.jsx("span",{className:"sort-arrow-hover",children:"â†•"})})]})}),t.jsx("th",{className:"sortable-header",onClick:()=>N("fulfillment"),style:{cursor:"pointer",userSelect:"none",width:"120px"},children:t.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"4px"},children:["Fulfilment",t.jsx("span",{className:"sort-arrows",children:T==="fulfillment"?F==="asc"?"â†‘":"â†“":t.jsx("span",{className:"sort-arrow-hover",children:"â†•"})})]})}),t.jsx("th",{className:"sortable-header",onClick:()=>N("reason"),style:{cursor:"pointer",userSelect:"none",width:"140px"},children:t.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"4px"},children:["Reason",t.jsx("span",{className:"sort-arrows",children:T==="reason"?F==="asc"?"â†‘":"â†“":t.jsx("span",{className:"sort-arrow-hover",children:"â†•"})})]})}),t.jsx("th",{style:{width:"60px"}})]})})})}),t.jsxs("div",{className:"content-card rto-bucket-card",style:{marginBottom:"24px"},ref:Tt,children:[t.jsx("div",{className:"table-container",children:tt?t.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"60px 20px",gap:"20px",minHeight:"400px"},children:[t.jsx(dt,{src:"https://lottie.host/d76bbc89-666d-46a0-898b-cc343e4fc5b8/pxRPeuoOie.lottie",loop:!0,autoplay:!0,style:{width:"200px",height:"200px"}}),t.jsx("div",{style:{fontSize:"16px",fontWeight:500,color:"#6B7280",fontFamily:"Manrope, sans-serif"},children:"Building Dashboard ..."})]}):t.jsxs("table",{className:"orders-table",style:{width:"100%",tableLayout:"auto"},children:[t.jsx("thead",{ref:kt,children:V||M.size>0?t.jsx("tr",{children:t.jsx("th",{colSpan:"10",style:{padding:"8px 10px",background:"#F9FAFB",borderBottom:"1px solid #E5E7EB"},children:t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"16px"},children:[t.jsx("input",{type:"checkbox",checked:V,onChange:Pe,style:{width:"16px",height:"16px",cursor:"pointer"}}),t.jsxs("span",{style:{fontSize:"14px",fontWeight:500,color:"#1f2937",fontFamily:"Manrope, sans-serif"},children:[M.size," selected"]}),t.jsx("button",{onClick:lt,style:{padding:"2px 12px",background:"#ffffff",color:"#1f2937",border:"1px solid #5167D3",borderRadius:"6px",fontSize:"13px",fontWeight:500,fontFamily:"Manrope, sans-serif",cursor:"pointer",boxShadow:"0 2px 0 #291C64",transition:"all 0.2s ease",display:"flex",alignItems:"center",gap:"6px"},onMouseEnter:e=>{e.currentTarget.style.background="#f0f4ff",e.currentTarget.style.borderColor="#291C64",e.currentTarget.style.boxShadow="0 2px 0 #291C64, inset 0 0 8px rgba(41, 28, 100, 0.2)"},onMouseLeave:e=>{e.currentTarget.style.background="#ffffff",e.currentTarget.style.borderColor="#5167D3",e.currentTarget.style.boxShadow="0 2px 0 #291C64"},children:"Tag orders"}),t.jsx("button",{onClick:()=>{if([...Array.from(M),...Array.from(C)].length===0){alert("Please select at least one order");return}Ie(!0)},style:{padding:"2px 12px",background:"#ffffff",color:"#1f2937",border:"1px solid #5167D3",borderRadius:"6px",fontSize:"13px",fontWeight:500,fontFamily:"Manrope, sans-serif",cursor:"pointer",boxShadow:"0 2px 0 #291C64",transition:"all 0.2s ease",display:"flex",alignItems:"center",gap:"6px"},onMouseEnter:e=>{e.currentTarget.style.background="#f0f4ff",e.currentTarget.style.borderColor="#291C64",e.currentTarget.style.boxShadow="0 2px 0 #291C64, inset 0 0 8px rgba(41, 28, 100, 0.2)"},onMouseLeave:e=>{e.currentTarget.style.background="#ffffff",e.currentTarget.style.borderColor="#5167D3",e.currentTarget.style.boxShadow="0 2px 0 #291C64"},children:"Create Clip"}),t.jsx("button",{onClick:()=>{alert("Export functionality coming soon")},style:{padding:"2px 12px",background:"#ffffff",color:"#1f2937",border:"1px solid #5167D3",borderRadius:"6px",fontSize:"13px",fontWeight:500,fontFamily:"Manrope, sans-serif",cursor:"pointer",boxShadow:"0 2px 0 #291C64",transition:"all 0.2s ease",display:"flex",alignItems:"center",gap:"6px"},onMouseEnter:e=>{e.currentTarget.style.background="#f0f4ff",e.currentTarget.style.borderColor="#291C64",e.currentTarget.style.boxShadow="0 2px 0 #291C64, inset 0 0 8px rgba(41, 28, 100, 0.2)"},onMouseLeave:e=>{e.currentTarget.style.background="#ffffff",e.currentTarget.style.borderColor="#5167D3",e.currentTarget.style.boxShadow="0 2px 0 #291C64"},children:"Export"}),t.jsx("button",{onClick:()=>{alert("More options coming soon")},style:{padding:"2px 12px",background:"#ffffff",color:"#1f2937",border:"1px solid #5167D3",borderRadius:"6px",fontSize:"13px",fontWeight:500,fontFamily:"Manrope, sans-serif",cursor:"pointer",boxShadow:"0 2px 0 #291C64",transition:"all 0.2s ease",display:"flex",alignItems:"center",gap:"6px"},onMouseEnter:e=>{e.currentTarget.style.background="#f0f4ff",e.currentTarget.style.borderColor="#291C64",e.currentTarget.style.boxShadow="0 2px 0 #291C64, inset 0 0 8px rgba(41, 28, 100, 0.2)"},onMouseLeave:e=>{e.currentTarget.style.background="#ffffff",e.currentTarget.style.borderColor="#5167D3",e.currentTarget.style.boxShadow="0 2px 0 #291C64"},children:"â‹¯"})]})})}):t.jsxs("tr",{children:[t.jsx("th",{style:{width:"40px"},children:t.jsx("input",{type:"checkbox",checked:V,onChange:Pe})}),t.jsx("th",{className:"sortable-header",onClick:()=>N("order"),style:{cursor:"pointer",userSelect:"none",width:"100px"},children:t.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"4px"},children:["Order",t.jsx("span",{className:"sort-arrows",children:T==="order"?F==="asc"?"â†‘":"â†“":t.jsx("span",{className:"sort-arrow-hover",children:"â†•"})})]})}),t.jsx("th",{className:"sortable-header",onClick:()=>N("date"),style:{cursor:"pointer",userSelect:"none",width:"140px"},children:t.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"4px"},children:["Date",t.jsx("span",{className:"sort-arrows",children:T==="date"?F==="asc"?"â†‘":"â†“":t.jsx("span",{className:"sort-arrow-hover",children:"â†•"})})]})}),t.jsx("th",{className:"sortable-header",onClick:()=>N("customer"),style:{cursor:"pointer",userSelect:"none",width:"150px"},children:t.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"4px"},children:["Customer",t.jsx("span",{className:"sort-arrows",children:T==="customer"?F==="asc"?"â†‘":"â†“":t.jsx("span",{className:"sort-arrow-hover",children:"â†•"})})]})}),t.jsx("th",{className:"sortable-header",onClick:()=>N("phone"),style:{cursor:"pointer",userSelect:"none",width:"120px"},children:t.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"4px"},children:["Phone",t.jsx("span",{className:"sort-arrows",children:T==="phone"?F==="asc"?"â†‘":"â†“":t.jsx("span",{className:"sort-arrow-hover",children:"â†•"})})]})}),t.jsx("th",{className:"sortable-header",onClick:()=>N("address"),style:{cursor:"pointer",userSelect:"none",width:"200px"},children:t.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"4px"},children:["Address",t.jsx("span",{className:"sort-arrows",children:T==="address"?F==="asc"?"â†‘":"â†“":t.jsx("span",{className:"sort-arrow-hover",children:"â†•"})})]})}),t.jsx("th",{className:"sortable-header",onClick:()=>N("payment"),style:{cursor:"pointer",userSelect:"none",width:"110px"},children:t.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"4px"},children:["Payment",t.jsx("span",{className:"sort-arrows",children:T==="payment"?F==="asc"?"â†‘":"â†“":t.jsx("span",{className:"sort-arrow-hover",children:"â†•"})})]})}),t.jsx("th",{className:"sortable-header",onClick:()=>N("fulfillment"),style:{cursor:"pointer",userSelect:"none",width:"120px"},children:t.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"4px"},children:["Fulfilment",t.jsx("span",{className:"sort-arrows",children:T==="fulfillment"?F==="asc"?"â†‘":"â†“":t.jsx("span",{className:"sort-arrow-hover",children:"â†•"})})]})}),t.jsx("th",{className:"sortable-header",onClick:()=>N("reason"),style:{cursor:"pointer",userSelect:"none",width:"140px"},children:t.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"4px"},children:["Reason",t.jsx("span",{className:"sort-arrows",children:T==="reason"?F==="asc"?"â†‘":"â†“":t.jsx("span",{className:"sort-arrow-hover",children:"â†•"})})]})}),t.jsx("th",{className:"sortable-header",onClick:()=>N("callingStatus"),style:{cursor:"pointer",userSelect:"none",width:"140px"},children:t.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"4px"},children:["Calling Status",t.jsx("span",{className:"sort-arrows",children:T==="callingStatus"?F==="asc"?"â†‘":"â†“":t.jsx("span",{className:"sort-arrow-hover",children:"â†•"})})]})}),t.jsx("th",{style:{width:"60px"}})]})}),t.jsx("tbody",{children:it.length>0?it.map((e,s)=>{const r=e.orderId||e.id,n=M.has(r),i=["COD","Prepaid","COD","Prepaid","COD","Prepaid","COD","Prepaid","COD","Prepaid"],d=["unfulfilled","fulfilled","unfulfilled","fulfilled","unfulfilled","fulfilled","unfulfilled","fulfilled","unfulfilled","fulfilled"],c=["bad_address","impulsive","high_intent","sussy","spam","bad_address","impulsive","high_intent","sussy","spam"],l=s<10?i[s]:e.paymentMethod||e.paymentStatus,j=s<10?d[s]:e.fulfillmentStatus,D=s<10?c[s]:e.newRtoBucketReason;return t.jsxs("tr",{style:{background:n?"#F9FAFB":"#ffffff",transition:"background-color 0.2s ease"},onMouseEnter:g=>{n?g.currentTarget.style.background="#ffffff":g.currentTarget.style.background="#F9FAFB"},onMouseLeave:g=>{n?g.currentTarget.style.background="#F9FAFB":g.currentTarget.style.background="#ffffff"},children:[t.jsx("td",{children:t.jsx("input",{type:"checkbox",checked:n,onChange:()=>zs(r)})}),t.jsx("td",{style:{fontWeight:600},children:e.orderNumber||e.orderId||e.id}),t.jsx("td",{className:"date-cell",children:$s(e.createdAt)}),t.jsx("td",{style:{maxWidth:"150px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:(e.customerName||"").toString()}),t.jsx("td",{children:e.customerPhone||""}),t.jsx("td",{style:{maxWidth:"200px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:e.customerAddress||"N/A"}),t.jsx("td",{children:_s(l)}),t.jsx("td",{children:Hs(j)}),t.jsx("td",{children:Ys(D,r)}),t.jsx("td",{children:(()=>{const y=e.calls&&e.calls.length>0?e.calls[0]:null,u=y&&(y.callStatus==="connected"||y.callStatus==="talking"||y.callStatus==="on_call"),h=e.callStatus&&e.callStatus!=="completed"&&e.callStatus!=="failed"&&!u;let E="Not initiated",S="#6b7280",k="#f3f4f6";return u?(E="On Call/talking",S="#059669",k="#ecfdf5"):h&&(E="In queue",S="#2563eb",k="#eff6ff"),t.jsx("span",{style:{display:"inline-block",padding:"4px 12px",borderRadius:"12px",fontSize:"12px",fontWeight:600,background:k,color:S,border:`1px solid ${S}40`},children:E})})()}),t.jsxs("td",{style:{width:"60px",position:"relative"},children:[t.jsx("button",{className:"btn-icon",style:{background:"none",border:"none",cursor:"pointer",fontSize:"16px",padding:"4px 8px",color:"#6B7280",fontWeight:"bold"},title:"Actions",onClick:g=>{g.stopPropagation();const y=e.id||e.orderId;Ce(Se===y?null:y)},children:"â‹¯"}),Se===(e.id||e.orderId)&&t.jsxs("div",{className:"action-menu-dropdown",style:{position:"absolute",right:"0",top:"100%",background:"#ffffff",border:"1px solid #E5E7EB",borderRadius:"6px",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.1)",zIndex:1e3,minWidth:"120px",marginTop:"4px"},children:[t.jsx("div",{style:{padding:"8px 12px",cursor:"pointer",fontSize:"12px",color:"#1f2937",borderBottom:"1px solid #F3F4F6"},onMouseEnter:g=>g.currentTarget.style.background="#F9FAFB",onMouseLeave:g=>g.currentTarget.style.background="#ffffff",onClick:g=>{g.stopPropagation(),Ce(null)},children:"Call"}),t.jsx("div",{style:{padding:"8px 12px",cursor:"pointer",fontSize:"12px",color:"#1f2937",borderBottom:"1px solid #F3F4F6"},onMouseEnter:g=>g.currentTarget.style.background="#F9FAFB",onMouseLeave:g=>g.currentTarget.style.background="#ffffff",onClick:g=>{g.stopPropagation(),Ce(null)},children:"Clip"}),t.jsx("div",{style:{padding:"8px 12px",cursor:"pointer",fontSize:"12px",color:"#1f2937"},onMouseEnter:g=>g.currentTarget.style.background="#F9FAFB",onMouseLeave:g=>g.currentTarget.style.background="#ffffff",onClick:g=>{g.stopPropagation(),Ce(null)},children:"Tag"})]})]})]},e.id||e.orderId)}):t.jsx("tr",{children:t.jsx("td",{colSpan:"9",className:"empty-state",children:J?`No orders found for ${Us(J)}`:"No today's unverified orders found"})})})]})}),De&&t.jsx("div",{style:{position:"fixed",top:`${Ft.top}px`,left:`${Ft.left}px`,background:"#ffffff",borderRadius:"12px",padding:"20px",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.15)",zIndex:1e4,minWidth:"280px",maxWidth:"320px",fontFamily:"Manrope, sans-serif"},onMouseEnter:()=>Ne(De),onMouseLeave:()=>Ne(null),children:(()=>{const e=Ks(De.reason);return t.jsxs(t.Fragment,{children:[t.jsx("div",{style:{display:"flex",justifyContent:"center",marginBottom:"12px"},children:t.jsx("img",{src:"/images/image 161.svg",alt:"Hand icon",style:{width:"32px",height:"32px"}})}),t.jsx("div",{style:{fontSize:"16px",fontWeight:600,color:"#1f2937",textAlign:"center",marginBottom:"8px"},children:e.name}),t.jsx("div",{style:{fontSize:"13px",color:"#6B7280",textAlign:"center",marginBottom:"16px"},children:e.meaning}),t.jsx("div",{style:{display:"flex",justifyContent:"space-between",gap:"8px",marginBottom:"16px"},children:e.reasons.map((s,r)=>t.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"4px",flex:1},children:[t.jsx("img",{src:s.icon,alt:s.text,style:{width:"20px",height:"20px"}}),t.jsx("span",{style:{fontSize:"11px",color:"#1f2937",textAlign:"center"},children:s.text})]},r))}),t.jsx("button",{onClick:()=>{console.log("View Customer clicked for:",De.orderId)},style:{width:"100%",padding:"8px 16px",background:"#ffffff",color:"#1f2937",border:"1px solid #5167D3",borderRadius:"8px",fontSize:"14px",fontWeight:500,fontFamily:"Manrope, sans-serif",cursor:"pointer",boxShadow:"0 2px 0 #291C64",transition:"all 0.2s ease",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"},onMouseEnter:s=>{s.currentTarget.style.background="#f0f4ff",s.currentTarget.style.borderColor="#291C64",s.currentTarget.style.boxShadow="0 2px 0 #291C64, inset 0 0 8px rgba(41, 28, 100, 0.2)"},onMouseLeave:s=>{s.currentTarget.style.background="#ffffff",s.currentTarget.style.borderColor="#5167D3",s.currentTarget.style.boxShadow="0 2px 0 #291C64"},children:"View Customer"})]})})()}),t.jsx("div",{className:"rto-bucket-pagination-bar",children:t.jsxs("div",{className:"rto-bucket-pagination-content",children:[t.jsx("button",{className:"rto-bucket-pagination-btn",onClick:()=>we(R.currentPage-1),disabled:!R.hasPrev||tt,children:t.jsx("svg",{width:"14",height:"14",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:t.jsx("path",{d:"M10 12L6 8L10 4",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}),t.jsx("button",{className:"rto-bucket-pagination-btn",onClick:()=>we(R.currentPage+1),disabled:!R.hasNext||tt,children:t.jsx("svg",{width:"14",height:"14",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:t.jsx("path",{d:"M6 12L10 8L6 4",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}),t.jsxs("span",{className:"rto-bucket-pagination-text",children:[R.currentPage===1?`1-${Math.min(R.limit,R.totalCount)}`:`${(R.currentPage-1)*R.limit+1}-${Math.min(R.currentPage*R.limit,R.totalCount)}`," of ",R.totalCount]})]})})]})]}),I==="all-orders"&&t.jsxs("div",{className:"content-card",style:{marginBottom:"24px",display:"flex",flexDirection:"column",height:"100%"},children:[t.jsxs("div",{style:{padding:"12px 16px",background:"#FAFBFC",borderBottom:"1px solid rgba(0, 0, 0, 0.06)",borderRadius:"12px 12px 0 0"},children:[t.jsx("div",{style:{marginBottom:"12px",display:"flex",alignItems:"center",justifyContent:"space-between"},children:t.jsxs("button",{onClick:()=>{C.size>0&&Ie(!0)},disabled:C.size===0,style:{padding:"6px 12px",background:C.size>0?"linear-gradient(135deg, #667EEA 0%, #764BA2 100%)":"#F1F3F5",color:C.size>0?"#FFFFFF":"#868E96",border:"none",borderRadius:"8px",fontSize:"12px",fontWeight:500,fontFamily:'-apple-system, BlinkMacSystemFont, "Inter", "Segoe UI", sans-serif',cursor:C.size>0?"pointer":"not-allowed",transition:"all 0.2s cubic-bezier(0.4, 0, 0.2, 1)",display:"flex",alignItems:"center",gap:"6px",boxShadow:C.size>0?"0 2px 8px rgba(102, 126, 234, 0.25), 0 1px 2px rgba(0, 0, 0, 0.1)":"none",letterSpacing:"-0.01em"},onMouseEnter:e=>{C.size>0&&(e.currentTarget.style.transform="translateY(-1px)",e.currentTarget.style.boxShadow="0 4px 12px rgba(102, 126, 234, 0.35), 0 2px 4px rgba(0, 0, 0, 0.1)")},onMouseLeave:e=>{C.size>0&&(e.currentTarget.style.transform="translateY(0)",e.currentTarget.style.boxShadow="0 2px 8px rgba(102, 126, 234, 0.25), 0 1px 2px rgba(0, 0, 0, 0.1)")},children:[t.jsxs("svg",{width:"12",height:"12",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[t.jsx("rect",{x:"1",y:"1",width:"14",height:"14",rx:"2",stroke:"currentColor",strokeWidth:"1.2",fill:"none"}),t.jsx("path",{d:"M8 5V11M5 8H11",stroke:"currentColor",strokeWidth:"1.2",strokeLinecap:"round"})]}),t.jsxs("span",{children:["Create Clip ",C.size>0&&`(${C.size})`]})]})}),t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(180px, 1fr))",gap:"10px",marginBottom:"12px"},children:[t.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"4px",gridColumn:"1 / -1"},children:[t.jsx("label",{style:{fontSize:"10px",fontWeight:600,color:"#495057",textTransform:"uppercase",letterSpacing:"0.5px",fontFamily:'-apple-system, BlinkMacSystemFont, "Inter", "Segoe UI", sans-serif',marginBottom:"2px"},children:"Search"}),t.jsx("input",{type:"text",placeholder:"Search orders, customers, phone numbers, addresses...",value:Z,onChange:e=>ze(e.target.value),style:{padding:"6px 10px",border:"1px solid rgba(0, 0, 0, 0.08)",borderRadius:"8px",fontSize:"12px",background:"#FFFFFF",color:"#212529",fontFamily:'-apple-system, BlinkMacSystemFont, "Inter", "Segoe UI", sans-serif',fontWeight:400,outline:"none",transition:"all 0.2s ease",boxShadow:"0 1px 2px rgba(0, 0, 0, 0.04)"},onFocus:e=>{e.currentTarget.style.borderColor="#667EEA",e.currentTarget.style.boxShadow="0 0 0 3px rgba(102, 126, 234, 0.1), 0 1px 2px rgba(0, 0, 0, 0.04)"},onBlur:e=>{e.currentTarget.style.borderColor="rgba(0, 0, 0, 0.08)",e.currentTarget.style.boxShadow="0 1px 2px rgba(0, 0, 0, 0.04)"}})]}),t.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"4px"},children:[t.jsx("label",{style:{fontSize:"10px",fontWeight:600,color:"#495057",textTransform:"uppercase",letterSpacing:"0.5px",fontFamily:'-apple-system, BlinkMacSystemFont, "Inter", "Segoe UI", sans-serif',marginBottom:"2px"},children:"Date Range"}),t.jsxs("select",{value:ht,onChange:e=>{const s=e.target.value;mt(s);const r=new Date,n=5.5*60*60*1e3,i=new Date(r.getTime()+n);let d,c;if(s==="today")d=c=G();else if(s==="yesterday"){const l=new Date(i);l.setDate(l.getDate()-1),d=c=`${l.getUTCFullYear()}-${String(l.getUTCMonth()+1).padStart(2,"0")}-${String(l.getUTCDate()).padStart(2,"0")}`}else if(s==="last7days"){const l=new Date(i);l.setDate(l.getDate()-7),d=`${l.getUTCFullYear()}-${String(l.getUTCMonth()+1).padStart(2,"0")}-${String(l.getUTCDate()).padStart(2,"0")}`,c=G()}else if(s==="last30days"){const l=new Date(i);l.setDate(l.getDate()-30),d=`${l.getUTCFullYear()}-${String(l.getUTCMonth()+1).padStart(2,"0")}-${String(l.getUTCDate()).padStart(2,"0")}`,c=G()}d&&c&&(_(d),Y(c))},style:{padding:"6px 10px",border:"1px solid rgba(0, 0, 0, 0.08)",borderRadius:"8px",fontSize:"12px",background:"#FFFFFF",cursor:"pointer",color:"#212529",fontFamily:'-apple-system, BlinkMacSystemFont, "Inter", "Segoe UI", sans-serif',fontWeight:400,outline:"none",transition:"all 0.2s ease",boxShadow:"0 1px 2px rgba(0, 0, 0, 0.04)"},onFocus:e=>{e.currentTarget.style.borderColor="#667EEA",e.currentTarget.style.boxShadow="0 0 0 3px rgba(102, 126, 234, 0.1), 0 1px 2px rgba(0, 0, 0, 0.04)"},onBlur:e=>{e.currentTarget.style.borderColor="rgba(0, 0, 0, 0.08)",e.currentTarget.style.boxShadow="0 1px 2px rgba(0, 0, 0, 0.04)"},children:[t.jsx("option",{value:"today",children:"Today"}),t.jsx("option",{value:"yesterday",children:"Yesterday"}),t.jsx("option",{value:"last7days",children:"Last 7 days"}),t.jsx("option",{value:"last30days",children:"Last 30 days"}),t.jsx("option",{value:"custom",children:"Custom range"})]}),ht==="custom"&&t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",marginTop:"4px"},children:[t.jsx("input",{type:"date",value:m,onChange:e=>_(e.target.value),style:{padding:"6px 10px",border:"1px solid rgba(0, 0, 0, 0.08)",borderRadius:"8px",fontSize:"12px",background:"#FFFFFF",color:"#212529",fontFamily:'-apple-system, BlinkMacSystemFont, "Inter", "Segoe UI", sans-serif',fontWeight:400,outline:"none",transition:"all 0.2s ease",boxShadow:"0 1px 2px rgba(0, 0, 0, 0.04)",flex:1},onFocus:e=>{e.currentTarget.style.borderColor="#667EEA",e.currentTarget.style.boxShadow="0 0 0 3px rgba(102, 126, 234, 0.1), 0 1px 2px rgba(0, 0, 0, 0.04)"},onBlur:e=>{e.currentTarget.style.borderColor="rgba(0, 0, 0, 0.08)",e.currentTarget.style.boxShadow="0 1px 2px rgba(0, 0, 0, 0.04)"}}),t.jsx("span",{style:{fontSize:"11px",color:"#868E96",fontFamily:'-apple-system, BlinkMacSystemFont, "Inter", "Segoe UI", sans-serif',fontWeight:500},children:"to"}),t.jsx("input",{type:"date",value:b,onChange:e=>Y(e.target.value),style:{padding:"6px 10px",border:"1px solid rgba(0, 0, 0, 0.08)",borderRadius:"8px",fontSize:"12px",background:"#FFFFFF",color:"#212529",fontFamily:'-apple-system, BlinkMacSystemFont, "Inter", "Segoe UI", sans-serif',fontWeight:400,outline:"none",transition:"all 0.2s ease",boxShadow:"0 1px 2px rgba(0, 0, 0, 0.04)",flex:1},onFocus:e=>{e.currentTarget.style.borderColor="#667EEA",e.currentTarget.style.boxShadow="0 0 0 3px rgba(102, 126, 234, 0.1), 0 1px 2px rgba(0, 0, 0, 0.04)"},onBlur:e=>{e.currentTarget.style.borderColor="rgba(0, 0, 0, 0.08)",e.currentTarget.style.boxShadow="0 1px 2px rgba(0, 0, 0, 0.04)"}})]})]}),t.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"4px"},children:[t.jsx("label",{style:{fontSize:"10px",fontWeight:600,color:"#495057",textTransform:"uppercase",letterSpacing:"0.5px",fontFamily:'-apple-system, BlinkMacSystemFont, "Inter", "Segoe UI", sans-serif',marginBottom:"2px"},children:"Calling Status"}),t.jsxs("select",{value:pe,onChange:e=>yt(e.target.value),style:{padding:"6px 10px",border:"1px solid rgba(0, 0, 0, 0.08)",borderRadius:"8px",fontSize:"12px",background:"#FFFFFF",cursor:"pointer",color:"#212529",fontFamily:'-apple-system, BlinkMacSystemFont, "Inter", "Segoe UI", sans-serif',fontWeight:400,outline:"none",transition:"all 0.2s ease",boxShadow:"0 1px 2px rgba(0, 0, 0, 0.04)"},onFocus:e=>{e.currentTarget.style.borderColor="#667EEA",e.currentTarget.style.boxShadow="0 0 0 3px rgba(102, 126, 234, 0.1), 0 1px 2px rgba(0, 0, 0, 0.04)"},onBlur:e=>{e.currentTarget.style.borderColor="rgba(0, 0, 0, 0.08)",e.currentTarget.style.boxShadow="0 1px 2px rgba(0, 0, 0, 0.04)"},children:[t.jsx("option",{value:"all",children:"All Status"}),t.jsx("option",{value:"called",children:"Called"}),t.jsx("option",{value:"not_called",children:"Not Called"})]})]}),t.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"4px"},children:[t.jsx("label",{style:{fontSize:"10px",fontWeight:600,color:"#495057",textTransform:"uppercase",letterSpacing:"0.5px",fontFamily:'-apple-system, BlinkMacSystemFont, "Inter", "Segoe UI", sans-serif',marginBottom:"2px"},children:"Tags"}),t.jsx("input",{type:"text",placeholder:"Filter by tags...",value:ce,onChange:e=>ft(e.target.value),style:{padding:"6px 10px",border:"1px solid rgba(0, 0, 0, 0.08)",borderRadius:"8px",fontSize:"12px",background:"#FFFFFF",color:"#212529",fontFamily:'-apple-system, BlinkMacSystemFont, "Inter", "Segoe UI", sans-serif',fontWeight:400,outline:"none",transition:"all 0.2s ease",boxShadow:"0 1px 2px rgba(0, 0, 0, 0.04)"},onFocus:e=>{e.currentTarget.style.borderColor="#667EEA",e.currentTarget.style.boxShadow="0 0 0 3px rgba(102, 126, 234, 0.1), 0 1px 2px rgba(0, 0, 0, 0.04)"},onBlur:e=>{e.currentTarget.style.borderColor="rgba(0, 0, 0, 0.08)",e.currentTarget.style.boxShadow="0 1px 2px rgba(0, 0, 0, 0.04)"}})]}),t.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"4px"},children:[t.jsx("label",{style:{fontSize:"10px",fontWeight:600,color:"#495057",textTransform:"uppercase",letterSpacing:"0.5px",fontFamily:'-apple-system, BlinkMacSystemFont, "Inter", "Segoe UI", sans-serif',marginBottom:"2px"},children:"Payment Type"}),t.jsxs("select",{value:de,onChange:e=>xt(e.target.value),style:{padding:"6px 10px",border:"1px solid rgba(0, 0, 0, 0.08)",borderRadius:"8px",fontSize:"12px",background:"#FFFFFF",cursor:"pointer",color:"#212529",fontFamily:'-apple-system, BlinkMacSystemFont, "Inter", "Segoe UI", sans-serif',fontWeight:400,outline:"none",transition:"all 0.2s ease",boxShadow:"0 1px 2px rgba(0, 0, 0, 0.04)"},onFocus:e=>{e.currentTarget.style.borderColor="#667EEA",e.currentTarget.style.boxShadow="0 0 0 3px rgba(102, 126, 234, 0.1), 0 1px 2px rgba(0, 0, 0, 0.04)"},onBlur:e=>{e.currentTarget.style.borderColor="rgba(0, 0, 0, 0.08)",e.currentTarget.style.boxShadow="0 1px 2px rgba(0, 0, 0, 0.04)"},children:[t.jsx("option",{value:"all",children:"All Payment"}),t.jsx("option",{value:"cod",children:"COD"}),t.jsx("option",{value:"prepaid",children:"Prepaid"})]})]}),t.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"4px"},children:[t.jsx("label",{style:{fontSize:"10px",fontWeight:600,color:"#495057",textTransform:"uppercase",letterSpacing:"0.5px",fontFamily:'-apple-system, BlinkMacSystemFont, "Inter", "Segoe UI", sans-serif',marginBottom:"2px"},children:"Fulfillment"}),t.jsxs("select",{value:ee,onChange:e=>ct(e.target.value),style:{padding:"6px 10px",border:"1px solid rgba(0, 0, 0, 0.08)",borderRadius:"8px",fontSize:"12px",background:"#FFFFFF",cursor:"pointer",color:"#212529",fontFamily:'-apple-system, BlinkMacSystemFont, "Inter", "Segoe UI", sans-serif',fontWeight:400,outline:"none",transition:"all 0.2s ease",boxShadow:"0 1px 2px rgba(0, 0, 0, 0.04)"},onFocus:e=>{e.currentTarget.style.borderColor="#667EEA",e.currentTarget.style.boxShadow="0 0 0 3px rgba(102, 126, 234, 0.1), 0 1px 2px rgba(0, 0, 0, 0.04)"},onBlur:e=>{e.currentTarget.style.borderColor="rgba(0, 0, 0, 0.08)",e.currentTarget.style.boxShadow="0 1px 2px rgba(0, 0, 0, 0.04)"},children:[t.jsx("option",{value:"all",children:"All Status"}),t.jsx("option",{value:"fulfilled",children:"Fulfilled"}),t.jsx("option",{value:"unfulfilled",children:"Unfulfilled"}),t.jsx("option",{value:"partial",children:"Partial"})]})]})]}),t.jsx("div",{style:{display:"flex",justifyContent:"flex-end",marginTop:"4px"},children:t.jsx("button",{onClick:()=>{_(G()),Y(G()),mt("custom"),ze(""),yt("all"),ft(""),xt("all"),ct("all")},style:{padding:"6px 12px",border:"1px solid rgba(0, 0, 0, 0.1)",borderRadius:"8px",fontSize:"12px",background:"#FFFFFF",cursor:"pointer",color:"#495057",fontWeight:500,fontFamily:'-apple-system, BlinkMacSystemFont, "Inter", "Segoe UI", sans-serif',transition:"all 0.2s ease",boxShadow:"0 1px 2px rgba(0, 0, 0, 0.04)",letterSpacing:"-0.01em"},onMouseEnter:e=>{e.currentTarget.style.background="#F8F9FA",e.currentTarget.style.borderColor="rgba(0, 0, 0, 0.15)",e.currentTarget.style.transform="translateY(-1px)",e.currentTarget.style.boxShadow="0 2px 4px rgba(0, 0, 0, 0.08)"},onMouseLeave:e=>{e.currentTarget.style.background="#FFFFFF",e.currentTarget.style.borderColor="rgba(0, 0, 0, 0.1)",e.currentTarget.style.transform="translateY(0)",e.currentTarget.style.boxShadow="0 1px 2px rgba(0, 0, 0, 0.04)"},children:"Clear Filters"})})]}),t.jsxs("div",{style:{padding:"20px",borderBottom:"1px solid #E5E7EB",background:"#F9FAFB"},children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px"},children:[t.jsx("h3",{style:{fontSize:"18px",fontWeight:600,color:"#1F2937",fontFamily:"Manrope, sans-serif"},children:"Auto Call Settings"}),t.jsxs("button",{onClick:()=>Es(!rt),style:{padding:"6px 12px",background:"#5167D3",color:"#ffffff",border:"none",borderRadius:"6px",fontSize:"13px",fontWeight:500,fontFamily:"Manrope, sans-serif",cursor:"pointer",display:"none",alignItems:"center",gap:"6px"},children:[t.jsx("img",{src:"/images/Raycons Icons Pack (Community)/setting-8532400.svg",alt:"Settings",width:"16",height:"16"}),rt?"Hide":"Show"," Settings"]})]}),rt&&t.jsxs("div",{children:[t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(300px, 1fr))",gap:"16px"},children:[t.jsx("div",{style:{background:"white",padding:"16px",borderRadius:"8px",border:"1px solid #E5E7EB"},children:t.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"12px",fontSize:"14px",fontWeight:500,color:"#374151",fontFamily:"Manrope, sans-serif",cursor:"pointer"},children:[t.jsx("input",{type:"checkbox",checked:f.enabled,onChange:e=>P({...f,enabled:e.target.checked}),style:{width:"18px",height:"18px"}}),"Enable Auto Call"]})}),t.jsx("div",{style:{background:"white",padding:"16px",borderRadius:"8px",border:"1px solid #E5E7EB"},children:t.jsxs("div",{style:{marginBottom:"8px"},children:[t.jsx("label",{style:{fontSize:"13px",fontWeight:500,color:"#374151",fontFamily:"Manrope, sans-serif",display:"block",marginBottom:"4px"},children:"Script"}),t.jsxs("select",{value:f.scriptId||"",onChange:e=>P({...f,scriptId:e.target.value?parseInt(e.target.value):null}),style:{width:"100%",padding:"8px 12px",border:"1px solid #D1D5DB",borderRadius:"6px",fontSize:"14px",background:"white",cursor:"pointer"},children:[t.jsx("option",{value:"",children:"-- Choose a script --"}),Ns.map(e=>t.jsx("option",{value:e.id,children:e.name},e.id))]})]})}),t.jsxs("div",{style:{background:"white",padding:"16px",borderRadius:"8px",border:"1px solid #E5E7EB"},children:[t.jsxs("div",{style:{marginBottom:"12px"},children:[t.jsx("label",{style:{fontSize:"13px",fontWeight:500,color:"#374151",fontFamily:"Manrope, sans-serif",display:"block",marginBottom:"4px"},children:"Calling Window"}),t.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center"},children:[t.jsx("input",{type:"time",value:f.allowedTimeStart||"09:00",onChange:e=>P({...f,allowedTimeStart:e.target.value}),style:{padding:"6px 10px",border:"1px solid #D1D5DB",borderRadius:"6px",fontSize:"14px",background:"white"}}),t.jsx("span",{children:"to"}),t.jsx("input",{type:"time",value:f.allowedTimeEnd||"18:00",onChange:e=>P({...f,allowedTimeEnd:e.target.value}),style:{padding:"6px 10px",border:"1px solid #D1D5DB",borderRadius:"6px",fontSize:"14px",background:"white"}})]})]}),t.jsxs("div",{children:[t.jsx("label",{style:{fontSize:"13px",fontWeight:500,color:"#374151",fontFamily:"Manrope, sans-serif",display:"block",marginBottom:"4px"},children:"Timezone"}),t.jsxs("select",{value:f.timezone||"Asia/Kolkata",onChange:e=>P({...f,timezone:e.target.value}),style:{width:"100%",padding:"8px 12px",border:"1px solid #D1D5DB",borderRadius:"6px",fontSize:"14px",background:"white",cursor:"pointer"},children:[t.jsx("option",{value:"Asia/Kolkata",children:"Asia/Kolkata (IST)"}),t.jsx("option",{value:"Asia/Dubai",children:"Asia/Dubai (GST)"}),t.jsx("option",{value:"Asia/Singapore",children:"Asia/Singapore (SGT)"}),t.jsx("option",{value:"America/New_York",children:"America/New_York (EST)"}),t.jsx("option",{value:"Europe/London",children:"Europe/London (GMT)"}),t.jsx("option",{value:"UTC",children:"UTC"})]})]})]}),t.jsxs("div",{style:{background:"white",padding:"16px",borderRadius:"8px",border:"1px solid #E5E7EB"},children:[t.jsx("label",{style:{fontSize:"13px",fontWeight:500,color:"#374151",fontFamily:"Manrope, sans-serif",display:"block",marginBottom:"8px"},children:"Allowed Days"}),t.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"8px"},children:["0","1","2","3","4","5","6"].map(e=>t.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"6px",fontSize:"13px",color:"#374151",fontFamily:"Manrope, sans-serif",cursor:"pointer"},children:[t.jsx("input",{type:"checkbox",checked:(f.allowedDays||"").split(",").includes(e),onChange:s=>{const r=(f.allowedDays||"").split(",").filter(n=>n!==e);P({...f,allowedDays:s.target.checked?[...r,e].join(","):r.join(",")})},style:{width:"16px",height:"16px"}}),e==="0"?"Sun":e==="1"?"Mon":e==="2"?"Tue":e==="3"?"Wed":e==="4"?"Thu":e==="5"?"Fri":"Sat"]},e))})]}),t.jsxs("div",{style:{background:"white",padding:"16px",borderRadius:"8px",border:"1px solid #E5E7EB"},children:[t.jsxs("div",{style:{marginBottom:"12px"},children:[t.jsx("label",{style:{fontSize:"13px",fontWeight:500,color:"#374151",fontFamily:"Manrope, sans-serif",display:"block",marginBottom:"4px"},children:"Max Retries"}),t.jsx("input",{type:"number",min:"0",max:"10",value:f.maxRetries||3,onChange:e=>P({...f,maxRetries:parseInt(e.target.value)||3}),style:{width:"100%",padding:"8px 12px",border:"1px solid #D1D5DB",borderRadius:"6px",fontSize:"14px",background:"white"}})]}),t.jsxs("div",{children:[t.jsx("label",{style:{fontSize:"13px",fontWeight:500,color:"#374151",fontFamily:"Manrope, sans-serif",display:"block",marginBottom:"4px"},children:"Retry Interval (minutes)"}),t.jsx("input",{type:"number",min:"1",max:"1440",value:f.retryIntervalMinutes||60,onChange:e=>P({...f,retryIntervalMinutes:parseInt(e.target.value)||60}),style:{width:"100%",padding:"8px 12px",border:"1px solid #D1D5DB",borderRadius:"6px",fontSize:"14px",background:"white"}})]})]}),t.jsxs("div",{style:{background:"white",padding:"16px",borderRadius:"8px",border:"1px solid #E5E7EB"},children:[t.jsx("label",{style:{fontSize:"13px",fontWeight:500,color:"#374151",fontFamily:"Manrope, sans-serif",display:"block",marginBottom:"8px"},children:"Channels (parallel calls)"}),t.jsx("input",{type:"number",min:"1",max:"10",value:f.channels||1,onChange:e=>P({...f,channels:parseInt(e.target.value)||1}),style:{width:"100%",padding:"8px 12px",border:"1px solid #D1D5DB",borderRadius:"6px",fontSize:"14px",background:"white"}})]})]}),t.jsxs("div",{style:{marginTop:"16px",background:"white",padding:"16px",borderRadius:"8px",border:"1px solid #E5E7EB"},children:[t.jsxs("div",{style:{marginBottom:"12px"},children:[t.jsx("label",{style:{fontSize:"13px",fontWeight:500,color:"#374151",fontFamily:"Manrope, sans-serif",display:"block",marginBottom:"8px"},children:"Call Conditions (order statuses to call)"}),t.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"12px"},children:["pending","paid","partially_paid","partially_refunded","refunded","voided"].map(e=>t.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"6px",fontSize:"13px",color:"#374151",fontFamily:"Manrope, sans-serif",cursor:"pointer"},children:[t.jsx("input",{type:"checkbox",checked:(f.callConditions||[]).includes(e),onChange:s=>{const r=f.callConditions||[];s.target.checked?P({...f,callConditions:[...r,e],notCallConditions:(f.notCallConditions||[]).filter(n=>n!==e)}):P({...f,callConditions:r.filter(n=>n!==e)})},style:{width:"16px",height:"16px"}}),e.replace(/_/g," ")]},e))})]}),t.jsxs("div",{children:[t.jsx("label",{style:{fontSize:"13px",fontWeight:500,color:"#374151",fontFamily:"Manrope, sans-serif",display:"block",marginBottom:"8px"},children:"Do Not Call Conditions (order statuses to exclude)"}),t.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"12px"},children:["fulfilled","cancelled","partially_fulfilled","unfulfilled"].map(e=>t.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"6px",fontSize:"13px",color:"#374151",fontFamily:"Manrope, sans-serif",cursor:"pointer"},children:[t.jsx("input",{type:"checkbox",checked:(f.notCallConditions||[]).includes(e),onChange:s=>{const r=f.notCallConditions||[];s.target.checked?P({...f,notCallConditions:[...r,e],callConditions:(f.callConditions||[]).filter(n=>n!==e)}):P({...f,notCallConditions:r.filter(n=>n!==e)})},style:{width:"16px",height:"16px"}}),e.replace(/_/g," ")]},e))})]})]}),t.jsx("div",{style:{marginTop:"16px",display:"flex",gap:"12px"},children:t.jsx("button",{onClick:Rs,style:{padding:"10px 20px",background:"#5167D3",color:"#ffffff",border:"none",borderRadius:"6px",fontSize:"14px",fontWeight:500,fontFamily:"Manrope, sans-serif",cursor:"pointer",display:"flex",alignItems:"center",gap:"6px"},children:"Save Settings"})})]})]}),t.jsx("div",{className:"table-container",style:{flex:1,overflow:"auto"},children:U?t.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"60px 20px",gap:"20px",minHeight:"400px"},children:[t.jsx(dt,{src:"https://lottie.host/d76bbc89-666d-46a0-898b-cc343e4fc5b8/pxRPeuoOie.lottie",loop:!0,autoplay:!0,style:{width:"200px",height:"200px"}}),t.jsx("div",{style:{fontSize:"16px",fontWeight:500,color:"#6B7280",fontFamily:"Manrope, sans-serif"},children:"Loading orders..."})]}):t.jsxs("table",{className:"orders-table",style:{width:"100%",tableLayout:"fixed"},children:[t.jsx("thead",{children:t.jsxs("tr",{children:[t.jsxs("th",{style:{width:A.checkbox||40,minWidth:50,position:"relative",padding:"8px 10px",borderRight:"1px solid #F3F4F6"},children:[t.jsx("input",{type:"checkbox",checked:It,onChange:Os,style:{width:"16px",height:"16px",cursor:"pointer"}}),t.jsx("div",{style:{position:"absolute",right:0,top:0,bottom:0,width:"4px",cursor:"col-resize",backgroundColor:H==="checkbox"?"#5167D3":"transparent",zIndex:10},onMouseDown:e=>{e.preventDefault(),e.stopPropagation(),Ye("checkbox"),Nt(e.clientX),At(A.checkbox||40)},onMouseEnter:e=>{H!=="checkbox"&&(e.currentTarget.style.backgroundColor="#D1D5DB")},onMouseLeave:e=>{H!=="checkbox"&&(e.currentTarget.style.backgroundColor="transparent")}})]}),W("order","Order",!0,"NAME"),W("customer","Customer"),W("flags","Flags"),W("date","Date",!0,"CREATED_AT"),W("total","Total",!0,"TOTAL_PRICE"),W("paymentStatus","Payment status"),W("fulfillmentStatus","Fulfillment status"),W("items","Items"),W("deliveryMethod","Delivery method"),W("tags","Tags"),W("callingStatus","Calling Status")]})}),t.jsx("tbody",{children:z.length>0?z.map(e=>{const s=e.id,r=C.has(s),n=e.name||"N/A",i=Qs(e.createdAt),d=e.tags||[],c=[];e.test&&c.push("Test"),e.cancelledAt&&c.push("Cancelled"),e.closed&&c.push("Closed"),e.confirmed||c.push("Unconfirmed");const l=e.customer,j=l&&(l.displayName||`${l.firstName||""} ${l.lastName||""}`.trim()||l.email)||"N/A";e.channelId||e.sourceName;const D=e.totalPrice&&e.currencyCode?`${e.currencyCode} ${parseFloat(e.totalPrice).toFixed(2)}`:"N/A",g=e.displayFinancialStatus||"N/A",y=g==="Pending"?"COD":g,u=e.displayFulfillmentStatus||"N/A",h=e.lineItems||[],E=h.length>0?`${h.length} item${h.length>1?"s":""}`:"â€”",S=e.fulfillments||[];S.length>0&&S.map(p=>p.status).join(", ");const k=e.shippingLines||[],L=k.length>0?k.map(p=>p.title||p.code).filter(Boolean).join(", "):"â€”",B=re.get(s)||!1,le=B?"Called":"Didn't Called";if(n==="NK/27046"||n.includes("27046")){const p=Array.from(re.keys()).filter(x=>x.includes("7323861877027")||x.includes("27046")||x===s);console.log("[AllOrders Render] ðŸ”´ NK/27046 RENDER:",{orderName:n,orderId:s,orderIdType:typeof s,orderIdLength:s?.length,hasCalls:B,callingStatus:le,mapSize:re.size,mapHasKey:re.has(s),mapValue:re.get(s),allRelevantKeys:p,allRelevantEntries:p.map(x=>({key:x,value:re.get(x)}))})}return t.jsxs("tr",{style:{background:r?"#F9FAFB":"#ffffff",transition:"background-color 0.2s ease",cursor:"pointer"},onClick:p=>{p.target.type==="checkbox"||p.target.tagName==="A"||Ps(e)},onDoubleClick:p=>{if(p.target.type==="checkbox"||p.target.tagName==="A")return;const x=new Set(C);x.has(s)?x.delete(s):x.add(s),se(x),q(!1)},onMouseEnter:p=>{r||(p.currentTarget.style.background="#F9FAFB")},onMouseLeave:p=>{r||(p.currentTarget.style.background="#ffffff")},children:[t.jsx("td",{onClick:p=>p.stopPropagation(),style:{width:A.checkbox||40,minWidth:50},children:t.jsx("input",{type:"checkbox",checked:r,onChange:()=>{const p=new Set(C);p.has(s)?p.delete(s):p.add(s),se(p),q(!1)},style:{width:"16px",height:"16px",cursor:"pointer"}})}),t.jsx("td",{style:{fontWeight:600,width:A.order||120,minWidth:50},children:t.jsx("a",{href:`https://${o}/admin/orders/${e.id?typeof e.id=="string"?e.id.split("/").pop():e.id:""}`,target:"_blank",rel:"noopener noreferrer",onClick:p=>p.stopPropagation(),style:{color:"#008060",textDecoration:"none"},onMouseEnter:p=>p.currentTarget.style.textDecoration="underline",onMouseLeave:p=>p.currentTarget.style.textDecoration="none",children:n})}),t.jsx("td",{style:{width:A.customer||150,minWidth:50},children:j}),t.jsx("td",{style:{width:A.flags||100,minWidth:50},children:c.length>0?t.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"4px"},children:c.map((p,x)=>t.jsx("span",{style:{display:"inline-block",padding:"2px 6px",background:p==="Test"?"#FEF3C7":p==="Cancelled"?"#FEE2E2":"#E5E7EB",color:p==="Test"?"#92400E":p==="Cancelled"?"#991B1B":"#374151",borderRadius:"3px",fontSize:"11px",fontWeight:500},children:p},x))}):t.jsx("span",{style:{color:"#9CA3AF"},children:"â€”"})}),t.jsx("td",{style:{width:A.date||140,minWidth:50},children:i}),t.jsx("td",{style:{width:A.total||100,minWidth:50},children:D}),t.jsx("td",{style:{width:A.paymentStatus||130,minWidth:50},children:t.jsx(je,{status:y==="Paid"?"paid":y==="COD"?"cod":y.toLowerCase(),type:"payment"})}),t.jsx("td",{style:{width:A.fulfillmentStatus||140,minWidth:50},children:t.jsx(je,{status:u.toLowerCase(),type:"fulfillment"})}),t.jsx("td",{style:{width:A.items||80,minWidth:50},children:E}),t.jsx("td",{style:{width:A.deliveryMethod||150,minWidth:50},children:L}),t.jsx("td",{style:{width:A.tags||150,minWidth:50},children:d.length>0?t.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"4px"},children:d.map((p,x)=>t.jsx("span",{style:{display:"inline-block",padding:"2px 8px",background:"#F3F4F6",color:"#374151",borderRadius:"4px",fontSize:"12px",fontWeight:500},children:p},x))}):t.jsx("span",{style:{color:"#9CA3AF"},children:"â€”"})}),t.jsx("td",{style:{width:A.callingStatus||120,minWidth:50},children:t.jsx(je,{status:B?"called":"didn't called",type:"call"})})]},e.id)}):t.jsx("tr",{children:t.jsx("td",{colSpan:"12",className:"empty-state",style:{textAlign:"center",padding:"40px"},children:"No orders found"})})})]})}),(z.length>0||w?.hasNextPage||w?.hasPreviousPage)&&t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",gap:"16px",padding:"16px 20px",borderTop:"1px solid #e5e7eb",flexShrink:0,background:"#F9FAFB"},children:[t.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"4px"},children:[t.jsxs("span",{style:{fontSize:"13px",fontWeight:500,color:"#111827"},children:["Showing ",z.length," ",z.length===1?"order":"orders"]}),(w?.totalCount>0||m||b||ce||pe!=="all"||de!=="all"||ee!=="all")&&t.jsx("span",{style:{fontSize:"12px",color:"#6b7280"},children:w?.totalCount>0?`Total filtered: ${w.totalCount} ${w.totalCount===1?"order":"orders"}`:"Filters applied"})]}),t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[t.jsx("label",{style:{fontSize:"12px",color:"#6b7280",whiteSpace:"nowrap"},children:"Per page:"}),t.jsxs("select",{value:He,onChange:e=>{const s=parseInt(e.target.value);js(s),oe(null,"reset")},style:{padding:"6px 10px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"13px",background:"white",cursor:"pointer",minWidth:"80px"},children:[t.jsx("option",{value:"25",children:"25"}),t.jsx("option",{value:"50",children:"50"}),t.jsx("option",{value:"100",children:"100"}),t.jsx("option",{value:"200",children:"200"})]})]}),(w?.hasNextPage||w?.hasPreviousPage)&&t.jsxs(t.Fragment,{children:[t.jsx("button",{onClick:()=>{const e=Ee.length>1?Ee[Ee.length-2]:null;oe(e,"prev")},disabled:!w.hasPreviousPage||U,style:{padding:"8px 16px",border:"1px solid #d1d5db",borderRadius:"6px",background:w.hasPreviousPage?"white":"#f3f4f6",cursor:w.hasPreviousPage&&!U?"pointer":"not-allowed",fontSize:"14px",fontWeight:500,color:w.hasPreviousPage?"#111827":"#9CA3AF",transition:"all 0.2s ease"},onMouseEnter:e=>{w.hasPreviousPage&&!U&&(e.currentTarget.style.background="#F9FAFB",e.currentTarget.style.borderColor="#9CA3AF")},onMouseLeave:e=>{w.hasPreviousPage&&!U&&(e.currentTarget.style.background="white",e.currentTarget.style.borderColor="#d1d5db")},children:"Previous"}),t.jsxs("span",{style:{fontSize:"14px",color:"#6b7280",minWidth:"80px",textAlign:"center"},children:["Page ",Ae]}),t.jsx("button",{onClick:()=>oe(w.endCursor,"next"),disabled:!w.hasNextPage||U,style:{padding:"8px 16px",border:"1px solid #d1d5db",borderRadius:"6px",background:w.hasNextPage?"white":"#f3f4f6",cursor:w.hasNextPage&&!U?"pointer":"not-allowed",fontSize:"14px",fontWeight:500,color:w.hasNextPage?"#111827":"#9CA3AF",transition:"all 0.2s ease"},onMouseEnter:e=>{w.hasNextPage&&!U&&(e.currentTarget.style.background="#F9FAFB",e.currentTarget.style.borderColor="#9CA3AF")},onMouseLeave:e=>{w.hasNextPage&&!U&&(e.currentTarget.style.background="white",e.currentTarget.style.borderColor="#d1d5db")},children:U?"Loading...":"Next"})]})]})]})]}),cs&&t.jsx("div",{className:"campaigns-modal-overlay",onClick:()=>ue(!1),children:t.jsxs("div",{className:"campaigns-modal-content order-details-modal-wide",onClick:e=>e.stopPropagation(),children:[t.jsxs("div",{className:"campaigns-modal-header",children:[t.jsx("h3",{className:"campaigns-modal-title",children:"Order Details"}),t.jsx("button",{className:"campaigns-modal-close",onClick:()=>ue(!1),children:t.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[t.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),t.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),ps?t.jsx("div",{className:"order-details-loading",children:t.jsx(qs,{size:"medium",text:"Loading order details..."})}):v&&t.jsxs("div",{className:"campaigns-modal-body",children:[t.jsxs("div",{className:"campaigns-info-section",children:[t.jsx("h4",{className:"campaigns-info-section-title",children:"Customer Information"}),t.jsxs("div",{className:"campaigns-info-grid-two-col",children:[t.jsxs("div",{className:"campaigns-info-row",children:[t.jsx("span",{className:"campaigns-info-label",children:"Name"}),t.jsx("span",{className:"campaigns-info-value",children:v.customer?.displayName||`${v.customer?.firstName||""} ${v.customer?.lastName||""}`.trim()||v.customer?.email||"N/A"})]}),t.jsxs("div",{className:"campaigns-info-row",children:[t.jsx("span",{className:"campaigns-info-label",children:"Phone"}),t.jsx("span",{className:"campaigns-info-value",children:v.customer?.phone||"N/A"})]}),t.jsxs("div",{className:"campaigns-info-row",children:[t.jsx("span",{className:"campaigns-info-label",children:"Email"}),t.jsx("span",{className:"campaigns-info-value",children:v.customer?.email||"N/A"})]})]})]}),t.jsx("div",{className:"campaigns-info-divider"}),t.jsxs("div",{className:"campaigns-info-section",children:[t.jsx("h4",{className:"campaigns-info-section-title",children:"Order Information"}),t.jsxs("div",{className:"campaigns-info-grid-two-col",children:[t.jsxs("div",{className:"campaigns-info-row",children:[t.jsx("span",{className:"campaigns-info-label",children:"Order Number"}),t.jsxs("span",{className:"campaigns-info-value",children:["#",v.name||(v.id&&typeof v.id=="string"?v.id.split("/").pop():v.id)||v.orderNumber||"N/A"]})]}),t.jsxs("div",{className:"campaigns-info-row",children:[t.jsx("span",{className:"campaigns-info-label",children:"Amount"}),t.jsx("span",{className:"campaigns-info-value",children:v.totalPrice&&v.currencyCode?`${v.currencyCode} ${parseFloat(v.totalPrice).toFixed(2)}`:"N/A"})]}),t.jsxs("div",{className:"campaigns-info-row",children:[t.jsx("span",{className:"campaigns-info-label",children:"Date"}),t.jsx("span",{className:"campaigns-info-value",children:os(v.createdAt)})]}),t.jsxs("div",{className:"campaigns-info-row",children:[t.jsx("span",{className:"campaigns-info-label",children:"Payment Status"}),t.jsx("span",{className:"campaigns-info-value",children:v.displayFinancialStatus||"N/A"})]}),t.jsxs("div",{className:"campaigns-info-row",children:[t.jsx("span",{className:"campaigns-info-label",children:"Fulfillment Status"}),t.jsx("span",{className:"campaigns-info-value",children:v.displayFulfillmentStatus||"N/A"})]})]})]}),ge.length>0&&t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"campaigns-info-divider"}),t.jsxs("div",{className:"campaigns-info-section",children:[t.jsxs("h4",{className:"campaigns-info-section-title",children:["Call History (",ge.length," ",ge.length===1?"call":"calls",")"]}),t.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:ge.map((e,s)=>t.jsxs("div",{style:{border:"1px solid #e5e7eb",borderRadius:"8px",padding:"16px",background:"#f9fafb"},children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"12px"},children:[t.jsxs("div",{children:[t.jsxs("div",{style:{fontSize:"14px",fontWeight:600,color:"#111827",marginBottom:"4px"},children:["Call #",s+1]}),t.jsxs("div",{style:{fontSize:"12px",color:"#6b7280",display:"flex",gap:"8px",flexWrap:"wrap"},children:[t.jsx("span",{children:os(e.createdAt||e.startedAt)}),t.jsx("span",{children:"â€¢"}),t.jsxs("span",{children:["Duration: ",e.callDuration?e.callDuration+"s":"N/A"]})]})]}),t.jsx("span",{className:"campaigns-status-badge",style:{backgroundColor:"#f3f4f6",color:"#374151",fontSize:"12px"},children:e.callStatus||"Unknown"})]}),t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px 24px",marginTop:"12px"},children:[e.callOutcomeCategory&&t.jsxs("div",{className:"campaigns-info-row",children:[t.jsx("span",{className:"campaigns-info-label",children:"Outcome"}),t.jsx("span",{className:"campaigns-info-value",children:e.callOutcomeCategory})]}),e.callInterestScore&&t.jsxs("div",{className:"campaigns-info-row",children:[t.jsx("span",{className:"campaigns-info-label",children:"Interest Score"}),t.jsx("span",{className:"campaigns-info-value campaigns-info-value-emphasis",children:e.callInterestScore})]}),e.newAddress&&t.jsxs("div",{className:"campaigns-info-row",style:{gridColumn:"1 / -1"},children:[t.jsx("span",{className:"campaigns-info-label",children:"New Address"}),t.jsx("span",{className:"campaigns-info-value",style:{whiteSpace:"pre-wrap",wordBreak:"break-word"},children:e.newAddress})]})]}),e.audioUrl&&e.audioUrl.startsWith("https://")&&t.jsxs("div",{style:{marginTop:"12px",paddingTop:"12px",borderTop:"1px solid #e5e7eb"},children:[t.jsx("span",{className:"campaigns-info-label",style:{display:"block",marginBottom:"8px"},children:"Audio"}),t.jsx("audio",{controls:!0,style:{width:"100%",height:"32px",marginBottom:"8px"},children:t.jsx("source",{src:e.audioUrl,type:"audio/mpeg"})})]}),e.transcript&&t.jsxs("div",{style:{marginTop:"12px",paddingTop:"12px",borderTop:"1px solid #e5e7eb"},children:[t.jsx("span",{className:"campaigns-info-label",style:{display:"block",marginBottom:"12px"},children:"Transcript"}),t.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px",maxHeight:"300px",overflowY:"auto",padding:"8px",background:"#f9fafb",borderRadius:"8px"},children:Gs(e.transcript).map((r,n)=>t.jsx("div",{style:{display:"flex",justifyContent:r.role==="user"?"flex-end":"flex-start",alignItems:"flex-start",gap:"8px"},children:t.jsx("div",{style:{maxWidth:"75%",padding:"10px 14px",borderRadius:"12px",fontSize:"13px",lineHeight:"1.5",wordBreak:"break-word",whiteSpace:"pre-wrap",background:r.role==="user"?"#4B5CFF":"#ffffff",color:r.role==="user"?"#ffffff":"#111827",border:r.role==="agent"?"1px solid #e5e7eb":"none",boxShadow:r.role==="agent"?"0 1px 2px rgba(0,0,0,0.05)":"none"},children:r.content})},n))})]}),e.callSummary&&t.jsxs("div",{style:{marginTop:"12px",paddingTop:"12px",borderTop:"1px solid #e5e7eb"},children:[t.jsx("span",{className:"campaigns-info-label",style:{display:"block",marginBottom:"8px"},children:"Summary"}),t.jsx("div",{style:{padding:"12px",background:"white",borderRadius:"6px",fontSize:"13px",lineHeight:"1.6",color:"#374151",whiteSpace:"pre-wrap",wordBreak:"break-word"},children:e.callSummary})]})]},e.id||s))})]})]}),ge.length===0&&t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"campaigns-info-divider"}),t.jsx("div",{className:"campaigns-info-section",children:t.jsx("div",{style:{textAlign:"center",padding:"40px",color:"#6b7280"},children:t.jsx("p",{style:{margin:0},children:"No calls made for this order yet."})})})]})]}),t.jsx("div",{className:"campaigns-modal-footer",children:t.jsx("button",{className:"campaigns-btn-unified campaigns-btn-primary-unified",onClick:()=>ue(!1),children:"Close"})})]})}),Fs&&t.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:t.jsxs("div",{style:{background:"white",padding:"24px",borderRadius:"8px",width:"90%",maxWidth:"500px",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.1)"},children:[t.jsx("h3",{style:{marginBottom:"16px",fontSize:"20px",fontWeight:600},children:"Create Clip"}),t.jsxs("div",{style:{marginBottom:"16px"},children:[t.jsxs("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",fontWeight:500},children:["Clip Name ",t.jsx("span",{style:{color:"red"},children:"*"})]}),t.jsx("input",{type:"text",value:ae,onChange:e=>Ke(e.target.value),placeholder:"Enter clip name",style:{width:"100%",padding:"8px 12px",border:"1px solid #ddd",borderRadius:"4px",fontSize:"14px"}})]}),t.jsxs("div",{style:{marginBottom:"16px"},children:[t.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",fontWeight:500},children:"Description (Optional)"}),t.jsx("textarea",{value:Mt,onChange:e=>Je(e.target.value),placeholder:"Enter clip description",rows:3,style:{width:"100%",padding:"8px 12px",border:"1px solid #ddd",borderRadius:"4px",fontSize:"14px",resize:"vertical"}})]}),t.jsxs("div",{style:{marginBottom:"16px",fontSize:"14px",color:"#6B7280"},children:["Selected orders: ",M.size+C.size]}),t.jsxs("div",{style:{display:"flex",gap:"8px",justifyContent:"flex-end"},children:[t.jsx("button",{onClick:()=>{Ie(!1),Ke(""),Je("")},className:"btn btn-secondary btn-sm",disabled:Ve,children:"Cancel"}),t.jsx("button",{onClick:ls,className:"btn btn-primary btn-sm",disabled:Ve||!ae.trim(),children:Ve?"Creating...":"Create Clip"})]})]})}),es&&t.jsx("div",{className:"blur-overlay",children:t.jsxs("div",{className:"overlay-content",children:[t.jsx("h2",{children:"Connect Your Shopify Store"}),t.jsx("p",{children:"Connect your store to unlock full dashboard features and view real order data."}),t.jsx("button",{className:"connect-btn",onClick:()=>window.location.href=`/integrations${o?`?shop=${encodeURIComponent(o)}`:""}`,children:"Connect to Shopify"})]})}),us&&t.jsx("div",{style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",background:"rgba(0, 0, 0, 0.5)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e4},onClick:()=>he(!1),children:t.jsxs("div",{style:{background:"white",borderRadius:"12px",padding:"24px",maxWidth:"500px",width:"90%",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.1)"},onClick:e=>e.stopPropagation(),children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},children:[t.jsxs("h3",{style:{fontSize:"20px",fontWeight:600,margin:0},children:["Tag Orders - ",M.size+C.size," Selected"]}),t.jsx("button",{onClick:()=>{he(!1),ye(""),be("")},style:{background:"none",border:"none",fontSize:"24px",cursor:"pointer",color:"#6b7280"},children:"Ã—"})]}),t.jsx("p",{style:{marginBottom:"16px",color:"#6b7280"},children:"Select an existing tag or enter a new one:"}),me.length>0&&t.jsxs("div",{style:{marginBottom:"20px"},children:[t.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",marginBottom:"8px",color:"#111827"},children:"Your Tags"}),t.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"8px"},children:me.map(e=>t.jsx("button",{onClick:()=>{ye(e),be("")},style:{padding:"6px 12px",borderRadius:"6px",border:$===e?"2px solid #4B5CFF":"1px solid #e5e7eb",background:$===e?"#f0f4ff":"#ffffff",color:$===e?"#4B5CFF":"#111827",fontSize:"13px",fontWeight:$===e?"600":"400",cursor:"pointer",transition:"all 0.2s"},children:e},e))})]}),t.jsxs("div",{style:{marginBottom:"20px"},children:[t.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",marginBottom:"8px",color:"#111827"},children:me.length>0?"Or Enter New Tag":"Enter Tag Name"}),t.jsx("input",{type:"text",value:X,onChange:e=>{be(e.target.value),ye("")},placeholder:"Enter tag name...",style:{width:"100%",padding:"10px 12px",border:"1px solid #e5e7eb",borderRadius:"8px",fontSize:"14px"},onKeyPress:e=>{e.key==="Enter"&&(X.trim()||$)&&lt(X.trim()||$)}})]}),t.jsxs("div",{style:{display:"flex",gap:"12px",justifyContent:"flex-end"},children:[t.jsx("button",{onClick:()=>{he(!1),ye(""),be("")},disabled:te,style:{padding:"10px 16px",border:"1px solid #e5e7eb",borderRadius:"8px",background:"white",cursor:te?"not-allowed":"pointer",fontSize:"14px"},children:"Cancel"}),t.jsx("button",{onClick:()=>lt(X.trim()||$),disabled:te||!X.trim()&&!$,style:{padding:"10px 16px",border:"none",borderRadius:"8px",background:te||!X.trim()&&!$?"#d1d5db":"#4B5CFF",color:"white",cursor:te||!X.trim()&&!$?"not-allowed":"pointer",fontSize:"14px",fontWeight:"500"},children:te?"Tagging...":`Tag ${M.size+C.size} Orders`})]})]})})]}):t.jsx("div",{className:"dashboard-container",children:t.jsx("div",{className:"error-message",children:t.jsx("p",{children:"No shop parameter found. Please select a shop."})})})};export{Hr as default};
