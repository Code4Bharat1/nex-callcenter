import{a as v,r as l,j as a}from"./index-B_YWOrie.js";const S=({shop:g})=>{const[x]=v(),i=g||x.get("shop"),[b,j]=l.useState(null),[y,d]=l.useState(!1),[r,f]=l.useState("base"),[n,p]=l.useState(()=>{if(typeof window<"u"){const e=localStorage.getItem("userChannels");return e?parseInt(e):1}return 1}),[c,u]=l.useState(()=>{if(typeof window<"u"){const e=localStorage.getItem("userShiftTime");return e?parseInt(e):8}return 8}),[o,m]=l.useState(()=>{if(typeof window<"u"){const e=localStorage.getItem("userTalkTime");return e?parseInt(e):120}return 120});l.useEffect(()=>{i&&N()},[i]);const N=async()=>{try{d(!0);const s=await(await window.fetch(`/api/billing-data?shop=${encodeURIComponent(i)}`,{credentials:"include"})).json();s.success&&j(s.data);const t=await(await window.fetch(`/api/shop-balance?shop=${encodeURIComponent(i)}`,{credentials:"include"})).json();t.success&&t.data&&t.data.plan&&f(t.data.plan)}catch(e){console.error("Error loading billing data:",e)}finally{d(!1)}};return a.jsx("div",{className:"pricing-page",children:a.jsxs("div",{className:"pricing-container",children:[a.jsxs("div",{className:"pricing-header",children:[a.jsx("h1",{className:"pricing-title",children:"Plan"}),a.jsx("p",{className:"pricing-subtitle",children:"Manage your plan and calculate orders capacity"})]}),a.jsxs("div",{className:"current-plan-section",children:[a.jsx("h2",{className:"current-plan-title",children:"Current Plan"}),a.jsx("div",{className:`plan-banner ${r==="premium"?"premium":"base"}`,children:a.jsxs("div",{className:"plan-banner-content",children:[a.jsxs("div",{className:"plan-banner-text",children:[a.jsx("span",{className:"plan-banner-label",children:r==="premium"?"Premium Plan":"Base Plan"}),a.jsx("span",{className:"plan-banner-description",children:r==="premium"?"Enjoy all premium features and priority support":"Upgrade to Premium for advanced features and priority support"})]}),r==="base"&&a.jsx("button",{className:"plan-upgrade-btn",children:"Upgrade to Premium"})]})})]}),a.jsx("div",{className:"calculate-pricing-section",children:a.jsx("h2",{className:"calculate-pricing-title",children:"Calculate Pricing"})}),a.jsxs("div",{className:"pricing-grid",children:[a.jsxs("div",{className:"pricing-card",children:[a.jsx("h3",{className:"pricing-card-title",children:"Per Second"}),a.jsxs("div",{className:"pricing-card-prices",children:[a.jsxs("div",{className:"pricing-primary-price",children:[a.jsx("span",{className:"pricing-amount",children:"₹0.083"}),a.jsx("span",{className:"pricing-unit",children:"per second"})]}),a.jsxs("div",{className:"pricing-secondary-price",children:[a.jsx("span",{className:"pricing-amount-secondary",children:"₹5.00"}),a.jsx("span",{className:"pricing-unit-secondary",children:"per minute"})]})]}),a.jsx("p",{className:"pricing-card-description",children:"Pay only for the time you use. Charges are calculated per second for precise billing."})]}),a.jsxs("div",{className:"pricing-card",children:[a.jsx("h3",{className:"pricing-card-title",children:"Channel Cost"}),a.jsx("div",{className:"pricing-card-prices",children:a.jsxs("div",{className:"pricing-primary-price",children:[a.jsx("span",{className:"pricing-amount",children:"₹1,500"}),a.jsx("span",{className:"pricing-unit",children:"per channel"})]})}),a.jsx("p",{className:"pricing-card-description",children:"Eg. 5 Channels = Able to initiate 5 calls at the same time."})]})]}),a.jsxs("div",{className:"cost-calculator-section",children:[a.jsxs("div",{className:"cost-calculator-header",children:[a.jsx("div",{className:"cost-calculator-icon",children:a.jsxs("svg",{width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[a.jsx("path",{d:"M9 3H7C5.89543 3 5 3.89543 5 5V7M19 7V5C19 3.89543 18.1046 3 17 3H15",stroke:"#4b5cff",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),a.jsx("path",{d:"M15 21H17C18.1046 21 19 20.1046 19 19V17M5 17V19C5 20.1046 5.89543 21 7 21H9",stroke:"#4b5cff",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),a.jsx("path",{d:"M12 8C12 8 12 10 10 10C8 10 8 8 8 8V6C8 4.89543 8.89543 4 10 4C11.1046 4 12 4.89543 12 6V8Z",fill:"#4b5cff",fillOpacity:"0.3"}),a.jsx("path",{d:"M12 16C12 16 12 14 14 14C16 14 16 16 16 16V18C16 19.1046 15.1046 20 14 20C12.8954 20 12 19.1046 12 18V16Z",fill:"#4b5cff",fillOpacity:"0.3"}),a.jsx("path",{d:"M8 12C8 12 10 12 10 10C10 8 8 8 8 8H6C4.89543 8 4 8.89543 4 10C4 11.1046 4.89543 12 6 12H8Z",fill:"#4b5cff",fillOpacity:"0.3"}),a.jsx("path",{d:"M16 12C16 12 14 12 14 14C14 16 16 16 16 16H18C19.1046 16 20 15.1046 20 14C20 12.8954 19.1046 12 18 12H16Z",fill:"#4b5cff",fillOpacity:"0.3"}),a.jsx("rect",{x:"9",y:"9",width:"6",height:"6",rx:"1",fill:"#4b5cff",fillOpacity:"0.2",stroke:"#4b5cff",strokeWidth:"1.5"})]})}),a.jsxs("div",{className:"cost-calculator-header-text",children:[a.jsx("h3",{className:"cost-calculator-title",children:"Calculate Your Cost"}),a.jsx("p",{className:"cost-calculator-subtitle",children:"Use our calculator to get a transparent breakdown based on your call volume and usage needs."})]})]}),a.jsxs("div",{className:"cost-calculator-content",children:[a.jsxs("div",{className:"cost-calculator-inputs",children:[a.jsxs("div",{className:"cost-calculator-input-group",children:[a.jsx("label",{className:"cost-calculator-label",children:"How many channels?"}),a.jsxs("div",{className:"cost-calculator-input-wrapper",children:[a.jsx("input",{type:"number",min:"1",value:n,onChange:e=>{const s=Math.max(1,parseInt(e.target.value)||1);p(s),localStorage.setItem("userChannels",s.toString())},className:"cost-calculator-input"}),a.jsx("input",{type:"range",min:"1",max:"50",value:n,onChange:e=>{const s=parseInt(e.target.value);p(s),localStorage.setItem("userChannels",s.toString())},className:"cost-calculator-slider"})]})]}),a.jsxs("div",{className:"cost-calculator-input-group",children:[a.jsx("label",{className:"cost-calculator-label",children:"Shift Time (hours per day)"}),a.jsxs("div",{className:"cost-calculator-input-wrapper",children:[a.jsx("input",{type:"number",min:"1",max:"24",value:c,onChange:e=>{const s=Math.max(1,Math.min(24,parseInt(e.target.value)||8));u(s),localStorage.setItem("userShiftTime",s.toString())},className:"cost-calculator-input"}),a.jsx("input",{type:"range",min:"1",max:"24",value:c,onChange:e=>{const s=parseInt(e.target.value);u(s),localStorage.setItem("userShiftTime",s.toString())},className:"cost-calculator-slider"})]})]}),a.jsxs("div",{className:"cost-calculator-input-group",children:[a.jsx("label",{className:"cost-calculator-label",children:"Talk Time (seconds per call)"}),a.jsxs("div",{className:"cost-calculator-input-wrapper",children:[a.jsx("input",{type:"number",min:"1",max:"600",value:o,onChange:e=>{const s=Math.max(1,Math.min(600,parseInt(e.target.value)||120));m(s),localStorage.setItem("userTalkTime",s.toString())},className:"cost-calculator-input"}),a.jsx("input",{type:"range",min:"30",max:"600",step:"15",value:o,onChange:e=>{const s=parseInt(e.target.value);m(s),localStorage.setItem("userTalkTime",s.toString())},className:"cost-calculator-slider"})]}),a.jsx("div",{className:"cost-calculator-hint",children:"45 seconds buffer included automatically"})]})]}),a.jsxs("div",{className:"cost-calculator-display",children:[a.jsx("div",{className:"cost-calculator-display-label",children:"ORDERS/DAY LIMIT"}),a.jsx("div",{className:"cost-calculator-display-value",children:(()=>{const e=o+45,s=c*3600,h=Math.floor(s/e);return(n*h).toLocaleString()})()}),a.jsx("div",{className:"cost-calculator-display-unit",children:"Orders/day"}),a.jsxs("div",{className:"cost-calculator-display-details",children:[n," channel",n!==1?"s":""," × ",c," hour",c!==1?"s":"","/day",a.jsx("br",{}),(o+45).toLocaleString(),"s per call"]})]})]})]}),a.jsx("div",{className:"billing-info-note",children:a.jsxs("div",{className:"billing-info-content",children:[a.jsx("h4",{className:"billing-info-title",children:"Billing Information"}),a.jsxs("p",{className:"billing-info-text",children:["All charges are calculated in real-time based on your usage. You can monitor your spending in the ",a.jsx("span",{className:"billing-info-highlight",children:"Usage"})," page. Invoices are generated monthly and can be downloaded from your account."]})]})})]})})};export{S as default};
