import{a as H,r as l,j as e}from"./index-B_YWOrie.js";const q=({shop:T})=>{const[f]=H();T||f.get("shop");const[c,P]=l.useState("1000"),[m,S]=l.useState("50"),[o,F]=l.useState("60"),[n,O]=l.useState(3),[x,k]=l.useState(60),[d,w]=l.useState("2.5"),[t,j]=l.useState([]);l.useEffect(()=>{M()},[c,m,o,n,d]);const M=()=>{const s=parseFloat(c)||0,a=parseFloat(m)||0,r=parseFloat(o)||0;if(s<=0||a<=0||r<=0||r>100){j([]);return}const $=r>1?r/100:r,y=[];let i=s;for(let p=1;p<=n;p++){const R=Math.round(i*$),E=i;i=i-R,y.push({retry:p,callsConverted:R,callsInitiated:E,pendingCalls:i})}j(y)},I=s=>{const a=parseInt(s.target.value)||1;a>=1&&a<=20&&O(a)},u=n>0?(n-1)*x:0,v=Math.floor(u/60),g=u%60,N=t.reduce((s,a)=>s+a.callsConverted,0),B=t.length>0?t[t.length-1].pendingCalls:0,L=parseFloat(d)||0,h=N*L,b=Math.floor(h/60),C=Math.round(h%60);return e.jsx("div",{className:"time-calculator-page",children:e.jsxs("div",{className:"time-calculator-container",children:[e.jsxs("div",{className:"calculator-header",children:[e.jsx("h1",{className:"calculator-title",children:"Time Calculator"}),e.jsx("p",{className:"calculator-subtitle",children:"Calculate call times and retry schedules based on your parameters"})]}),e.jsxs("div",{className:"calculator-section",children:[e.jsx("h2",{className:"section-title",children:"Parameters"}),e.jsxs("div",{className:"inputs-grid",children:[e.jsxs("div",{className:"input-group",children:[e.jsx("label",{htmlFor:"numberOfCalls",children:"Number of Calls"}),e.jsx("input",{type:"number",id:"numberOfCalls",value:c,onChange:s=>P(s.target.value),placeholder:"1000",min:"1"})]}),e.jsxs("div",{className:"input-group",children:[e.jsx("label",{htmlFor:"channels",children:"Channels (Number of Orders)"}),e.jsx("input",{type:"number",id:"channels",value:m,onChange:s=>S(s.target.value),placeholder:"50",min:"1"})]}),e.jsxs("div",{className:"input-group",children:[e.jsx("label",{htmlFor:"pickupRate",children:"Pickup Rate (%)"}),e.jsx("input",{type:"number",id:"pickupRate",value:o,onChange:s=>F(s.target.value),placeholder:"60",min:"0",max:"100",step:"0.1"})]}),e.jsxs("div",{className:"input-group",children:[e.jsx("label",{htmlFor:"numberOfRetries",children:"Number of Retries"}),e.jsx("input",{type:"number",id:"numberOfRetries",value:n,onChange:I,min:"1",max:"20"})]}),e.jsxs("div",{className:"input-group",children:[e.jsx("label",{htmlFor:"timeBetweenRetries",children:"Time Between Retries (minutes)"}),e.jsx("input",{type:"number",id:"timeBetweenRetries",value:x,onChange:s=>k(parseInt(s.target.value)||60),min:"1"})]}),e.jsxs("div",{className:"input-group",children:[e.jsx("label",{htmlFor:"timePerCall",children:"Time Per Call Talk (minutes)"}),e.jsx("input",{type:"number",id:"timePerCall",value:d,onChange:s=>w(s.target.value),placeholder:"2.5",min:"0",step:"0.1"})]})]})]}),t.length>0&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"calculator-section",style:{marginTop:"24px"},children:[e.jsx("h2",{className:"section-title",children:"Results"}),e.jsx("div",{className:"table-wrapper",children:e.jsxs("table",{className:"results-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Retry #"}),e.jsx("th",{children:"Calls Converted"}),e.jsx("th",{children:"Calls Initiated"})]})}),e.jsxs("tbody",{children:[t.map((s,a)=>e.jsxs("tr",{children:[e.jsx("td",{className:"retry-number",children:s.retry}),e.jsx("td",{className:"converted-value",children:s.callsConverted.toLocaleString()}),e.jsx("td",{children:s.callsInitiated.toLocaleString()})]},a)),e.jsxs("tr",{className:"total-row",children:[e.jsx("td",{className:"total-label",children:"Total"}),e.jsx("td",{className:"total-converted",children:N.toLocaleString()}),e.jsxs("td",{className:"total-pending",children:[e.jsx("span",{className:"pending-text",children:"Pending: "}),e.jsx("span",{className:"pending-number",children:B.toLocaleString()})]})]})]})]})})]}),(d||u>0)&&e.jsx("div",{className:"calculator-section",style:{marginTop:"24px"},children:e.jsxs("div",{className:"summary-bar",style:{marginTop:0,padding:0},children:[e.jsxs("div",{className:"summary-item",children:[e.jsx("span",{className:"summary-label",children:"Total Call Time"}),e.jsxs("span",{className:"summary-value",children:[b>0&&`${b}h `,C>0&&`${C}m`,h===0&&"0m"]})]}),e.jsx("div",{className:"summary-divider"}),e.jsxs("div",{className:"summary-item",children:[e.jsx("span",{className:"summary-label",children:"Total Retry Time"}),e.jsxs("span",{className:"summary-value",children:[v>0&&`${v}h `,g>0&&`${g}m`,u===0&&"0m"]})]})]})})]}),c&&m&&o&&t.length===0&&e.jsx("div",{className:"error-message",children:"Please enter valid values. Pickup rate should be between 0 and 100."})]})})};export{q as default};
