import{a as ot,b as nt,r as a,j as e}from"./index-B_YWOrie.js";import{O as Me}from"./index-LMWlVbK9.js";import{api as ze}from"./api-CYk9FEKy.js";/* empty css                   */const it=({startTime:v="09:00",endTime:u="20:00"})=>{const[C,o]=a.useState(new Date);a.useEffect(()=>{o(new Date);const c=setInterval(()=>o(new Date),6e4);return()=>clearInterval(c)},[]);const N=(C.getHours()*60+C.getMinutes())/1440*100;console.log("ðŸ• TimeWindowBar props:",{startTime:v,endTime:u}),console.log("ðŸ• Current time:",C,`â†’ ${N}% of day`);const i=c=>{const[f,E]=c.split(":").map(Number);return f*60+E},P=i(v),g=i(u),x=P/1440*100,O=g/1440*100,k=O-x,p=c=>{const[f,E]=c.split(":"),b=parseInt(f),I=b>=12?"PM":"AM",m=b%12||12,W=`${m}:${E} ${I}`;return console.log("ðŸ• formatTime:",{input:c,output:W,h:b,ampm:I,displayHour:m}),W},le=[{left:"5%",top:"20%",size:2},{left:"8%",top:"60%",size:1.5},{left:"12%",top:"35%",size:1},{left:"15%",top:"70%",size:2},{left:"3%",top:"50%",size:1.5},{left:"10%",top:"15%",size:1},{left:"85%",top:"25%",size:2},{left:"88%",top:"65%",size:1.5},{left:"92%",top:"40%",size:1},{left:"95%",top:"55%",size:2},{left:"90%",top:"80%",size:1.5},{left:"97%",top:"30%",size:1}];return e.jsxs("div",{style:{width:"100%",marginTop:"4px"},children:[e.jsxs("div",{style:{position:"relative",marginTop:"8px",height:"20px"},children:[e.jsx("div",{style:{position:"absolute",fontSize:"14px",fontWeight:600,color:"#374151",left:`${x}%`,transform:"translateX(-50%)"},children:p(v)}),e.jsx("div",{style:{position:"absolute",fontSize:"14px",fontWeight:600,color:"#374151",left:`${O}%`,transform:"translateX(-50%)"},children:p(u)})]}),e.jsxs("div",{style:{position:"relative",height:"48px",borderRadius:"8px",overflow:"hidden",background:"linear-gradient(to right, #0f172a 0%, #1e3a5a 25%, #fef3c7 50%, #1e3a5a 75%, #0f172a 100%)"},children:[e.jsx("div",{style:{position:"absolute",inset:0,background:"radial-gradient(ellipse 60% 100% at 50% 0%, rgba(251, 191, 36, 0.3) 0%, transparent 70%)"}}),le.map((c,f)=>e.jsx("div",{style:{position:"absolute",background:"white",borderRadius:"50%",left:c.left,top:c.top,width:`${c.size}px`,height:`${c.size}px`,animation:`pulse ${2+Math.random()*2}s ease-in-out infinite`,animationDelay:`${Math.random()*2}s`}},f)),e.jsxs("div",{style:{position:"absolute",left:"50%",transform:"translateX(-50%)",top:"-12px"},children:[e.jsx("div",{style:{position:"absolute",inset:0,borderRadius:"50%",filter:"blur(4px)",background:"rgba(250, 204, 21, 0.6)",width:"24px",height:"24px",top:"-2px",left:"-2px"}}),e.jsx("div",{style:{width:"20px",height:"20px",background:"#FACC15",borderRadius:"50%",boxShadow:"0 0 20px rgba(251, 191, 36, 0.8), 0 0 40px rgba(251, 191, 36, 0.4)"}})]}),e.jsx("div",{style:{position:"absolute",top:0,height:"100%",left:`${x}%`,width:`${k}%`,background:"rgba(255, 255, 255, 0.1)",borderLeft:"1px solid rgba(255, 255, 255, 0.2)",borderRight:"1px solid rgba(255, 255, 255, 0.2)"}}),e.jsx("div",{style:{position:"absolute",top:0,height:"100%",width:"1px",background:"white",boxShadow:"0 0 8px rgba(255, 255, 255, 0.5)",left:`${x}%`}}),e.jsx("div",{style:{position:"absolute",top:0,height:"100%",width:"1px",background:"white",boxShadow:"0 0 8px rgba(255, 255, 255, 0.5)",left:`${O}%`}}),e.jsx("div",{style:{position:"absolute",top:0,height:"100%",width:"2px",background:"#EF4444",left:`${N}%`,boxShadow:"0 0 4px rgba(239, 68, 68, 0.5)",zIndex:10}})]}),e.jsx("style",{children:`
        @keyframes pulse {
          0%, 100% { opacity: 1; }
          50% { opacity: 0.3; }
        }
      `})]})},zt=({shop:v})=>{const[u]=ot(),C=nt(),o=v||u.get("shop"),[d,N]=a.useState(""),[i,P]=a.useState(""),[g,x]=a.useState([]),[O,k]=a.useState({}),[p,le]=a.useState(null),[c,f]=a.useState(new Set),[E,b]=a.useState(!1),[I,m]=a.useState(!1),[W,Ae]=a.useState({totalCount:0,totalPages:0,currentPage:1,hasNext:!1,hasPrev:!1,limit:100}),[Te,lt]=a.useState("order"),[de,dt]=a.useState("asc"),[H,Be]=a.useState(null),[ct,ht]=a.useState(null),[ut,pt]=a.useState({top:0,left:0}),[xt,U]=a.useState(!1),[gt,$e]=a.useState(0),[ft,Fe]=a.useState("100%"),Ie=a.useRef(null),We=a.useRef(null),[V,Y]=a.useState([]),[bt,He]=a.useState({totalCount:0,totalPages:0,currentPage:1,hasNext:!1,hasPrev:!1}),[M,Ue]=a.useState(new Set),[mt,X]=a.useState(!1),[Ve,ce]=a.useState(!1),[y,Z]=a.useState(""),[he,q]=a.useState(""),[J,ue]=a.useState(!1),[_,pe]=a.useState(!1),[Ye,Xe]=a.useState(0),[z,Ze]=a.useState(null);a.useEffect(()=>{_&&!z&&fetch("/images/successful_payment.json").then(t=>t.json()).then(t=>{console.log("[PaymentModal] Animation data loaded"),Ze(t)}).catch(t=>console.error("[PaymentModal] Failed to load:",t))},[_,z]);const[j,qe]=a.useState("stats"),[A,D]=a.useState(!1),[T,R]=a.useState(!1),xe=a.useRef(null),ge=a.useRef(null),G=a.useRef(null),K=a.useRef(null),[yt,jt]=a.useState("days"),[fe,Je]=a.useState(!1),be=a.useRef(null),[St,Q]=a.useState(null),[wt,me]=a.useState(!1),ee={pendingOrders:0,ndrCount:0,codOrdersToday:0,queuedCallsToday:0,todaysOutcomes:{total:0,outcomes:{}},todaysSuccessCriteriaCalls:0,ndrConnected:!1},[l,te]=a.useState(ee),[h,ye]=a.useState(!1),[vt,se]=a.useState([]),[Ct,je]=a.useState(!1),[_e,ae]=a.useState(!0),[Nt,Se]=a.useState(!1),[kt,we]=a.useState(!1),[ve,re]=a.useState(null),[Ce,Ne]=a.useState(!1),B=t=>Number(t||0);B(l.pendingOrders),B(l.ndrCount),B(l.codOrdersToday),B(l.queuedCallsToday);const S=t=>{if(!t)return null;const s=t instanceof Date?t:new Date(t);return Number.isNaN(s.getTime())?null:s.toLocaleDateString("en-US",{month:"short",day:"numeric"})};(()=>{if(d&&i){if(d===i)return S(d);const t=S(d),s=S(i);return t&&s?`${t} - ${s}`:t||s}return S(d||i||new Date)})();const[Dt,$]=a.useState([]),[Rt,ke]=a.useState(!1),De=async()=>{if(o){me(!0);try{const s=await(await fetch(`/api/dashboard-stats-tab?shop=${encodeURIComponent(o)}`,{credentials:"include"})).json();s.success&&s.data?(Q(s.data),console.log("[Dashboard2] Dashboard stats loaded:",s.data)):(console.error("[Dashboard2] Failed to load dashboard stats:",s.error),Q(null))}catch(t){console.error("[Dashboard2] Error loading dashboard stats:",t),Q(null)}finally{me(!1)}}},Re=async()=>{if(o){ye(!0);try{const t=new URLSearchParams({shop:o});d&&t.append("fromDate",d),i&&t.append("toDate",i);const r=await(await fetch(`/api/dashboard-card-metrics?${t.toString()}`,{credentials:"include"})).json();console.log("[Dashboard2] Dashboard card metrics response:",r),r.success&&r.data?(console.log("[Dashboard2] Setting card metrics:",r.data),te(r.data)):(console.warn("[Dashboard2] Failed to load card metrics, using defaults. Response:",r),te(ee))}catch(t){console.error("[Dashboard2] Error loading dashboard card metrics:",t),te(ee)}finally{ye(!1)}}},Ge=async()=>{if(o){je(!0);try{const s=await(await fetch(`/api/clips?shop=${encodeURIComponent(o)}&limit=10`,{credentials:"include"})).json();s.success&&Array.isArray(s.clips)?(se(s.clips),console.log("[Dashboard2] Clippings loaded:",s.clips.length)):(console.error("[Dashboard2] Failed to load clippings:",s.error),se([]))}catch(t){console.error("[Dashboard2] Error loading clippings:",t),se([])}finally{je(!1)}}},Le=async()=>{if(o)try{const t=new URLSearchParams({shop:o});d&&t.append("fromDate",d),i&&t.append("toDate",i);const r=await(await fetch(`/api/new-rto-bucket-orders?${t.toString()}`,{credentials:"include"})).json();r.success?(k(r.stats||{}),console.log("[Dashboard2] RTO stats loaded:",r.stats)):(console.error("[Dashboard2] Failed to load RTO stats:",r.error),k({}))}catch(t){console.error("[Dashboard2] Error loading RTO stats:",t),k({})}},oe=async(t=1)=>{if(o){Se(!0);try{const s=new URLSearchParams({shop:o,page:t.toString(),limit:"100"});d&&s.append("fromDate",d),i&&s.append("toDate",i),p&&s.append("reason",p);const n=await(await fetch(`/api/new-rto-bucket-orders?${s.toString()}`,{credentials:"include"})).json();n.success?(x(n.orders||[]),Ae(n.pagination||{totalCount:n.totalCount||0,totalPages:Math.ceil((n.totalCount||0)/100),currentPage:t,hasNext:!1,hasPrev:!1,limit:100}),console.log("[Dashboard2] New RTO bucket orders loaded:",{count:n.orders?.length||0,totalCount:n.totalCount,filteredBy:p||"none",page:n.pagination?.currentPage||t})):(console.error("[Dashboard2] Failed to load new RTO bucket orders:",n.error),x([]))}catch(s){console.error("[Dashboard2] Error loading new RTO bucket orders:",s),x([])}finally{Se(!1)}}},Ke=async()=>{if(o){ke(!0);try{const t=await ze.getScripts(o);t&&Array.isArray(t.scripts)?$(t.scripts):Array.isArray(t)?$(t):$([])}catch(t){console.error("[Dashboard2] Error loading agents:",t),$([])}finally{ke(!1)}}},Pe=async(t=1)=>{if(o){we(!0);try{const s=new URLSearchParams({shop:o,page:t.toString(),limit:"20"});d&&s.append("fromDate",d),i&&s.append("toDate",i);const n=await(await fetch(`/api/standard-orders?${s.toString()}`,{credentials:"include"})).json();n.success?(Y(n.orders||[]),He(n.pagination||{totalCount:0,totalPages:0,currentPage:1,hasNext:!1,hasPrev:!1})):(console.error("[Dashboard2] Failed to load standard orders:",n.error),Y([]))}catch(s){console.error("[Dashboard2] Error loading standard orders:",s),Y([])}finally{we(!1)}}};a.useEffect(()=>{const t=s=>{xe.current&&!xe.current.contains(s.target)&&D(!1),ge.current&&!ge.current.contains(s.target)&&R(!1),be.current&&!be.current.contains(s.target)&&Je(!1),G.current&&!G.current.contains(s.target)&&D(!1),K.current&&!K.current.contains(s.target)&&R(!1)};return(A||T||fe)&&document.addEventListener("mousedown",t),()=>{document.removeEventListener("mousedown",t)}},[A,T,fe]),a.useEffect(()=>{if(!o){re("No shop parameter found"),ae(!1);return}(async()=>{try{ae(!0),re(null);try{const s=await ze.getShopBalance(o);if(s.success&&s.data){const r=s.data.isTestShop===!0;if(Ne(r),r){C(`/onboarding?shop=${encodeURIComponent(o)}`,{replace:!0});return}}}catch(s){console.error("Error checking shop:",s),Ne(!1)}await Promise.all([De(),Re(),Le(),Ge()]),Promise.all([oe(),Pe(1),Ke()]).catch(s=>console.error("Error loading data:",s))}catch(s){console.error("Error loading dashboard data:",s),re(s.message||"Failed to load dashboard data")}finally{ae(!1)}})()},[o]),a.useEffect(()=>{if(u&&o){const t=u.get("payment"),s=u.get("amount");if(t==="success"&&s){Xe(parseFloat(s)),pe(!0);const r=window.location.pathname+"?shop="+encodeURIComponent(o);window.history.replaceState({},document.title,r)}}},[u,o]);const Qe=()=>{pe(!1)};a.useEffect(()=>{o&&(De(),Re(),Le(),oe(),Pe(1))},[d,i,o]),a.useEffect(()=>{o&&oe()},[p,o]),a.useEffect(()=>{if(g.length===0){b(!1);return}const t=new Set(g.map(r=>r.orderId||r.id)),s=Array.from(t).every(r=>c.has(r));b(s&&t.size>0)},[g,c]),a.useEffect(()=>{if(V.length===0){X(!1);return}const t=new Set(V.map(r=>r.orderId||r.id)),s=Array.from(t).every(r=>M.has(r));X(s&&t.size>0)},[V,M]);const et=async()=>{const t=[...Array.from(c),...Array.from(M)];if(t.length===0){alert("Please select at least one order");return}if(!y||y.trim()===""){alert("Please enter a clip name");return}if(!o){alert("Shop information is missing");return}ue(!0);try{const r=await(await fetch("/api/clips",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({name:y.trim(),description:he.trim()||null,orderIds:t,shop:o})})).json();r.success?(alert(`âœ… Clip "${y.trim()}" created successfully with ${t.length} orders!`),console.log("[Dashboard2] Clip created:",r.clip),Z(""),q(""),ce(!1),f(new Set),Ue(new Set),b(!1),X(!1)):(alert("âŒ Failed to create clip: "+(r.error||"Unknown error")),console.error("[Dashboard2] Failed to create clip:",r.error))}catch(s){console.error("[Dashboard2] Error creating clip:",s),alert("âŒ Error creating clip: "+s.message)}finally{ue(!1)}};a.useEffect(()=>{const t=s=>{H&&!s.target.closest(".action-menu-dropdown")&&!s.target.closest("button.btn-icon")&&Be(null)};return H&&document.addEventListener("mousedown",t),()=>{document.removeEventListener("mousedown",t)}},[H]);const tt=[...p?g.filter(t=>t.newRtoBucketReason===p):g].sort((t,s)=>{let r,n;switch(Te){case"order":r=(t.orderNumber||t.orderId||t.id||"").toString(),n=(s.orderNumber||s.orderId||s.id||"").toString();break;case"date":r=new Date(t.createdAt||0).getTime(),n=new Date(s.createdAt||0).getTime();break;case"customer":r=(t.customerName||"").toString().toLowerCase(),n=(s.customerName||"").toString().toLowerCase();break;case"phone":r=(t.customerPhone||"").toString(),n=(s.customerPhone||"").toString();break;case"address":r=(t.customerAddress||"").toString().toLowerCase(),n=(s.customerAddress||"").toString().toLowerCase();break;case"payment":r=(t.paymentMethod||t.paymentStatus||"COD").toString().toLowerCase(),n=(s.paymentMethod||s.paymentStatus||"COD").toString().toLowerCase();break;case"fulfillment":r=(t.fulfillmentStatus||"unfulfilled").toString().toLowerCase(),n=(s.fulfillmentStatus||"unfulfilled").toString().toLowerCase();break;case"reason":r=(t.newRtoBucketReason||"").toString().toLowerCase(),n=(s.newRtoBucketReason||"").toString().toLowerCase();break;default:return 0}return r<n?de==="asc"?-1:1:r>n?de==="asc"?1:-1:0});return a.useEffect(()=>{if(j==="rto-bucket"){m(!0);const t=setTimeout(()=>{m(!1)},1500);return()=>clearTimeout(t)}else m(!1)},[j]),a.useEffect(()=>{if(j!=="rto-bucket"){U(!1);return}const t=Ie.current,s=We.current;if(!t||!s){U(!1);return}const r=160,n=()=>{if(s){const w=s.getBoundingClientRect(),Ee=parseInt(getComputedStyle(document.documentElement).getPropertyValue("--sidebar-width"))||250;$e(w.left-Ee),Fe(`${w.width}px`)}},L=()=>{if(!t||!s)return;const w=t.getBoundingClientRect(),st=s.getBoundingClientRect().top>r,at=w.top>r,rt=w.top<=r,ie=!st&&rt&&!at;U(F=>ie&&!F?(n(),!0):!ie&&F?!1:(ie&&F&&n(),F))},ne=new IntersectionObserver(w=>{L()},{root:null,rootMargin:`-${r}px 0px 0px 0px`,threshold:[0,.1,.5,1]});ne.observe(t),ne.observe(s);const Oe=()=>{n(),L()};return window.addEventListener("scroll",L,{passive:!0}),window.addEventListener("resize",Oe,{passive:!0}),n(),L(),()=>{ne.disconnect(),window.removeEventListener("scroll",L),window.removeEventListener("resize",Oe)}},[j,tt]),o?_e?e.jsx("div",{className:"dashboard-container",children:e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:"calc(100vh - 200px)",gap:"20px",padding:"40px 20px"},children:[e.jsx(Me,{src:"https://lottie.host/d76bbc89-666d-46a0-898b-cc343e4fc5b8/pxRPeuoOie.lottie",loop:!0,autoplay:!0,style:{width:"300px",height:"300px"}}),e.jsx("div",{style:{fontSize:"18px",fontWeight:500,color:"#6B7280",fontFamily:"Manrope, sans-serif"},children:"Building Dashboard ..."})]})}):e.jsxs("div",{className:`dashboard-container ${Ce?"dashboard-container--blurred":""}`,children:[ve&&e.jsx("div",{className:"error-message",children:e.jsxs("p",{children:["Error: ",ve]})}),_&&e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.6)",zIndex:10002,display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsxs("div",{style:{background:"white",borderRadius:"16px",padding:"32px 40px",textAlign:"center",maxWidth:"400px",width:"90%",boxShadow:"0 20px 60px rgba(0,0,0,0.3)"},children:[z?e.jsx(Me,{animationData:z,loop:!0,autoplay:!0,style:{width:"200px",height:"200px",margin:"0 auto 20px"}}):e.jsx("div",{style:{width:"200px",height:"200px",margin:"0 auto 20px",display:"flex",alignItems:"center",justifyContent:"center"},children:"Loading..."}),e.jsx("h2",{style:{margin:"0 0 8px 0",color:"#10B981",fontSize:"24px",fontWeight:600,fontFamily:"Manrope, sans-serif"},children:"Payment Successful!"}),e.jsxs("p",{style:{margin:"0 0 24px 0",color:"#6B7280",fontSize:"16px",fontFamily:"Manrope, sans-serif"},children:["Payment of â‚¹",Ye," completed successfully"]}),e.jsx("button",{onClick:Qe,style:{padding:"12px 32px",background:"#10B981",color:"white",border:"none",borderRadius:"8px",fontSize:"16px",fontWeight:500,cursor:"pointer",fontFamily:"Manrope, sans-serif"},children:"Continue"})]})}),e.jsxs("div",{className:"dashboard-tabs-container dashboard-tabs-container--sticky",children:[e.jsx("div",{className:"dashboard-tabs",children:e.jsx("button",{className:`dashboard-tab ${j==="stats"?"active":""}`,onClick:()=>qe("stats"),children:"Analytics"})}),e.jsxs("div",{className:"dashboard-actions",children:[e.jsxs("div",{className:"dashboard-create-wrapper",ref:G,children:[e.jsxs("button",{className:"dashboard-create-btn",onClick:()=>D(!A),children:[e.jsx("img",{src:"/images/create.svg",alt:"Create",width:"16",height:"16"}),e.jsx("span",{children:"Create"})]}),A&&e.jsxs("div",{className:"dashboard-create-dropdown",children:[e.jsxs("button",{className:"dashboard-dropdown-item",onClick:()=>D(!1),children:[e.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("rect",{x:"1",y:"1",width:"14",height:"14",rx:"2",stroke:"currentColor",strokeWidth:"1.5",fill:"none"}),e.jsx("path",{d:"M8 5V11M5 8H11",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"})]}),e.jsx("span",{children:"New Clip"})]}),e.jsxs("button",{className:"dashboard-dropdown-item",onClick:()=>D(!1),children:[e.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("rect",{x:"1",y:"1",width:"14",height:"14",rx:"2",stroke:"currentColor",strokeWidth:"1.5",fill:"none"}),e.jsx("path",{d:"M8 5V11M5 8H11",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"})]}),e.jsx("span",{children:"New Campaign"})]})]})]}),e.jsx("button",{className:"dashboard-action-btn",children:e.jsx("img",{src:"/images/sort.svg",alt:"Sort",width:"20",height:"20"})}),e.jsxs("div",{className:"dashboard-filter-wrapper",ref:K,children:[e.jsx("button",{className:"dashboard-action-btn",onClick:()=>R(!T),children:e.jsx("img",{src:"/images/filter.svg",alt:"Filter",width:"20",height:"20"})}),T&&e.jsxs("div",{className:"dashboard-filter-dropdown",children:[e.jsx("div",{className:"dashboard-filter-header",children:"Filter by Date"}),e.jsxs("div",{className:"dashboard-filter-content",children:[e.jsxs("div",{className:"dashboard-filter-field",children:[e.jsx("label",{children:"From"}),e.jsx("input",{type:"date",value:d,onChange:t=>N(t.target.value)})]}),e.jsxs("div",{className:"dashboard-filter-field",children:[e.jsx("label",{children:"To"}),e.jsx("input",{type:"date",value:i,onChange:t=>P(t.target.value)})]})]}),e.jsxs("div",{className:"dashboard-filter-actions",children:[e.jsx("button",{className:"dashboard-filter-btn dashboard-filter-btn--secondary",onClick:()=>{N(""),P(""),R(!1)},children:"Clear"}),e.jsx("button",{className:"dashboard-filter-btn dashboard-filter-btn--primary",onClick:()=>R(!1),children:"Apply"})]})]})]})]})]}),j==="stats"&&e.jsx("div",{className:"dashboard-tab-content",children:e.jsxs("div",{className:"stats-grid",children:[e.jsxs("div",{className:"stat-box stat-box-1x1",style:{background:"linear-gradient(135deg,rgb(255, 255, 255) 0%,rgb(255, 255, 255) 100%)"},children:[e.jsx("div",{className:"stat-box-title",style:{color:"rgba(0, 0, 0, 0.9)"},children:e.jsx("span",{children:"New Orders"})}),e.jsxs("div",{className:"stat-box-content",children:[e.jsx("div",{className:"stat-box-number",style:{color:"rgb(0, 0, 0)"},children:h?"â€”":(l.yesterdayStats?.newOrders||0).toLocaleString()}),e.jsx("div",{className:"stat-box-change",style:{color:"rgb(0, 0, 0)"},children:e.jsx("span",{children:"Yesterday"})})]})]}),e.jsxs("div",{className:"stat-box stat-box-1x1",style:{background:"linear-gradient(135deg,rgb(255, 255, 255) 0%,rgb(255, 255, 255) 100%)"},children:[e.jsx("div",{className:"stat-box-title",style:{color:"rgba(0, 0, 0, 0.9)"},children:e.jsx("span",{children:"Orders Called"})}),e.jsxs("div",{className:"stat-box-content",children:[e.jsx("div",{className:"stat-box-number",style:{color:"rgba(0, 0, 0, 0.9)"},children:h?"â€”":(l.yesterdayStats?.ordersCalled||0).toLocaleString()}),e.jsx("div",{className:"stat-box-change",style:{color:"rgba(0, 0, 0, 0.8)"},children:e.jsx("span",{children:"Yesterday"})})]})]}),e.jsxs("div",{className:"stat-box stat-box-1x1",style:{background:"linear-gradient(135deg,rgb(255, 255, 255) 0%,rgb(255, 255, 255) 100%)"},children:[e.jsx("div",{className:"stat-box-title",style:{color:"rgba(0, 0, 0, 0.9)"},children:e.jsx("span",{children:"Initiated Calls"})}),e.jsxs("div",{className:"stat-box-content",children:[e.jsx("div",{className:"stat-box-number",style:{color:"rgb(0, 0, 0)"},children:h?"â€”":(l.yesterdayStats?.initiatedCalls||0).toLocaleString()}),e.jsx("div",{className:"stat-box-change",style:{color:"rgba(0, 0, 0, 0.8)"},children:e.jsx("span",{children:"Yesterday"})})]})]}),e.jsxs("div",{className:"stat-box stat-box-1x1",style:{background:"linear-gradient(135deg,rgb(255, 255, 255) 0%,rgb(255, 255, 255) 100%)"},children:[e.jsx("div",{className:"stat-box-title",style:{color:"rgba(0, 0, 0, 0.9)"},children:e.jsx("span",{children:"Pick Rate"})}),e.jsxs("div",{className:"stat-box-content",children:[e.jsx("div",{className:"stat-box-number",style:{color:"rgb(0, 0, 0)"},children:h?"â€”":(l.yesterdayStats?.pickRate||"0.00")+"%"}),e.jsx("div",{className:"stat-box-change",style:{color:"rgba(0, 0, 0, 0.8)"},children:e.jsx("span",{children:"By Order â€¢ Yesterday"})})]})]}),e.jsxs("div",{className:"stat-box stat-box-1x1",style:{background:"linear-gradient(135deg,rgb(255, 255, 255) 0%,rgb(255, 255, 255) 100%)"},children:[e.jsxs("div",{className:"stat-box-title",style:{color:"rgb(0, 0, 0)"},children:[e.jsx("span",{children:"Conversion Rate"}),e.jsxs("svg",{width:"30",height:"30",viewBox:"0 0 40 40",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"stat-box-top-icon",children:[e.jsx("rect",{x:"1",y:"1",width:"38",height:"38",rx:"19",stroke:"#ffffff",strokeWidth:"2"}),e.jsx("path",{d:"M14.2983 28.0284L12.4787 26.1989L23.5057 15.152H15.054L15.0739 12.6364H27.8509V25.4233H25.3153L25.3352 16.9716L14.2983 28.0284Z",fill:"#ffffff"})]})]}),e.jsxs("div",{className:"stat-box-content",children:[e.jsx("div",{className:"stat-box-number",style:{color:"rgb(0, 0, 0)"},children:h?"â€”":(l.yesterdayStats?.conversionRate||"0.00")+"%"}),e.jsx("div",{className:"stat-box-change",style:{color:"rgba(0, 0, 0, 0.8)"},children:e.jsx("span",{children:"Yesterday"})})]})]}),e.jsxs("div",{className:"stat-box stat-box-1x1",style:{background:"linear-gradient(135deg,rgb(255, 255, 255) 0%,rgb(255, 255, 255) 100%)"},children:[e.jsxs("div",{className:"stat-box-title",style:{color:"rgb(0, 0, 0)"},children:[e.jsx("span",{children:"Unclear Rate"}),e.jsxs("svg",{width:"30",height:"30",viewBox:"0 0 40 40",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"stat-box-top-icon",children:[e.jsx("rect",{x:"1",y:"1",width:"38",height:"38",rx:"19",stroke:"#ffffff",strokeWidth:"2"}),e.jsx("path",{d:"M14.2983 28.0284L12.4787 26.1989L23.5057 15.152H15.054L15.0739 12.6364H27.8509V25.4233H25.3153L25.3352 16.9716L14.2983 28.0284Z",fill:"#ffffff"})]})]}),e.jsxs("div",{className:"stat-box-content",children:[e.jsx("div",{className:"stat-box-number",style:{color:"rgb(0, 0, 0)"},children:h?"â€”":(l.yesterdayStats?.unclearRate||"0.00")+"%"}),e.jsx("div",{className:"stat-box-change",style:{color:"rgba(0, 0, 0, 0.8)"},children:e.jsx("span",{children:"Yesterday"})})]})]}),e.jsxs("div",{className:"stat-box stat-box-1x1",style:{background:"linear-gradient(135deg,rgb(255, 255, 255) 0%,rgb(255, 255, 255) 100%)"},children:[e.jsxs("div",{className:"stat-box-title",style:{color:"rgb(0, 0, 0)"},children:[e.jsx("span",{children:"Cancel Rate"}),e.jsxs("svg",{width:"30",height:"30",viewBox:"0 0 40 40",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"stat-box-top-icon",children:[e.jsx("rect",{x:"1",y:"1",width:"38",height:"38",rx:"19",stroke:"#ffffff",strokeWidth:"2"}),e.jsx("path",{d:"M14.2983 28.0284L12.4787 26.1989L23.5057 15.152H15.054L15.0739 12.6364H27.8509V25.4233H25.3153L25.3352 16.9716L14.2983 28.0284Z",fill:"#ffffff"})]})]}),e.jsxs("div",{className:"stat-box-content",children:[e.jsx("div",{className:"stat-box-number",style:{color:"rgb(0, 0, 0)"},children:h?"â€”":(l.yesterdayStats?.cancelRate||"0.00")+"%"}),e.jsx("div",{className:"stat-box-change",style:{color:"rgba(0, 0, 0, 0.8)"},children:e.jsx("span",{children:"Yesterday"})})]})]}),e.jsxs("div",{className:"stat-box stat-box-1x1",style:{background:"linear-gradient(135deg,rgb(255, 255, 255) 0%,rgb(255, 255, 255) 100%)"},children:[e.jsx("div",{className:"stat-box-title",style:{color:"rgb(0, 0, 0)"},children:e.jsx("span",{children:"Wallet Balance"})}),e.jsxs("div",{className:"stat-box-content",children:[e.jsx("div",{className:"stat-box-number",style:{color:"rgb(0, 0, 0)"},children:h?"â€”":(l.walletStats?.callsPossible||0).toLocaleString()}),e.jsx("div",{className:"stat-box-change",style:{color:"rgba(0, 0, 0, 0.8)"},children:e.jsx("span",{children:"Calls Available"})})]})]}),e.jsxs("div",{className:"stat-box stat-box-3x1",children:[e.jsx("div",{className:"stat-box-title",children:e.jsx("span",{children:"Calling Window"})}),e.jsx("div",{className:"stat-box-content",style:{paddingTop:"8px"},children:(()=>{const t=l.walletStats?.callingWindow||"09:00 - 20:00",[s,r]=t.split(" - ");return e.jsx(it,{startTime:s,endTime:r})})()})]}),e.jsxs("div",{className:"stat-box stat-box-1x1",style:{background:"linear-gradient(135deg,rgb(255, 255, 255) 0%,rgb(255, 255, 255) 100%)"},children:[e.jsx("div",{className:"stat-box-title",style:{color:"rgb(0, 0, 0)"},children:e.jsx("span",{children:"Remaining Spending Limit"})}),e.jsxs("div",{className:"stat-box-content",children:[e.jsx("div",{className:"stat-box-number",style:{color:"rgb(0, 0, 0)"},children:h?"â€”":`â‚¹${(l.remainingSpendingLimit||0).toLocaleString()}`}),e.jsx("div",{className:"stat-box-change",style:{color:"rgba(0, 0, 0, 0.8)"},children:e.jsx("span",{children:"Balance - Credit Limit"})})]})]}),e.jsxs("div",{className:"stat-box stat-box-1x1",style:{background:"linear-gradient(135deg,rgb(255, 255, 255) 0%,rgb(255, 255, 255) 100%)"},children:[e.jsx("div",{className:"stat-box-title",style:{color:"rgb(0, 0, 0)"},children:e.jsx("span",{children:"Next Scheduled Call"})}),e.jsx("div",{className:"stat-box-content",style:{display:"flex",flexDirection:"column",justifyContent:"center",height:"100%"},children:h?e.jsx("div",{style:{padding:"20px",textAlign:"center",color:"rgba(0, 0, 0, 0.8)"},children:"Loading..."}):l.nextScheduledCall?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"stat-box-number",style:{fontSize:"18px",marginBottom:"6px",color:"rgb(0, 0, 0)"},children:["#",l.nextScheduledCall.orderNumber]}),e.jsx("div",{className:"stat-box-change",style:{fontSize:"12px",color:"rgba(0, 0, 0, 0.8)"},children:l.nextScheduledCall.scheduledTime?new Date(l.nextScheduledCall.scheduledTime).toLocaleString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"TBD"})]}):e.jsx("div",{style:{padding:"20px",textAlign:"center",color:"rgba(0, 0, 0, 0.7)"},children:"No scheduled calls"})})]})]})}),!1,Ve&&e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:e.jsxs("div",{style:{background:"white",padding:"24px",borderRadius:"8px",width:"90%",maxWidth:"500px",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.1)"},children:[e.jsx("h3",{style:{marginBottom:"16px",fontSize:"20px",fontWeight:600},children:"Create Clip"}),e.jsxs("div",{style:{marginBottom:"16px"},children:[e.jsxs("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",fontWeight:500},children:["Clip Name ",e.jsx("span",{style:{color:"red"},children:"*"})]}),e.jsx("input",{type:"text",value:y,onChange:t=>Z(t.target.value),placeholder:"Enter clip name",style:{width:"100%",padding:"8px 12px",border:"1px solid #ddd",borderRadius:"4px",fontSize:"14px"}})]}),e.jsxs("div",{style:{marginBottom:"16px"},children:[e.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",fontWeight:500},children:"Description (Optional)"}),e.jsx("textarea",{value:he,onChange:t=>q(t.target.value),placeholder:"Enter clip description",rows:3,style:{width:"100%",padding:"8px 12px",border:"1px solid #ddd",borderRadius:"4px",fontSize:"14px",resize:"vertical"}})]}),e.jsxs("div",{style:{marginBottom:"16px",fontSize:"14px",color:"#6B7280"},children:["Selected orders: ",c.size+M.size]}),e.jsxs("div",{style:{display:"flex",gap:"8px",justifyContent:"flex-end"},children:[e.jsx("button",{onClick:()=>{ce(!1),Z(""),q("")},className:"btn btn-secondary btn-sm",disabled:J,children:"Cancel"}),e.jsx("button",{onClick:et,className:"btn btn-primary btn-sm",disabled:J||!y.trim(),children:J?"Creating...":"Create Clip"})]})]})}),Ce&&e.jsx("div",{className:"blur-overlay",children:e.jsxs("div",{className:"overlay-content",children:[e.jsx("h2",{children:"Connect Your Shopify Store"}),e.jsx("p",{children:"Connect your store to unlock full dashboard features and view real order data."}),e.jsx("button",{className:"connect-btn",onClick:()=>window.location.href=`/integrations${o?`?shop=${encodeURIComponent(o)}`:""}`,children:"Connect to Shopify"})]})})]}):e.jsx("div",{className:"dashboard-container",children:e.jsx("div",{className:"error-message",children:e.jsx("p",{children:"No shop parameter found. Please select a shop."})})})};export{zt as default};
