import{e as Ys,b as Gs,a as Zs,r as d,j as e}from"./index-B_YWOrie.js";import{api as Xs}from"./api-CYk9FEKy.js";import{L as ea}from"./Loading-BvPCrw-b.js";import{p as sa}from"./transcriptParser-B0Eamk1c.js";/* empty css                        *//* empty css                 */import{A as aa}from"./arrow-left-A5wmUNFT.js";import{S as ta,C as O,a as de,A as pe}from"./settings-aUdtZHSI.js";import{D as na}from"./download-CI06Yj7G.js";import{T as la}from"./table-2-Bxe71p5G.js";import{R as ia,S as ra}from"./search-B91U6_p5.js";import"./index-LMWlVbK9.js";/* empty css                */const Ca=({shop:ns})=>{const{campaignId:E}=Ys(),ls=Gs(),[is]=Zs(),b=ns||is.get("shop"),[y,ae]=d.useState(null),[Q,rs]=d.useState([]),[u,os]=d.useState(null),[C,cs]=d.useState(null),[U,ds]=d.useState(null),[ps,ke]=d.useState(!0),[ms,Ae]=d.useState(!1),[us,Te]=d.useState(!1),[hs,Oe]=d.useState(!1),[J,xs]=d.useState(""),[te,me]=d.useState(new Set),[Ie,ze]=d.useState(!1),[M,gs]=d.useState(""),[P,fs]=d.useState(""),[A,ue]=d.useState(new Set(["all"])),[h,R]=d.useState(new Set(["all"])),[v,ne]=d.useState(new Set(["all"])),[Le,Re]=d.useState(!1),[De,Be]=d.useState(!1),[Ee,Ue]=d.useState(!1),[I,js]=d.useState(null),[z,Me]=d.useState("asc");d.useEffect(()=>{const s=a=>{a.target.closest(".campaign-details-filter-dropdown")||(Re(!1),Be(!1),Ue(!1))};return document.addEventListener("mousedown",s),()=>document.removeEventListener("mousedown",s)},[]);const[ys,le]=d.useState(!1),[Pe,$e]=d.useState([]),[he,bs]=d.useState([]),[xe,ie]=d.useState(!1),[g,Cs]=d.useState(null),[F,Ns]=d.useState([]),[ws,We]=d.useState(!1),[ge,vs]=d.useState(!1),[fe,Ss]=d.useState(!1),[ks,K]=d.useState(!1),[je,Fe]=d.useState([]),[Y,_e]=d.useState([]),[D,G]=d.useState(""),[Z,X]=d.useState(""),[ye,qe]=d.useState(!1),[As,ee]=d.useState(!1),[_,Ts]=d.useState([]),[be,He]=d.useState(!1),[Ve,q]=d.useState([]),[Qe,Je]=d.useState(!1),[Ce,Os]=d.useState(new Set),[S,Is]=d.useState({maxRetries:3,retryIntervalMinutes:60,autoCancelOnMaxRetries:!1,allowedTimeStart:"09:00",allowedTimeEnd:"18:00",timezone:"Asia/Kolkata",allowedDays:[1,2,3,4,5]});d.useEffect(()=>{b&&E&&(Rs(),Ds(),Ls(),zs())},[b,E]);const zs=async()=>{if(b)try{const a=await(await fetch(`/api/user-retry-settings?shop=${encodeURIComponent(b)}`,{credentials:"include"})).json();a.success&&a.settings&&Is({maxRetries:a.settings.maxRetries!==void 0?a.settings.maxRetries:3,retryIntervalMinutes:a.settings.retryIntervalMinutes||60,autoCancelOnMaxRetries:a.settings.autoCancelOnMaxRetries||!1,allowedTimeStart:a.settings.allowedTimeStart||"09:00",allowedTimeEnd:a.settings.allowedTimeEnd||"18:00",timezone:a.settings.timezone||"Asia/Kolkata",allowedDays:a.settings.allowedDays?a.settings.allowedDays.split(",").map(Number):[1,2,3,4,5]})}catch(s){console.error("Error loading default retry settings:",s)}},Ls=async()=>{try{const a=await(await fetch("/api/user-tags",{credentials:"include"})).json();a.success&&a.tags&&_e(a.tags)}catch(s){console.error("Error loading user tags:",s)}},Ke=s=>{Fe(s),K(!0)},Ye=async s=>{if(!s||!s.trim()){alert("Please enter or select a tag");return}try{qe(!0);const t=Q.filter(l=>je.includes(l.orderId||l.id)).map(l=>{const r=l.orderId;return r&&r.startsWith("gid://shopify/Order/")?r:`gid://shopify/Order/${r}`}),i=await(await fetch("/api/tag-orders",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({orderIds:t,tag:s.trim(),shop:b}),credentials:"include"})).json();if(i.success){const l=i.results.filter(m=>m.success).length,r=i.results.filter(m=>!m.success).length;if(alert(`âœ… Tagging completed!

ðŸ“Š Results:
â€¢ Successfully tagged: ${l}
â€¢ Failed: ${r}`),!Y.includes(s.trim()))try{await fetch("/api/user-tags",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({tag:s.trim()}),credentials:"include"}),_e([...Y,s.trim()])}catch(m){console.error("Error saving tag:",m)}K(!1),G(""),X(""),Fe([])}else alert(`âŒ Tagging failed: ${i.error||"Unknown error"}`)}catch(a){console.error("Error tagging orders:",a),alert("Error tagging orders")}finally{qe(!1)}};d.useEffect(()=>(xe?document.body.classList.add("order-details-open"):document.body.classList.remove("order-details-open"),()=>document.body.classList.remove("order-details-open")),[xe]);const Rs=async()=>{try{ke(!0),console.log("[CampaignDetails] Loading campaign data for ID:",E,"shop:",b);const s=await fetch(`/api/csv-upload/${E}?shop=${encodeURIComponent(b)}`,{credentials:"include"});if(!s.ok){if(s.status===404){console.error("[CampaignDetails] Campaign not found with ID:",E),ae(null);return}throw new Error(`HTTP ${s.status}: ${s.statusText}`)}const a=await s.json();if(a.success&&a.data){const t=a.data;console.log("[CampaignDetails] Found upload:",t),ae(t),Promise.all([re(t.id),Es(t.id),Us(t.id)]).catch(n=>{console.error("[CampaignDetails] Error loading data:",n)})}else console.error("[CampaignDetails] Campaign not found with ID:",E),ae(null)}catch(s){console.error("[CampaignDetails] Error loading campaign data:",s),ae(null)}finally{ke(!1)}},Ds=async()=>{try{const s=await Xs.getScripts(b),a=s?.scripts||s||[];bs(a)}catch(s){console.error("Error loading scripts:",s)}},re=async s=>{Ae(!0);try{const t=await(await fetch(`/api/csv-results?csvUploadId=${s}&shop=${encodeURIComponent(b)}`,{credentials:"include"})).json();t.success&&(rs(t.orders||[]),Bs(t.orders))}catch(a){console.error("Error loading orders:",a)}finally{Ae(!1)}},Bs=s=>{const a={};s.forEach(n=>{if(n.script&&n.script.id){const i=n.script.id;a[i]=(a[i]||0)+1}});const t=Object.entries(a).sort((n,i)=>i[1]-n[1])[0]?.[0];if(t){const n=he.find(i=>i.id===parseInt(t))||s.find(i=>i.script&&i.script.id===parseInt(t))?.script;n&&ds(n)}},Es=async s=>{Te(!0);try{const t=await(await fetch(`/api/csv-stats?csvUploadId=${s}&shop=${encodeURIComponent(b)}`,{credentials:"include"})).json();t.success&&os(t.stats)}catch(a){console.error("Error loading stats:",a)}finally{Te(!1)}},Us=async s=>{Oe(!0);try{const t=await(await fetch(`/api/csv-order-stats?csvUploadId=${s}&shop=${encodeURIComponent(b)}`,{credentials:"include"})).json();t.success&&cs(t.stats)}catch(a){console.error("Error loading order stats:",a)}finally{Oe(!1)}},Ms=()=>{if(!u)return null;const s=u.successCriteria||U?.successCriteria||[],a=u.otherCriteria||U?.otherCriteria||[],t=u.successCounts||{},n=u.otherCounts||{},i=u.script?.disableUnder35Retries===!1||U?.disableUnder35Retries===!1,l=Object.values(t).reduce(($,W)=>$+(W||0),0),r=Object.values(n).reduce(($,W)=>$+(W||0),0),m=u.addressChange||0,o=u.cancellationRequest||0,c=u.handleManually||0,p=l+r+m+o+c+(u.under35sMaxRetries||0)+(u.notPickedUpMaxRetries||0)+(u.invalid||0),x=(u.notCalledQueued||0)+(u.under35sQueued||0)+(u.notPickedUpQueued||0),f=l+r+m+o+c+(u.under35sMaxRetries||0)+(u.under35sQueued||0),j=p+(u.under35sQueued||0)+(u.notPickedUpQueued||0),w=j>0?Math.round(l/j*100*10)/10:0;return{successCriteria:s,otherCriteria:a,successCounts:t,otherCounts:n,disableUnder35:i,addressChange:m,cancellationRequest:o,handleManually:c,totalSuccess:l,totalOther:r,totalOrders:u.uploadedOrders||0,completedTotal:p,queuedTotal:x,customerPickedUp:`${f} (${Math.round(f/(p+x)*100)||0}%)`,avgDuration:u.avgDuration||0,conversionRate:u.conversionRate||0,overallConversionRate:`${l}/${j} (${w}%)`,totalConnected:u.totalConnected||0,ordersWithCalls:u.ordersWithCalls||0,ongoing:u.ongoing||0,callNotBooked:u.callNotBooked||0,earlyDisconnectMaxRetries:u.under35sMaxRetries||0,notPickedUpMaxRetries:u.notPickedUpMaxRetries||0,invalid:u.invalid||0,notCalledQueued:u.notCalledQueued||0,earlyDisconnectQueued:u.under35sQueued||0,notPickedUpQueued:u.notPickedUpQueued||0}},Ps=s=>{$e(s),le(!0)},$s=async(s,a)=>{le(!1);try{const n=await(await fetch("/api/set-queue-bulk",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({orderIds:Pe,shop:b,scriptId:s}),credentials:"include"})).json();if(n.success){const i=n.updated||0,l=n.failed?.length||0;alert(`âœ… Bulk AI Call completed!

ðŸ“Š Results:
â€¢ Successfully queued: ${i}
â€¢ Failed: ${l}`),re(y.id)}else alert(`âŒ Bulk AI Call failed: ${n.error||"Unknown error"}`);$e([])}catch(t){console.error("Error in bulk call:",t),alert("Error processing bulk call")}},Ws=async()=>{if(confirm("Are you sure you want to update ALL addresses with new addresses in Shopify? This will change the actual order addresses for all orders that have updated addresses."))try{const s=document.createElement("div");s.style.cssText=`
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        background: white;
        padding: 20px;
        border-radius: 8px;
        box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        z-index: 10000;
      `,s.textContent="Updating addresses in Shopify...",document.body.appendChild(s);const t=await(await fetch("/api/bulk-update-addresses",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({uploadId:y.id,shop:b})})).json();if(s.remove(),t.success){const{updated:n,failed:i,total:l}=t.results;let r=`âœ… Bulk update completed!

`;r+=`ðŸ“Š Results:
`,r+=`â€¢ Total orders processed: ${l}
`,r+=`â€¢ Successfully updated: ${n}
`,r+=`â€¢ Failed: ${i}
`,alert(r),re(y.id)}else alert("âŒ Bulk update failed: "+(t.error||"Unknown error"))}catch(s){console.error("Error in bulk address update:",s),alert("âŒ Error in bulk address update: "+s.message)}},Ne=async s=>{We(!0),ie(!0);try{const t=await(await fetch(`/api/order-details?orderId=${s}&shop=${encodeURIComponent(b)}`,{credentials:"include"})).json();t.success&&(Cs(t.order),Ns(t.calls||[]))}catch(a){console.error("Error loading order details:",a)}finally{We(!1)}},Ge=async()=>{if(!(!y||!y.id)){He(!0);try{const a=await(await fetch(`/api/campaign-outcomes?shop=${encodeURIComponent(b)}&csvUploadId=${y.id}`,{credentials:"include"})).json();a.success&&(Ts(a.outcomes||[]),a.rules&&Array.isArray(a.rules)?q(a.rules):q([]))}catch(s){console.error("Error loading campaign outcomes:",s)}finally{He(!1)}}},Fs=async()=>{if(!(!y||!y.id)){Je(!0);try{const a=await(await fetch(`/api/campaign-rules?shop=${encodeURIComponent(b)}&csvUploadId=${y.id}`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({shop:b,csvUploadId:y.id,rules:Ve})})).json();a.success?(alert("Campaign rules saved successfully"),ee(!1)):alert("Failed to save campaign rules: "+(a.error||"Unknown error"))}catch(s){console.error("Error saving campaign rules:",s),alert("Error saving campaign rules: "+s.message)}finally{Je(!1)}}},_s=s=>{if(!s)return"N/A";try{return new Date(s).toLocaleString("en-IN",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0,timeZone:"Asia/Kolkata"})}catch{return"N/A"}},Ze=async(s,a)=>{if(confirm("Are you sure you want to update the address in Shopify? This will change the actual order address."))try{const n=await(await fetch("/api/update-order-address",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({orderId:s,shop:b,newAddress:a})})).json();n.success?(alert("âœ… Address updated successfully in Shopify!"),g&&Ne(g.orderId||g.id)):alert("âŒ Failed to update address: "+(n.error||"Unknown error"))}catch(t){console.error("[CampaignDetails] Error updating address:",t),alert("âŒ Error updating address: "+t.message)}},Xe=(s,a,t)=>{const n=document.createElement("div");n.className="modal-overlay",n.style.cssText=`
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.5);
      display: flex;
      justify-content: center;
      align-items: center;
      z-index: 10000;
      font-family: Inter, system-ui, -apple-system, sans-serif;
    `;const i=document.createElement("div");i.style.cssText=`
      background: white;
      border-radius: 12px;
      padding: 24px;
      max-width: 620px;
      width: 90%;
      box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
    `,i.innerHTML=`
      <h2 style="margin: 0 0 20px 0; font-size: 20px;">Review New Address</h2>
      <div style="display: grid; gap: 16px;">
        <div>
          <label style="display: block; font-size: 12px; color: #6b7280; margin-bottom: 6px;">Original Address</label>
          <div style="background: #f9fafb; border: 1px solid #e5e7eb; border-radius: 8px; padding: 16px;">${a||"N/A"}</div>
        </div>
        <div>
          <label style="display: block; font-size: 12px; color: #6b7280; margin-bottom: 6px;">New Address</label>
          <textarea id="new-address-input" style="width: 100%; min-height: 120px; border: 1px solid #e5e7eb; border-radius: 8px; padding: 12px; font-size: 14px;">${t||""}</textarea>
        </div>
      </div>
      <div style="display: flex; justify-content: flex-end; gap: 12px; margin-top: 24px;">
        <button id="cancel-edit-address" style="padding: 10px 16px; border: 1px solid #e5e7eb; border-radius: 8px; background: white; cursor: pointer;">Cancel</button>
        <button id="save-edit-address" style="padding: 10px 16px; border: none; border-radius: 8px; background: #4B5CFF; color: white; cursor: pointer;">Save Changes</button>
      </div>
    `,n.appendChild(i),document.body.appendChild(n),n.querySelector("#cancel-edit-address").addEventListener("click",()=>{document.body.removeChild(n)}),n.querySelector("#save-edit-address").addEventListener("click",async()=>{const l=n.querySelector("#new-address-input").value.trim();if(!l){alert("Please enter a new address");return}try{const m=await(await fetch("/api/update-call-address",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({callId:s,newAddress:l})})).json();m.success?(alert("âœ… Address updated successfully!"),g&&Ne(g.orderId||g.id),document.body.removeChild(n)):alert("âŒ Failed to update address: "+(m.error||"Unknown error"))}catch(r){console.error("[CampaignDetails] Error updating call address:",r),alert("âŒ Error updating address: "+r.message)}})},qs=()=>{if(!y)return{label:"Unknown",dotColor:"#9ca3af",badgeBg:"#f3f4f6",badgeColor:"#4b5563"};const s=y.status?.toLowerCase()||"";return y.etaStatus==="completed"||s==="completed"||s==="finished"||y.progress>=100?{isActive:!1,label:"Completed",dotColor:"#fbbf24",badgeBg:"#fef9c3",badgeColor:"#92400e"}:{isActive:!0,label:"Running",dotColor:"#10b981",badgeBg:"#ecfdf5",badgeColor:"#059669"}},B=(s,a=0)=>{if(s==null||s==="")return null;const t=parseFloat(s);if(isNaN(t))return null;const n=1400;return t===0?{filledBars:2,totalBars:5,label:"Not Interested",color:"#fee2e2",barColor:"#ef4444"}:t>=1&&t<5?a<n?{filledBars:3,totalBars:5,label:"Neutral",color:"#fef3c7",barColor:"#f59e0b"}:{filledBars:1,totalBars:5,label:"Angry",color:"#fee2e2",barColor:"#dc2626"}:t>=5&&t<=10?a<n?{filledBars:4,totalBars:5,label:"Interested",color:"#dbeafe",barColor:"#3b82f6"}:{filledBars:5,totalBars:5,label:"Very Happy",color:"#d1fae5",barColor:"#10b981"}:null},es=s=>{if(!s)return"N/A";try{const a=new Date(s),t=a.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),n=a.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0});return`${t} at ${n}`}catch{return"N/A"}},T=s=>{if(!s)return"Pending";const a=s.toLowerCase();return a==="max_retries_reached"||a==="max retries reached"?"Not picked up":a==="queued"?"In queue":a==="completed"?"Picked Up":s.split("_").map(t=>t.charAt(0).toUpperCase()+t.slice(1)).join(" ")},Hs=s=>{const a=s.orderId||s.id;me(t=>{const n=new Set(t);return n.has(a)?n.delete(a):n.add(a),n})},Vs=()=>{const s=as;if(Ie)me(new Set),ze(!1);else{const a=s.map(t=>t.orderId||t.id);me(new Set(a)),ze(!0)}},oe=s=>{I===s?Me(z==="asc"?"desc":"asc"):(js(s),Me("asc"))},L=s=>(s.calls&&s.calls.length>0?s.calls[0]:null)?.callOutcomeCategory||"N/A",ss=s=>s?s.toLowerCase().trim().replace(/[^a-z0-9]/g,""):"",ce=(s,a)=>{if(!s||!a||a.length===0)return null;const t=ss(s);for(const n of a){const i=ss(n);if(t.includes(i)||i.includes(t))return n}return null},we=(s,a=null,t=null)=>{if(!s||s==="N/A")return{text:"N/A",color:null,borderColor:null};const n=t?.script,i=n?.successCriteria||U?.successCriteria||u?.successCriteria||[],l=n?.otherCriteria||U?.otherCriteria||u?.otherCriteria||[],r=s.trim().toLowerCase();if(r.includes("failed")){const c=s.replace(/failed/gi,"not picked"),p=c.trim().toLowerCase();if(p==="unclear")return{text:"unclear",color:"#dbeafe",borderColor:"#3b82f6"};if(p.includes("handle")&&p.includes("manually"))return{text:"Special Request",color:"#f3e8ff",borderColor:"#a855f7"};if(a!==null&&a<35&&(p.includes("early")||p.includes("disconnect")||p.includes("under35")||p.includes("under 35")))return{text:"Early Disconnection",color:"#fef9c3",borderColor:"#eab308"};const x=ce(c,i);if(x)return{text:x,color:"#d1fae5",borderColor:"#10b981"};const f=ce(c,l);return f?{text:f,color:"#fee2e2",borderColor:"#ef4444"}:{text:c,color:null,borderColor:null}}if(r==="unclear")return{text:"unclear",color:"#dbeafe",borderColor:"#3b82f6"};if(r.includes("handle")&&r.includes("manually"))return{text:"Special Request",color:"#f3e8ff",borderColor:"#a855f7"};if(a!==null&&a<35&&(r.includes("early")||r.includes("disconnect")||r.includes("under35")||r.includes("under 35")))return{text:"Early Disconnection",color:"#fef9c3",borderColor:"#eab308"};const m=ce(s,i);if(m)return{text:m,color:"#d1fae5",borderColor:"#10b981"};const o=ce(s,l);return o?{text:o,color:"#fee2e2",borderColor:"#ef4444"}:{text:s,color:null,borderColor:null}},Qs=()=>{const a=[...Q.filter(o=>{if(J.trim()){const c=J.toLowerCase(),p=(o.orderNumber||o.id||"").toString().toLowerCase(),x=(o.customerName||"").toLowerCase(),f=(o.customerPhone||"").toLowerCase(),j=(o.customerAddress||"").toLowerCase();if(!(p.includes(c)||x.includes(c)||f.includes(c)||j.includes(c)))return!1}if(M||P){const c=o.totalCallCount||0,p=M?parseInt(M):0,x=P?parseInt(P):1/0;if(c<p||c>x)return!1}if(!A.has("all")&&A.size>0){const p=T(o.callStatus).toLowerCase();let x=!1;if(A.forEach(f=>{if(f==="all")return;const j=f.toLowerCase().replace(/_/g," ");(p.includes(j)||j.includes(p))&&(x=!0)}),!x)return!1}if(!h.has("all")&&h.size>0){const c=o.calls&&o.calls.length>0?o.calls[0]:null,p=c?.callInterestScore??c?.onehotscore??o.onehotscore??null,x=c?.transcript?c.transcript.length:0,f=B(p,x),j=f?f.label.toLowerCase():"";let w=!1;if(h.has("not_interested")&&j==="not interested"&&(w=!0),h.has("neutral")&&j==="neutral"&&(w=!0),h.has("angry")&&j==="angry"&&(w=!0),h.has("interested")&&j==="interested"&&(w=!0),h.has("very_happy")&&j==="very happy"&&(w=!0),!f&&h.has("blank")&&(w=!0),!w)return!1}if(!v.has("all")&&v.size>0){const c=L(o),p=c?c.toLowerCase():"n/a";let x=!1;if(v.forEach(f=>{(f==="n/a"&&(c==="N/A"||!c)||p.includes(f.toLowerCase()))&&(x=!0)}),!x)return!1}return!0})].sort((o,c)=>{if(!I)return 0;let p,x;switch(I){case"totalCalls":p=o.totalCallCount||0,x=c.totalCallCount||0;break;case"status":p=T(o.callStatus).toLowerCase(),x=T(c.callStatus).toLowerCase();break;case"sentiment":const f=o.calls&&o.calls.length>0?o.calls[0]:null,j=c.calls&&c.calls.length>0?c.calls[0]:null,w=f?.callInterestScore??f?.onehotscore??o.onehotscore??null,$=j?.callInterestScore??j?.onehotscore??c.onehotscore??null,W=f?.transcript?f.transcript.length:0,Se=j?.transcript?j.transcript.length:0,k=B(w,W),V=B($,Se);p=k?k.label.toLowerCase():"zzz",x=V?V.label.toLowerCase():"zzz";break;case"outcome":p=L(o).toLowerCase(),x=L(c).toLowerCase();break;default:return 0}return p<x?z==="asc"?-1:1:p>x?z==="asc"?1:-1:0}),t=["Serial Number","Order Number","Customer Name","Customer Email","Phone","Address","Script","Total Calls","Status","Sentiment","Call Outcome"],n=a.map((o,c)=>{const p=o.calls&&o.calls.length>0?o.calls[0]:null,x=p?.callInterestScore??p?.onehotscore??o.onehotscore??null,f=p?.transcript?p.transcript.length:0,j=B(x,f),w=j?j.label:"N/A",$=L(o),W=p?.callDuration||p?.durationSeconds||null,Se=we($,W,o),k=V=>{if(V==null)return"";const se=String(V);return se.includes(",")||se.includes('"')||se.includes(`
`)?`"${se.replace(/"/g,'""')}"`:se};return[c+1,k(o.orderNumber||o.id),k(o.customerName||"N/A"),k(o.customerEmail||"N/A"),k(o.customerPhone||"N/A"),k(o.customerAddress||"N/A"),k(o.script?.name||"N/A"),k(o.totalCallCount||0),k(T(o.callStatus)),k(w),k(Se.text)].join(",")}),i=[t.join(","),...n].join(`
`),l=new Blob([i],{type:"text/csv;charset=utf-8;"}),r=document.createElement("a"),m=URL.createObjectURL(l);r.setAttribute("href",m),r.setAttribute("download",`campaign_${y.filename||E}_${new Date().toISOString().split("T")[0]}.csv`),r.style.visibility="hidden",document.body.appendChild(r),r.click(),document.body.removeChild(r)};if(ps)return e.jsx("div",{className:"campaign-details-page",children:e.jsx("div",{className:"campaign-details-loading",children:"Loading campaign details..."})});if(!y)return e.jsx("div",{className:"campaign-details-page",children:e.jsx("div",{className:"campaign-details-error",children:"Campaign not found"})});const N=Ms(),ve=qs(),as=Q.filter(s=>{if(J.trim()){const a=J.toLowerCase(),t=(s.orderNumber||s.id||"").toString().toLowerCase(),n=(s.customerName||"").toLowerCase(),i=(s.customerPhone||"").toLowerCase(),l=(s.customerAddress||"").toLowerCase(),r=s.calls&&s.calls.length>0?s.calls[0]:null,m=(r?.summary||r?.callSummary||s.summary||"").toLowerCase();if(!(t.includes(a)||n.includes(a)||i.includes(a)||l.includes(a)||m.includes(a)))return!1}if(M||P){const a=s.totalCallCount||0,t=M?parseInt(M):0,n=P?parseInt(P):1/0;if(a<t||a>n)return!1}if(!A.has("all")&&A.size>0){const t=T(s.callStatus).toLowerCase();let n=!1;if(A.forEach(i=>{if(i==="all")return;const l=i.toLowerCase().replace(/_/g," ");(t.includes(l)||l.includes(t))&&(n=!0)}),!n)return!1}if(!h.has("all")&&h.size>0){const a=s.calls&&s.calls.length>0?s.calls[0]:null,t=a?.callInterestScore??a?.onehotscore??s.onehotscore??null,n=a?.transcript?a.transcript.length:0,i=B(t,n),l=i?i.label.toLowerCase():"";let r=!1;if(h.has("not_interested")&&l==="not interested"&&(r=!0),h.has("neutral")&&l==="neutral"&&(r=!0),h.has("angry")&&l==="angry"&&(r=!0),h.has("interested")&&l==="interested"&&(r=!0),h.has("very_happy")&&l==="very happy"&&(r=!0),!i&&h.has("blank")&&(r=!0),!r)return!1}if(!v.has("all")&&v.size>0){const a=L(s),t=a?a.toLowerCase():"n/a";let n=!1;if(v.forEach(i=>{(i==="n/a"&&(a==="N/A"||!a)||t.includes(i.toLowerCase()))&&(n=!0)}),!n)return!1}return!0}),Js=[...as].sort((s,a)=>{if(!I)return 0;let t,n;switch(I){case"totalCalls":t=s.totalCallCount||0,n=a.totalCallCount||0;break;case"status":t=T(s.callStatus).toLowerCase(),n=T(a.callStatus).toLowerCase();break;case"sentiment":const i=s.calls&&s.calls.length>0?s.calls[0]:null,l=a.calls&&a.calls.length>0?a.calls[0]:null,r=i?.callInterestScore??i?.onehotscore??s.onehotscore??null,m=l?.callInterestScore??l?.onehotscore??a.onehotscore??null,o=i?.transcript?i.transcript.length:0,c=l?.transcript?l.transcript.length:0,p=B(r,o),x=B(m,c);t=p?p.label.toLowerCase():"zzz",n=x?x.label.toLowerCase():"zzz";break;case"outcome":t=L(s).toLowerCase(),n=L(a).toLowerCase();break;default:return 0}return t<n?z==="asc"?-1:1:t>n?z==="asc"?1:-1:0}),H=F.find(s=>s.newAddress),ts=g?.customerAddress&&g.customerAddress!=="N/A",Ks=ts||!!H?.newAddress;return e.jsx("div",{className:"campaign-details-page",children:e.jsxs("div",{className:"campaign-details-container",children:[e.jsxs("div",{className:"campaign-details-header-section",children:[e.jsxs("button",{className:"campaign-details-back-btn",onClick:()=>ls(`/campaigns?shop=${encodeURIComponent(b)}`),children:[e.jsx(aa,{size:14}),e.jsx("span",{children:"Back"})]}),e.jsxs("div",{className:"campaign-details-header-content",children:[e.jsxs("div",{className:"campaign-details-header-main",children:[e.jsx("h1",{className:"campaign-details-title",children:y.filename}),e.jsxs("div",{className:"campaign-details-meta-row",children:[e.jsx("span",{className:"campaign-details-status-badge",style:{backgroundColor:ve.badgeBg,color:ve.badgeColor},children:ve.label}),e.jsx("span",{className:"campaign-details-meta-separator",children:"â€¢"}),e.jsx("span",{className:"campaign-details-meta-text",children:y.shop}),e.jsx("span",{className:"campaign-details-meta-separator",children:"â€¢"}),e.jsx("span",{className:"campaign-details-meta-text",children:es(y.createdAt)})]})]}),e.jsxs("div",{className:"campaign-details-header-actions",children:[e.jsxs("button",{className:"campaigns-btn-unified campaigns-btn-secondary-unified",onClick:async()=>{ee(!0),await Ge()},title:"Campaign Settings",children:[e.jsx(ta,{size:14}),e.jsx("span",{children:"Settings"})]}),e.jsxs("button",{className:"campaigns-btn-unified campaigns-btn-primary-unified",onClick:Qs,title:"Export filtered orders to CSV",children:[e.jsx(na,{size:14}),e.jsx("span",{children:"Export CSV"})]}),e.jsxs("button",{className:"campaigns-btn-unified campaigns-btn-secondary-unified",onClick:()=>re(y.id),children:[e.jsx(la,{size:14}),e.jsx("span",{children:"Table View"})]}),e.jsxs("button",{className:"campaigns-btn-unified campaigns-btn-secondary-unified",onClick:Ws,children:[e.jsx(ia,{size:14}),e.jsx("span",{children:"Bulk Update"})]}),te.size>0&&e.jsxs("button",{className:"campaigns-btn-unified campaigns-btn-secondary-unified",onClick:()=>Ke(Array.from(te)),children:[e.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("path",{d:"M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"}),e.jsx("line",{x1:"7",y1:"7",x2:"7.01",y2:"7"})]}),e.jsxs("span",{children:["Tag (",te.size,")"]})]})]})]})]}),e.jsxs("div",{className:"campaign-details-filters-section",children:[e.jsxs("div",{className:"campaign-details-search-wrapper",children:[e.jsx(ra,{size:14,className:"campaigns-search-icon-unified"}),e.jsx("input",{type:"text",className:"campaigns-input-unified",placeholder:"Search orders...",value:J,onChange:s=>xs(s.target.value)})]}),e.jsxs("div",{className:"campaign-details-filter-inline",children:[e.jsx("span",{className:"campaign-details-filter-label-inline",children:"Total Calls:"}),e.jsxs("div",{className:"campaign-details-range-inputs",children:[e.jsx("input",{type:"number",className:"campaign-details-range-input",placeholder:"Min",value:M,onChange:s=>gs(s.target.value),min:"0"}),e.jsx("span",{className:"campaign-details-range-separator",children:"â€“"}),e.jsx("input",{type:"number",className:"campaign-details-range-input",placeholder:"Max",value:P,onChange:s=>fs(s.target.value),min:"0"})]})]}),e.jsxs("div",{className:"campaign-details-filter-dropdown-wrapper",children:[e.jsx("span",{className:"campaign-details-filter-label-inline",children:"Status:"}),e.jsxs("div",{className:"campaign-details-filter-dropdown",children:[e.jsxs("button",{className:"campaign-details-filter-dropdown-button",onClick:()=>Re(!Le),type:"button",children:[e.jsx("span",{children:A.has("all")?"All":Array.from(A).map(s=>s.replace(/_/g," ").split(" ").map(a=>a.charAt(0).toUpperCase()+a.slice(1)).join(" ")).join(", ")}),e.jsx(O,{size:14})]}),Le&&e.jsxs("div",{className:"campaign-details-filter-dropdown-menu",children:[e.jsxs("label",{className:"campaign-details-filter-dropdown-item",children:[e.jsx("input",{type:"checkbox",checked:A.has("all"),onChange:s=>{s.target.checked?ue(new Set(["all"])):ue(new Set)}}),e.jsx("span",{children:"All"})]}),(()=>{const s=new Set;return Q.forEach(t=>{const n=T(t.callStatus);n&&n!=="N/A"&&s.add(n)}),Array.from(s).sort().map(t=>{const n=t.toLowerCase().replace(/\s+/g,"_");return e.jsxs("label",{className:"campaign-details-filter-dropdown-item",children:[e.jsx("input",{type:"checkbox",checked:A.has(n),onChange:i=>{const l=new Set(A);i.target.checked?(l.delete("all"),l.add(n)):(l.delete(n),l.size===0&&l.add("all")),ue(l)}}),e.jsx("span",{children:t})]},t)})})()]})]})]}),e.jsxs("div",{className:"campaign-details-filter-dropdown-wrapper",children:[e.jsx("span",{className:"campaign-details-filter-label-inline",children:"Sentiment:"}),e.jsxs("div",{className:"campaign-details-filter-dropdown",children:[e.jsxs("button",{className:"campaign-details-filter-dropdown-button",onClick:()=>Be(!De),type:"button",children:[e.jsx("span",{children:h.has("all")?"All":Array.from(h).map(s=>s==="not_interested"?"Not Interested":s==="neutral"?"Neutral":s==="angry"?"Angry":s==="interested"?"Interested":s==="very_happy"?"Very Happy":s==="blank"?"No Score":s.charAt(0).toUpperCase()+s.slice(1)).join(", ")}),e.jsx(O,{size:14})]}),De&&e.jsxs("div",{className:"campaign-details-filter-dropdown-menu",children:[e.jsxs("label",{className:"campaign-details-filter-dropdown-item",children:[e.jsx("input",{type:"checkbox",checked:h.has("all"),onChange:s=>{s.target.checked?R(new Set(["all"])):R(new Set)}}),e.jsx("span",{children:"All"})]}),e.jsxs("label",{className:"campaign-details-filter-dropdown-item",children:[e.jsx("input",{type:"checkbox",checked:h.has("not_interested"),onChange:s=>{const a=new Set(h);s.target.checked?(a.delete("all"),a.add("not_interested")):(a.delete("not_interested"),a.size===0&&a.add("all")),R(a)}}),e.jsx("span",{children:"Not Interested"})]}),e.jsxs("label",{className:"campaign-details-filter-dropdown-item",children:[e.jsx("input",{type:"checkbox",checked:h.has("neutral"),onChange:s=>{const a=new Set(h);s.target.checked?(a.delete("all"),a.add("neutral")):(a.delete("neutral"),a.size===0&&a.add("all")),R(a)}}),e.jsx("span",{children:"Neutral"})]}),e.jsxs("label",{className:"campaign-details-filter-dropdown-item",children:[e.jsx("input",{type:"checkbox",checked:h.has("angry"),onChange:s=>{const a=new Set(h);s.target.checked?(a.delete("all"),a.add("angry")):(a.delete("angry"),a.size===0&&a.add("all")),R(a)}}),e.jsx("span",{children:"Angry"})]}),e.jsxs("label",{className:"campaign-details-filter-dropdown-item",children:[e.jsx("input",{type:"checkbox",checked:h.has("interested"),onChange:s=>{const a=new Set(h);s.target.checked?(a.delete("all"),a.add("interested")):(a.delete("interested"),a.size===0&&a.add("all")),R(a)}}),e.jsx("span",{children:"Interested"})]}),e.jsxs("label",{className:"campaign-details-filter-dropdown-item",children:[e.jsx("input",{type:"checkbox",checked:h.has("very_happy"),onChange:s=>{const a=new Set(h);s.target.checked?(a.delete("all"),a.add("very_happy")):(a.delete("very_happy"),a.size===0&&a.add("all")),R(a)}}),e.jsx("span",{children:"Very Happy"})]}),e.jsxs("label",{className:"campaign-details-filter-dropdown-item",children:[e.jsx("input",{type:"checkbox",checked:h.has("blank"),onChange:s=>{const a=new Set(h);s.target.checked?(a.delete("all"),a.add("blank")):(a.delete("blank"),a.size===0&&a.add("all")),R(a)}}),e.jsx("span",{children:"No Score"})]})]})]})]}),e.jsxs("div",{className:"campaign-details-filter-dropdown-wrapper",children:[e.jsx("span",{className:"campaign-details-filter-label-inline",children:"Outcome:"}),e.jsxs("div",{className:"campaign-details-filter-dropdown",children:[e.jsxs("button",{className:"campaign-details-filter-dropdown-button",onClick:()=>Ue(!Ee),type:"button",children:[e.jsx("span",{children:v.has("all")?"All":Array.from(v).map(s=>s==="n/a"?"N/A":s).join(", ")}),e.jsx(O,{size:14})]}),Ee&&e.jsxs("div",{className:"campaign-details-filter-dropdown-menu",children:[e.jsxs("label",{className:"campaign-details-filter-dropdown-item",children:[e.jsx("input",{type:"checkbox",checked:v.has("all"),onChange:s=>{s.target.checked?ne(new Set(["all"])):ne(new Set)}}),e.jsx("span",{children:"All"})]}),(()=>{const s=new Map;return Q.forEach(t=>{const n=t.calls&&t.calls.length>0?t.calls[0]:null,i=L(t);if(i&&i!=="N/A"){const l=n?.callDuration||n?.durationSeconds||null,r=we(i,l);s.has(i)||s.set(i,r.text)}}),Array.from(s.entries()).sort((t,n)=>t[1].localeCompare(n[1])).map(([t,n])=>e.jsxs("label",{className:"campaign-details-filter-dropdown-item",children:[e.jsx("input",{type:"checkbox",checked:v.has(t.toLowerCase()),onChange:i=>{const l=new Set(v);i.target.checked?(l.delete("all"),l.add(t.toLowerCase())):(l.delete(t.toLowerCase()),l.size===0&&l.add("all")),ne(l)}}),e.jsx("span",{children:n})]},t))})(),e.jsxs("label",{className:"campaign-details-filter-dropdown-item",children:[e.jsx("input",{type:"checkbox",checked:v.has("n/a"),onChange:s=>{const a=new Set(v);s.target.checked?(a.delete("all"),a.add("n/a")):(a.delete("n/a"),a.size===0&&a.add("all")),ne(a)}}),e.jsx("span",{children:"N/A"})]})]})]})]})]}),N&&!us&&e.jsxs("div",{className:"campaign-details-metrics-section",children:[e.jsx("div",{className:"campaign-details-metrics-header",children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%"},children:[e.jsxs("div",{children:[e.jsx("h2",{className:"campaign-details-metrics-title",children:"Metrics"}),e.jsx("p",{className:"campaign-details-metrics-subtitle",children:"Small summary of campaign performance."})]}),e.jsxs("div",{className:"campaign-details-stats-primary",children:[e.jsxs("div",{className:"campaign-details-stat-chip",children:[e.jsx("span",{className:"campaign-details-stat-chip-value",children:N.totalOrders||0}),e.jsx("span",{className:"campaign-details-stat-chip-label",children:"Orders"})]}),e.jsxs("div",{className:"campaign-details-stat-chip",children:[e.jsx("span",{className:"campaign-details-stat-chip-value",children:N.totalConnected||0}),e.jsx("span",{className:"campaign-details-stat-chip-label",children:"Connected"})]}),e.jsxs("div",{className:"campaign-details-stat-chip",children:[e.jsxs("span",{className:"campaign-details-stat-chip-value",children:[N.conversionRate||0,"%"]}),e.jsx("span",{className:"campaign-details-stat-chip-label",children:"Converted"})]})]})]})}),e.jsxs("div",{className:"campaign-details-metrics-content",children:[C&&!hs&&e.jsxs("div",{className:"campaign-details-order-stats",style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"16px",marginBottom:"24px",padding:"20px",backgroundColor:"#f9fafb",borderRadius:"12px",border:"1px solid #e5e7eb"},children:[e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",padding:"16px",backgroundColor:"white",borderRadius:"8px",border:"1px solid #e5e7eb"},children:[e.jsxs("span",{style:{fontSize:"32px",fontWeight:700,color:"#111827",marginBottom:"4px"},children:[C.pickupRate.toFixed(1),"%"]}),e.jsx("span",{style:{fontSize:"14px",color:"#6b7280",textAlign:"center",fontWeight:500},children:"Pickup Rate"}),e.jsxs("span",{style:{fontSize:"12px",color:"#9ca3af",marginTop:"4px"},children:[C.pickedUpCalls||0," / ",C.isTestCallsCampaign?C.totalOrders||0:C.totalCalls||0," ",C.isTestCallsCampaign?"orders":"calls"]})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",padding:"16px",backgroundColor:"white",borderRadius:"8px",border:"1px solid #e5e7eb"},children:[e.jsxs("span",{style:{fontSize:"32px",fontWeight:700,color:"#10b981",marginBottom:"4px"},children:[C.successRate.toFixed(1),"%"]}),e.jsx("span",{style:{fontSize:"14px",color:"#6b7280",textAlign:"center",fontWeight:500},children:"Confirmation Rate"}),e.jsxs("span",{style:{fontSize:"12px",color:"#9ca3af",marginTop:"4px"},children:[C.successfulCriteriaOrders||0," / ",C.pickedUpCalls||0," ",C.isTestCallsCampaign?"orders":"picked up"]})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",padding:"16px",backgroundColor:"white",borderRadius:"8px",border:"1px solid #e5e7eb"},children:[e.jsxs("span",{style:{fontSize:"32px",fontWeight:700,color:"#111827",marginBottom:"4px"},children:[C.earlyDisconnectRate.toFixed(1),"%"]}),e.jsx("span",{style:{fontSize:"14px",color:"#6b7280",textAlign:"center",fontWeight:500},children:"Early Disconnects"}),e.jsxs("span",{style:{fontSize:"12px",color:"#9ca3af",marginTop:"4px"},children:[C.earlyDisconnectOrders||0," / ",C.pickedUpCalls||0," ",C.isTestCallsCampaign?"orders":"picked up"]})]})]}),e.jsxs("div",{className:"campaign-details-stats-secondary",children:[e.jsxs("button",{className:"campaign-details-stats-toggle",onClick:()=>vs(!ge),children:[e.jsx("span",{children:"More Metrics (5)"}),e.jsx(O,{size:16,className:ge?"rotated":""})]}),ge&&e.jsxs("div",{className:"campaign-details-stats-grid",children:[e.jsxs("div",{className:"campaign-details-stat-grid-item",children:[e.jsx("span",{className:"campaign-details-stat-grid-label",children:"Tribe:"}),e.jsx("span",{className:"campaign-details-stat-grid-value",children:N.completedTotal||0})]}),e.jsxs("div",{className:"campaign-details-stat-grid-item",children:[e.jsx("span",{className:"campaign-details-stat-grid-label",children:"Pick:"}),e.jsx("span",{className:"campaign-details-stat-grid-value",children:N.totalSuccess||0})]}),e.jsxs("div",{className:"campaign-details-stat-grid-item",children:[e.jsx("span",{className:"campaign-details-stat-grid-label",children:"Duration:"}),e.jsxs("span",{className:"campaign-details-stat-grid-value",children:[N.avgDuration||0,"s"]})]}),e.jsxs("div",{className:"campaign-details-stat-grid-item",children:[e.jsx("span",{className:"campaign-details-stat-grid-label",children:"Not Booked:"}),e.jsx("span",{className:"campaign-details-stat-grid-value",children:N.callNotBooked||0})]}),e.jsxs("div",{className:"campaign-details-stat-grid-item",children:[e.jsx("span",{className:"campaign-details-stat-grid-label",children:"With Calls:"}),e.jsx("span",{className:"campaign-details-stat-grid-value",children:N.ordersWithCalls||0})]})]})]}),e.jsxs("div",{className:"campaign-details-stats-other",children:[e.jsxs("button",{className:"campaign-details-stats-toggle",onClick:()=>Ss(!fe),children:[e.jsx("span",{children:"Other Details"}),e.jsx(O,{size:16,className:fe?"rotated":""})]}),fe&&e.jsxs("ul",{className:"campaign-details-stats-other-list",children:[e.jsxs("li",{children:["Address Change: ",N.addressChange||0]}),e.jsxs("li",{children:["Cancellation Request: ",N.cancellationRequest||0]}),e.jsxs("li",{children:["Handle Manually: ",N.handleManually||0]}),e.jsxs("li",{children:["Invalid: ",N.invalid||0]}),e.jsxs("li",{children:["Under 35s Retries: ",N.earlyDisconnectMaxRetries||0]}),e.jsxs("li",{children:["Not Picked Up (Retries): ",N.notPickedUpMaxRetries||0]})]})]})]})]}),xe&&e.jsx("div",{className:"campaigns-modal-overlay",onClick:()=>ie(!1),children:e.jsxs("div",{className:"campaigns-modal-content",onClick:s=>s.stopPropagation(),children:[e.jsxs("div",{className:"campaigns-modal-header",children:[e.jsx("h3",{className:"campaigns-modal-title",children:"Order Details"}),e.jsx("button",{className:"campaigns-modal-close",onClick:()=>ie(!1),children:e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),e.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),ws?e.jsx("div",{className:"order-details-loading",children:e.jsx(ea,{size:"medium",text:"Loading order details..."})}):g&&e.jsxs("div",{className:"campaigns-modal-body",children:[e.jsxs("div",{className:"campaigns-info-section",children:[e.jsx("h4",{className:"campaigns-info-section-title",children:"Customer Information"}),e.jsxs("div",{className:"campaigns-info-grid-two-col",children:[e.jsxs("div",{className:"campaigns-info-row",children:[e.jsx("span",{className:"campaigns-info-label",children:"Name"}),e.jsx("span",{className:"campaigns-info-value",children:g.customerName||"N/A"})]}),e.jsxs("div",{className:"campaigns-info-row",children:[e.jsx("span",{className:"campaigns-info-label",children:"Phone"}),e.jsx("span",{className:"campaigns-info-value",children:g.customerPhone||"N/A"})]}),e.jsxs("div",{className:"campaigns-info-row",children:[e.jsx("span",{className:"campaigns-info-label",children:"Email"}),e.jsx("span",{className:"campaigns-info-value",children:g.customerEmail||"N/A"})]}),Ks&&e.jsxs("div",{className:"campaigns-info-row",style:{gridColumn:"1 / -1"},children:[e.jsx("span",{className:"campaigns-info-label",children:"Address"}),e.jsx("span",{className:"campaigns-info-value",children:ts?g.customerAddress:"Not provided"})]}),H?.newAddress&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"campaigns-info-row",style:{gridColumn:"1 / -1"},children:[e.jsx("span",{className:"campaigns-info-label",children:"Updated Address"}),e.jsx("span",{className:"campaigns-info-value",children:H.newAddress})]}),e.jsx("div",{className:"campaigns-info-row",style:{gridColumn:"1 / -1",marginTop:"8px"},children:e.jsxs("div",{style:{display:"flex",gap:"12px",flexWrap:"wrap"},children:[e.jsx("button",{className:"campaigns-btn-unified campaigns-btn-secondary-unified",onClick:()=>Xe(H.id,g.customerAddress,H.newAddress),style:{padding:"8px 16px",fontSize:"13px"},children:"View / Edit"}),e.jsx("button",{className:"campaigns-btn-unified campaigns-btn-primary-unified",onClick:()=>Ze(g.orderId||g.id,H.newAddress),style:{padding:"8px 16px",fontSize:"13px"},children:"Push to Shopify"})]})})]}),e.jsxs("div",{className:"campaigns-info-row",children:[e.jsx("span",{className:"campaigns-info-label",children:"Order Number"}),e.jsx("span",{className:"campaigns-info-value",children:g.orderNumber?`#${g.orderNumber}`:"N/A"})]}),e.jsxs("div",{className:"campaigns-info-row",children:[e.jsx("span",{className:"campaigns-info-label",children:"Amount"}),e.jsx("span",{className:"campaigns-info-value",children:g.totalPrice?`${g.totalPrice} ${g.currency||""}`.trim():"N/A"})]}),e.jsxs("div",{className:"campaigns-info-row",children:[e.jsx("span",{className:"campaigns-info-label",children:"Date"}),e.jsx("span",{className:"campaigns-info-value",children:g.createdAt?es(g.createdAt):"N/A"})]}),e.jsxs("div",{className:"campaigns-info-row",children:[e.jsx("span",{className:"campaigns-info-label",children:"Status"}),e.jsx("span",{className:"campaigns-info-value",children:T(g.callStatus)})]})]}),e.jsx("div",{style:{marginTop:"16px",paddingTop:"16px",borderTop:"1px solid #e5e7eb"},children:e.jsxs("button",{className:"campaigns-btn-unified campaigns-btn-secondary-unified",onClick:()=>Ke([g.orderId||g.id]),style:{padding:"8px 16px",fontSize:"13px"},children:[e.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",style:{marginRight:"6px"},children:[e.jsx("path",{d:"M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"}),e.jsx("line",{x1:"7",y1:"7",x2:"7.01",y2:"7"})]}),"Tag Order"]})})]}),F.length>0&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"campaigns-info-divider"}),e.jsxs("div",{className:"campaigns-info-section",children:[e.jsxs("h4",{className:"campaigns-info-section-title",children:["Call History (",F.length," ",F.length===1?"call":"calls",")"]}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:F.map((s,a)=>e.jsxs("div",{style:{border:"1px solid #e5e7eb",borderRadius:"8px",padding:"16px",background:"#f9fafb"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"12px"},children:[e.jsxs("div",{children:[e.jsxs("div",{style:{fontSize:"14px",fontWeight:600,color:"#111827",marginBottom:"4px"},children:["Call #",a+1]}),e.jsxs("div",{style:{fontSize:"12px",color:"#6b7280",display:"flex",gap:"8px",flexWrap:"wrap"},children:[e.jsx("span",{children:_s(s.createdAt||s.startedAt)}),e.jsx("span",{children:"â€¢"}),e.jsxs("span",{children:["Duration: ",s.callDuration?s.callDuration+"s":"N/A"]})]})]}),e.jsx("span",{style:{fontSize:"12px",color:"#374151",fontWeight:500},children:s.callStatus||"Unknown"})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px 24px",marginTop:"12px"},children:[s.callOutcomeCategory&&e.jsxs("div",{className:"campaigns-info-row",children:[e.jsx("span",{className:"campaigns-info-label",children:"Outcome"}),e.jsx("span",{className:"campaigns-info-value",children:s.callOutcomeCategory})]}),s.callInterestScore&&e.jsxs("div",{className:"campaigns-info-row",children:[e.jsx("span",{className:"campaigns-info-label",children:"Interest Score"}),e.jsx("span",{className:"campaigns-info-value campaigns-info-value-emphasis",children:s.callInterestScore})]}),s.addressChangeRequested&&e.jsxs("div",{className:"campaigns-info-row",children:[e.jsx("span",{className:"campaigns-info-label",children:"Address Change"}),e.jsx("span",{className:"campaigns-info-value",children:"Requested"})]}),s.newAddress&&e.jsxs("div",{className:"campaigns-info-row",style:{gridColumn:"1 / -1"},children:[e.jsx("span",{className:"campaigns-info-label",children:"New Address"}),e.jsx("span",{className:"campaigns-info-value",style:{whiteSpace:"pre-wrap",wordBreak:"break-word"},children:s.newAddress})]})]}),s.newAddress&&e.jsx("div",{style:{marginTop:"12px",paddingTop:"12px",borderTop:"1px solid #e5e7eb"},children:e.jsxs("div",{style:{display:"flex",gap:"12px",flexWrap:"wrap"},children:[e.jsx("button",{className:"campaigns-btn-unified campaigns-btn-secondary-unified",onClick:()=>Xe(s.id,g.customerAddress,s.newAddress),style:{padding:"6px 12px",fontSize:"12px"},children:"Review GPT Address"}),e.jsx("button",{className:"campaigns-btn-unified campaigns-btn-primary-unified",onClick:()=>Ze(g.orderId||g.id,s.newAddress),style:{padding:"6px 12px",fontSize:"12px"},children:"Push to Shopify"})]})}),s.audioUrl&&s.audioUrl.startsWith("https://")&&e.jsxs("div",{style:{marginTop:"12px",paddingTop:"12px",borderTop:"1px solid #e5e7eb"},children:[e.jsx("span",{className:"campaigns-info-label",style:{display:"block",marginBottom:"8px"},children:"Audio"}),e.jsx("audio",{controls:!0,style:{width:"100%",height:"32px",marginBottom:"8px"},children:e.jsx("source",{src:s.audioUrl,type:"audio/mpeg"})}),e.jsx("button",{className:"campaigns-btn-unified campaigns-btn-secondary-unified",onClick:()=>window.open(s.audioUrl,"_blank"),style:{padding:"6px 12px",fontSize:"12px"},children:"Download Audio"})]}),s.transcript&&e.jsxs("div",{style:{marginTop:"12px",paddingTop:"12px",borderTop:"1px solid #e5e7eb"},children:[e.jsx("span",{className:"campaigns-info-label",style:{display:"block",marginBottom:"12px"},children:"Transcript"}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px",maxHeight:"300px",overflowY:"auto",padding:"8px",background:"#f9fafb",borderRadius:"8px"},children:sa(s.transcript).map((t,n)=>e.jsx("div",{style:{display:"flex",justifyContent:t.role==="user"?"flex-end":"flex-start",alignItems:"flex-start",gap:"8px"},children:e.jsx("div",{style:{maxWidth:"75%",padding:"10px 14px",borderRadius:"12px",fontSize:"13px",lineHeight:"1.5",wordBreak:"break-word",whiteSpace:"pre-wrap",background:t.role==="user"?"#4B5CFF":"#ffffff",color:t.role==="user"?"#ffffff":"#111827",border:t.role==="agent"?"1px solid #e5e7eb":"none",boxShadow:t.role==="agent"?"0 1px 2px rgba(0,0,0,0.05)":"none"},children:t.content})},n))})]}),s.callSummary&&e.jsxs("div",{style:{marginTop:"12px",paddingTop:"12px",borderTop:"1px solid #e5e7eb"},children:[e.jsx("span",{className:"campaigns-info-label",style:{display:"block",marginBottom:"8px"},children:"Summary"}),e.jsx("div",{style:{padding:"12px",background:"white",borderRadius:"6px",fontSize:"13px",lineHeight:"1.6",color:"#374151",whiteSpace:"pre-wrap",wordBreak:"break-word"},children:s.callSummary})]})]},s.id||a))})]})]}),F.length===0&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"campaigns-info-divider"}),e.jsx("div",{className:"campaigns-info-section",children:e.jsxs("div",{style:{textAlign:"center",padding:"40px",color:"#6b7280"},children:[e.jsx("p",{style:{margin:0},children:"No call history available for this order yet."}),e.jsx("p",{style:{margin:"8px 0 0 0",fontSize:"13px"},children:"Calls will appear here once the AI agent attempts this order."})]})})]})]}),e.jsx("div",{className:"campaigns-modal-footer",children:e.jsx("button",{className:"campaigns-btn-unified campaigns-btn-primary-unified",onClick:()=>ie(!1),children:"Close"})})]})}),ms?e.jsx("div",{className:"campaign-details-loading",children:"Loading orders..."}):e.jsx("div",{className:"campaign-details-orders-section",children:e.jsx("div",{className:"campaigns-table-wrapper-unified",children:e.jsxs("table",{className:"csv-history-table-unified",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:e.jsx("input",{type:"checkbox",checked:Ie,onChange:Vs})}),e.jsx("th",{style:{textAlign:"center",minWidth:"60px"},children:"#"}),e.jsx("th",{children:"Order #"}),e.jsx("th",{children:"Customer"}),e.jsx("th",{children:"Phone"}),e.jsx("th",{children:"Address"}),e.jsx("th",{children:"Script"}),e.jsx("th",{style:{textAlign:"center",cursor:"pointer"},onClick:()=>oe("totalCalls"),children:e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"4px"},children:["Total Calls",I==="totalCalls"?z==="asc"?e.jsx(de,{size:14}):e.jsx(O,{size:14}):e.jsx(pe,{size:14,style:{opacity:.3}})]})}),e.jsx("th",{style:{textAlign:"center",cursor:"pointer"},onClick:()=>oe("status"),children:e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"4px"},children:["Status",I==="status"?z==="asc"?e.jsx(de,{size:14}):e.jsx(O,{size:14}):e.jsx(pe,{size:14,style:{opacity:.3}})]})}),e.jsx("th",{style:{textAlign:"center",cursor:"pointer"},onClick:()=>oe("sentiment"),children:e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"4px"},children:["Sentiment",I==="sentiment"?z==="asc"?e.jsx(de,{size:14}):e.jsx(O,{size:14}):e.jsx(pe,{size:14,style:{opacity:.3}})]})}),e.jsx("th",{style:{textAlign:"center",cursor:"pointer"},onClick:()=>oe("outcome"),children:e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"4px"},children:["Call Outcome",I==="outcome"?z==="asc"?e.jsx(de,{size:14}):e.jsx(O,{size:14}):e.jsx(pe,{size:14,style:{opacity:.3}})]})}),e.jsx("th",{style:{textAlign:"center"},children:"Actions"})]})}),e.jsx("tbody",{children:Js.map((s,a)=>e.jsxs("tr",{onClick:()=>Ne(s.id),style:{cursor:"pointer"},children:[e.jsx("td",{onClick:t=>t.stopPropagation(),children:e.jsx("input",{type:"checkbox",checked:te.has(s.orderId||s.id),onChange:()=>Hs(s)})}),e.jsx("td",{style:{textAlign:"center",color:"#6b7280",fontWeight:500},children:a+1}),e.jsxs("td",{style:{fontWeight:600,color:"#111827"},children:["#",s.orderNumber||s.id]}),e.jsxs("td",{children:[e.jsx("div",{style:{fontWeight:500,color:"#111827"},children:s.customerName||"N/A"}),s.customerEmail&&e.jsx("div",{style:{fontSize:"12px",color:"#6b7280"},children:s.customerEmail})]}),e.jsx("td",{style:{color:"#6b7280"},children:s.customerPhone||"N/A"}),e.jsx("td",{style:{color:"#111827",maxWidth:"200px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:s.customerAddress||"N/A"}),e.jsx("td",{style:{color:"#111827",fontWeight:500},children:s.script?.name||"N/A"}),e.jsx("td",{style:{textAlign:"center"},children:e.jsx("span",{className:"call-count-badge",children:s.totalCallCount||0})}),e.jsx("td",{style:{textAlign:"center"},children:e.jsx("span",{className:"status-badge",children:T(s.callStatus)})}),e.jsx("td",{style:{textAlign:"center"},children:(()=>{const t=s.calls&&s.calls.length>0?s.calls[0]:null,n=t?.callInterestScore??t?.onehotscore??s.onehotscore??null,i=t?.transcript?t.transcript.length:0,l=B(n,i);return l?e.jsxs("span",{className:"sentiment-tag",style:{backgroundColor:l.color},children:[e.jsx("span",{className:"sentiment-bars-container",children:Array.from({length:l.totalBars}).map((r,m)=>e.jsx("span",{className:`sentiment-bar ${m<l.filledBars?"filled":""}`,style:{backgroundColor:m<l.filledBars?l.barColor:"#e5e7eb"}},m))}),e.jsx("span",{className:"sentiment-label",children:l.label})]}):e.jsx("span",{style:{color:"#9ca3af"},children:"â€”"})})()}),e.jsx("td",{style:{textAlign:"center",color:"#111827"},children:(()=>{const t=s.calls&&s.calls.length>0?s.calls[0]:null,n=L(s),i=t?.callDuration||t?.durationSeconds||null,l=we(n,i,s);return l.text==="N/A"||!l.text?e.jsx("span",{style:{color:"#9ca3af"},children:"â€”"}):l.color&&l.borderColor?e.jsx("span",{className:"sentiment-tag",style:{backgroundColor:l.color,borderColor:l.borderColor,borderWidth:"1px",borderStyle:"solid",color:"#111827"},children:e.jsx("span",{className:"sentiment-label",children:l.text})}):e.jsx("span",{style:{fontWeight:500},children:l.text})})()}),e.jsx("td",{className:"csv-table-cell-actions-unified",onClick:t=>t.stopPropagation(),children:e.jsx("button",{className:"campaigns-btn-unified campaigns-btn-primary-unified campaigns-btn-sm-unified",onClick:()=>Ps([s.orderId||s.id]),children:"AI Call"})})]},s.id))})]})})}),ys&&e.jsx("div",{className:"campaigns-modal-overlay",onClick:()=>le(!1),children:e.jsxs("div",{className:"campaigns-modal-content",onClick:s=>s.stopPropagation(),children:[e.jsxs("div",{className:"campaigns-modal-header",children:[e.jsxs("h3",{className:"campaigns-modal-title",children:["Bulk AI Call - ",Pe.length," Orders"]}),e.jsx("button",{className:"campaigns-modal-close",onClick:()=>le(!1),children:e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),e.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),e.jsxs("div",{className:"campaigns-modal-body",children:[e.jsx("p",{style:{marginBottom:"16px",color:"#6b7280"},children:"Choose a script to use for the selected orders:"}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:he.length>0?he.map(s=>e.jsx("button",{className:"campaigns-btn-unified campaigns-btn-secondary-unified",onClick:()=>$s(s.id,s.name),style:{textAlign:"left",justifyContent:"flex-start"},children:e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:600,marginBottom:"4px"},children:s.name}),e.jsx("div",{style:{fontSize:"12px",color:"#6b7280"},children:s.content?s.content.substring(0,100)+(s.content.length>100?"...":""):"No content"})]})},s.id)):e.jsx("p",{style:{textAlign:"center",color:"#6b7280"},children:"No scripts available. Please create a script first."})})]})]})}),ks&&e.jsx("div",{className:"campaigns-modal-overlay",onClick:()=>K(!1),children:e.jsxs("div",{className:"campaigns-modal-content",onClick:s=>s.stopPropagation(),style:{maxWidth:"500px"},children:[e.jsxs("div",{className:"campaigns-modal-header",children:[e.jsxs("h3",{className:"campaigns-modal-title",children:["Tag Orders - ",je.length," Selected"]}),e.jsx("button",{className:"campaigns-modal-close",onClick:()=>{K(!1),G(""),X("")},children:e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),e.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),e.jsxs("div",{className:"campaigns-modal-body",children:[e.jsx("p",{style:{marginBottom:"16px",color:"#6b7280"},children:"Select an existing tag or enter a new one:"}),Y.length>0&&e.jsxs("div",{style:{marginBottom:"20px"},children:[e.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",marginBottom:"8px",color:"#111827"},children:"Your Tags"}),e.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"8px"},children:Y.map(s=>e.jsx("button",{onClick:()=>{G(s),X("")},style:{padding:"6px 12px",borderRadius:"6px",border:D===s?"2px solid #4B5CFF":"1px solid #e5e7eb",background:D===s?"#f0f4ff":"#ffffff",color:D===s?"#4B5CFF":"#111827",fontSize:"13px",fontWeight:D===s?"600":"400",cursor:"pointer",transition:"all 0.2s"},children:s},s))})]}),e.jsxs("div",{style:{marginBottom:"20px"},children:[e.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",marginBottom:"8px",color:"#111827"},children:Y.length>0?"Or Enter New Tag":"Enter Tag Name"}),e.jsx("input",{type:"text",value:Z,onChange:s=>{X(s.target.value),G("")},placeholder:"Enter tag name...",style:{width:"100%",padding:"10px 12px",border:"1px solid #e5e7eb",borderRadius:"8px",fontSize:"14px"},onKeyPress:s=>{s.key==="Enter"&&(Z.trim()||D)&&Ye(Z.trim()||D)}})]}),e.jsxs("div",{style:{display:"flex",gap:"12px",justifyContent:"flex-end"},children:[e.jsx("button",{className:"campaigns-btn-unified campaigns-btn-secondary-unified",onClick:()=>{K(!1),G(""),X("")},disabled:ye,children:"Cancel"}),e.jsx("button",{className:"campaigns-btn-unified campaigns-btn-primary-unified",onClick:()=>Ye(Z.trim()||D),disabled:ye||!Z.trim()&&!D,children:ye?"Tagging...":`Tag ${je.length} Orders`})]})]})]})}),As&&y&&e.jsx("div",{className:"campaigns-modal-overlay",onClick:()=>ee(!1),children:e.jsx("div",{className:"campaigns-modal-content",style:{maxWidth:"800px",maxHeight:"90vh",overflowY:"auto"},onClick:s=>s.stopPropagation(),children:e.jsxs("div",{className:"profile-page-container",style:{padding:"24px",maxWidth:"100%"},children:[e.jsxs("div",{className:"profile-page-header",style:{marginBottom:"16px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("button",{className:"profile-back-button",onClick:()=>ee(!1),children:[e.jsx("img",{src:"/images/Raycons Icons Pack (Community)/arrow-left-8532508.svg",alt:"Back"}),"Back"]}),e.jsx("button",{onClick:()=>ee(!1),style:{background:"transparent",border:"none",cursor:"pointer",padding:"8px"},children:e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),e.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),e.jsx("h2",{className:"profile-page-title",style:{fontSize:"20px",marginBottom:"24px"},children:"Campaign Settings"}),U&&e.jsx("div",{className:"profile-detail-section",style:{marginBottom:"24px"},children:e.jsx("div",{className:"profile-detail-box",children:e.jsxs("div",{className:"profile-detail-item",children:[e.jsx("div",{className:"profile-detail-label",children:e.jsx("span",{children:"Script"})}),e.jsx("div",{className:"profile-detail-action",children:e.jsx("span",{style:{fontSize:"14px",color:"#6B7280"},children:U.name})})]})})}),e.jsx("div",{className:"profile-detail-section",children:e.jsx("div",{className:"profile-detail-box",children:e.jsxs("div",{className:"profile-detail-item",children:[e.jsxs("div",{className:"profile-detail-label",children:[e.jsx("span",{children:"Call Outcomes"}),e.jsx("span",{className:"profile-detail-hint",children:"Load unique call outcomes from this campaign"})]}),e.jsx("div",{className:"profile-detail-action",children:e.jsx("button",{className:"campaigns-btn-unified campaigns-btn-secondary-unified",onClick:Ge,disabled:be,style:{fontSize:"14px",padding:"8px 16px"},children:be?"Loading...":_.length>0?`Refresh (${_.length})`:"Load Outcomes"})})]})})}),_.length>0&&e.jsx("div",{style:{marginTop:"24px"},children:_.map((s,a)=>{const t=Ve.find(i=>i.outcome===s),n=t?.enabled||!1;return e.jsx("div",{className:"profile-detail-section",children:e.jsxs("div",{className:"profile-detail-box",children:[e.jsxs("div",{className:"profile-detail-item",children:[e.jsxs("div",{className:"profile-detail-label",children:[e.jsx("span",{children:s}),e.jsx("span",{className:"profile-detail-hint",children:"Auto-call when this outcome occurs"})]}),e.jsx("div",{className:"profile-detail-action",children:e.jsxs("label",{className:"profile-toggle-switch",children:[e.jsx("input",{type:"checkbox",checked:n,onChange:i=>{const l=i.target.checked;q(r=>{const m=r.find(o=>o.outcome===s);return m?(m.enabled=l,[...r]):[...r,{outcome:s,enabled:l,retrySettings:{maxRetries:S.maxRetries,retryIntervalMinutes:S.retryIntervalMinutes,autoCancelOnMaxRetries:S.autoCancelOnMaxRetries,allowedTimeStart:S.allowedTimeStart,allowedTimeEnd:S.allowedTimeEnd,timezone:S.timezone,allowedDays:[...S.allowedDays]}}]})}}),e.jsx("span",{className:"profile-toggle-slider"})]})})]}),n&&e.jsxs(e.Fragment,{children:[e.jsx("hr",{className:"profile-detail-divider"}),e.jsxs("div",{className:"profile-detail-item",style:{cursor:"pointer"},onClick:()=>{const i=new Set(Ce);i.has(s)?i.delete(s):i.add(s),Os(i)},children:[e.jsxs("div",{className:"profile-detail-label",children:[e.jsx("span",{children:"Retry Settings"}),e.jsx("span",{className:"profile-detail-hint",children:"Configure retry behavior for this outcome"})]}),e.jsx("div",{className:"profile-detail-action",children:e.jsx(O,{size:16,style:{transform:Ce.has(s)?"rotate(180deg)":"rotate(0deg)",transition:"transform 0.2s",color:"#6B7280"}})})]}),Ce.has(s)&&e.jsxs(e.Fragment,{children:[e.jsx("hr",{className:"profile-detail-divider"}),e.jsxs("div",{className:"profile-detail-item",children:[e.jsxs("div",{className:"profile-detail-label",children:[e.jsx("span",{children:"Max Retries"}),e.jsx("span",{className:"profile-detail-hint",children:"How many times should we try calling? (0-10)"})]}),e.jsx("div",{className:"profile-detail-action",children:e.jsx("input",{type:"number",className:"profile-detail-input",min:"0",max:"10",value:t?.retrySettings?.maxRetries??S.maxRetries,onChange:i=>{const l=i.target.value===""?0:parseInt(i.target.value);isNaN(l)||q(r=>{const m=r.find(c=>c.outcome===s)||{outcome:s,enabled:n,retrySettings:{...S}};return m.retrySettings={...m.retrySettings,maxRetries:l},[...r.filter(c=>c.outcome!==s),m]})}})})]}),e.jsx("hr",{className:"profile-detail-divider"}),e.jsxs("div",{className:"profile-detail-item",children:[e.jsxs("div",{className:"profile-detail-label",children:[e.jsx("span",{children:"Retry Interval (minutes)"}),e.jsx("span",{className:"profile-detail-hint",children:"How long to wait before trying again"})]}),e.jsx("div",{className:"profile-detail-action",children:e.jsx("input",{type:"number",className:"profile-detail-input",min:"2",max:"1440",value:t?.retrySettings?.retryIntervalMinutes??S.retryIntervalMinutes,onChange:i=>{const l=parseInt(i.target.value);isNaN(l)||q(r=>{const m=r.find(c=>c.outcome===s)||{outcome:s,enabled:n,retrySettings:{...S}};return m.retrySettings={...m.retrySettings,retryIntervalMinutes:l},[...r.filter(c=>c.outcome!==s),m]})}})})]}),e.jsx("hr",{className:"profile-detail-divider"}),e.jsxs("div",{className:"profile-detail-item",children:[e.jsxs("div",{className:"profile-detail-label",children:[e.jsx("span",{children:"Auto cancel after max retries"}),e.jsx("span",{className:"profile-detail-hint",children:"Automatically cancel the order in Shopify when we've tried calling the maximum number of times"})]}),e.jsx("div",{className:"profile-detail-action",children:e.jsxs("label",{className:"profile-toggle-switch",children:[e.jsx("input",{type:"checkbox",checked:t?.retrySettings?.autoCancelOnMaxRetries??S.autoCancelOnMaxRetries,onChange:i=>{q(l=>{const r=l.find(o=>o.outcome===s)||{outcome:s,enabled:n,retrySettings:{...S}};return r.retrySettings={...r.retrySettings,autoCancelOnMaxRetries:i.target.checked},[...l.filter(o=>o.outcome!==s),r]})}}),e.jsx("span",{className:"profile-toggle-slider"})]})})]})]})]})]})},a)})}),_.length===0&&!be&&e.jsx("div",{className:"profile-detail-section",children:e.jsx("div",{className:"profile-detail-box",children:e.jsx("div",{style:{padding:"40px",textAlign:"center",color:"#6B7280",fontSize:"14px"},children:'Click "Load Outcomes" to see unique call outcomes from this campaign'})})}),_.length>0&&e.jsx("div",{className:"profile-save-container",style:{marginTop:"32px"},children:e.jsx("button",{className:"profile-save-button-new",onClick:Fs,disabled:Qe,children:Qe?"Saving...":"Save Settings"})})]})})})]})})};export{Ca as default};
